(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39086,e=>{"use strict";e.i(47167);var t=e.i(43476),i=e.i(71645),o=e.i(18566);e.i(17363);var n=e.i(26549),l=e.i(44830),r=e.i(79617),d=e.i(11276),s=e.i(26569),a=e.i(57616);let p=({show:e,onClose:i,selectedCount:o,rfqNo:n,rfqGroupName:l,onRfqGroupNameChange:r,onSubmit:d,mode:s="create",onDelete:a})=>{if(!e)return null;let p="edit"===s;return(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:i,children:(0,t.jsxs)("div",{style:{background:"white",borderRadius:"8px",padding:"30px",minWidth:"500px",maxWidth:"90%",boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"bold",color:"#2c3e50"},children:p?"見積依頼グループ編集":"見積依頼グループ登録"}),(0,t.jsxs)("div",{style:{marginBottom:"20px",padding:"15px",background:p?"#e3f2fd":"#e8f5e9",borderRadius:"4px",border:`1px solid ${p?"#3498db":"#27ae60"}`},children:[(0,t.jsxs)("p",{style:{margin:"0 0 8px 0",fontSize:"14px",color:"#2c3e50"},children:[(0,t.jsx)("strong",{children:p?"対象申請:":"選択された申請:"})," ",o,"件"]}),(0,t.jsx)("p",{style:{margin:"0",fontSize:"13px",color:"#555"},children:p?"このグループに紐づいている申請です":"これらの申請をまとめて見積依頼グループとして登録します"})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"bold",color:"#2c3e50"},children:"見積依頼No."}),(0,t.jsx)("input",{type:"text",value:n,readOnly:!0,style:{width:"100%",padding:"10px",fontSize:"14px",border:"1px solid #ddd",borderRadius:"4px",background:"#f5f5f5",color:"#555",fontFamily:"monospace",fontWeight:"bold"}}),!p&&(0,t.jsx)("p",{style:{margin:"5px 0 0 0",fontSize:"12px",color:"#7f8c8d"},children:"※自動採番されます"})]}),(0,t.jsxs)("div",{style:{marginBottom:"25px"},children:[(0,t.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"bold",color:"#2c3e50"},children:["見積依頼グループ名称 ",(0,t.jsx)("span",{style:{color:"#e74c3c"},children:"*"})]}),(0,t.jsx)("input",{type:"text",value:l,onChange:e=>r(e.target.value),placeholder:"例: 2025年度リモデル第1期",style:{width:"100%",padding:"10px",fontSize:"14px",border:"1px solid #ddd",borderRadius:"4px"},autoFocus:!0})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:p?"space-between":"flex-end"},children:[p&&a&&(0,t.jsx)("button",{style:{padding:"10px 24px",background:"#e74c3c",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},onClick:a,onMouseEnter:e=>{e.currentTarget.style.background="#c0392b"},onMouseLeave:e=>{e.currentTarget.style.background="#e74c3c"},children:"削除"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,t.jsx)("button",{style:{padding:"10px 24px",background:"#95a5a6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},onClick:i,onMouseEnter:e=>{e.currentTarget.style.background="#7f8c8d"},onMouseLeave:e=>{e.currentTarget.style.background="#95a5a6"},children:"キャンセル"}),(0,t.jsx)("button",{style:{padding:"10px 24px",background:"#27ae60",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},onClick:d,onMouseEnter:e=>{e.currentTarget.style.background="#229954"},onMouseLeave:e=>{e.currentTarget.style.background="#27ae60"},children:p?"更新":"登録"})]})]})]})})},c={新規申請:{base:"#27ae60",active:"#1e8449",border:"#145a32"},増設申請:{base:"#3498db",active:"#21618c",border:"#1a4971"},更新申請:{base:"#e67e22",active:"#ba4a00",border:"#873600"},移動申請:{base:"#9b59b6",active:"#6c3483",border:"#512e5f"},廃棄申請:{base:"#e74c3c",active:"#a93226",border:"#78281f"},保留:{base:"#95a5a6",active:"#626567",border:"#424949"}},x=["新規申請","増設申請","更新申請","移動申請","廃棄申請","保留"],u=({selectedCount:e,currentFilter:i,onFilterChange:o,onClearFilter:n})=>(0,t.jsxs)("div",{style:{background:"#fff",padding:"15px 20px",borderBottom:"1px solid #dee2e6",display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[(0,t.jsxs)("span",{style:{fontSize:"14px",color:"#555",marginRight:"15px"},children:[e,"件選択中"]}),x.map(e=>{let n=c[e],l=i===e;return(0,t.jsx)("button",{style:{padding:"8px 16px",background:l?n.active:n.base,color:"white",border:l?`2px solid ${n.border}`:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:l?"bold":"normal"},onClick:()=>o(e),children:e},e)}),i&&(0,t.jsx)("button",{style:{padding:"8px 16px",background:"white",color:"#e74c3c",border:"1px solid #e74c3c",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"normal",marginLeft:"10px"},onClick:n,onMouseEnter:e=>{e.currentTarget.style.background="#e74c3c",e.currentTarget.style.color="white"},onMouseLeave:e=>{e.currentTarget.style.background="white",e.currentTarget.style.color="#e74c3c"},children:"クリア"})]}),g=["契約書（押印済）","納品書（業者）","検収書（押印分）","保証書","取扱説明書","添付文書（JMDN発行）","カタログdata"],f=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},h=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),b=({show:e,onClose:o,application:n,onSubmit:l,generateQrCodeNo:r})=>{let[d,s]=(0,i.useState)(""),[a,p]=(0,i.useState)(""),[c,x]=(0,i.useState)([]),[u,b]=(0,i.useState)(g.map(e=>({type:e,files:[]}))),y=(0,i.useRef)(null),m=(0,i.useRef)({});return((0,i.useEffect)(()=>{e&&n&&(n.originalRegistration?(s(n.originalRegistration.qrCodeNo||""),p(n.originalRegistration.serialNo||""),x(n.originalRegistration.photos||[]),b(g.map(e=>{let t=n.originalRegistration?.documents.find(t=>t.type===e);return{type:e,files:t?.files||[]}}))):(s(r()),p(""),x([]),b(g.map(e=>({type:e,files:[]})))))},[e,n,r]),e&&n)?(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:o,children:(0,t.jsxs)("div",{style:{background:"white",borderRadius:"8px",width:"90%",maxWidth:"900px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid #dee2e6",background:"#f8f9fa",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)("h2",{style:{margin:0,fontSize:"18px",color:"#2c3e50"},children:["原本登録 - ",n.applicationNo]}),(0,t.jsx)("button",{onClick:o,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#7f8c8d"},children:"×"})]}),(0,t.jsxs)("div",{style:{padding:"20px"},children:[(0,t.jsx)("div",{style:{marginBottom:"20px",padding:"15px",background:"#e8f5e9",borderRadius:"4px",border:"1px solid #a5d6a7"},children:(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px",fontSize:"13px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{color:"#666"},children:"申請種別:"})," ",(0,t.jsx)("strong",{children:n.applicationType})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{color:"#666"},children:"品目:"})," ",(0,t.jsx)("strong",{children:n.asset.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{color:"#666"},children:"メーカー:"})," ",(0,t.jsx)("strong",{children:n.vendor})]})]})}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#2c3e50"},children:"① QRコードNo."}),(0,t.jsx)("div",{style:{padding:"12px 16px",background:"#fff3cd",borderRadius:"4px",border:"1px solid #ffc107",fontFamily:"monospace",fontSize:"16px",fontWeight:"bold",color:"#856404"},children:d}),(0,t.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#666"},children:"※ 自動採番されたQRコードNo.です。登録確定後に変更できません。"})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#2c3e50"},children:"② 写真アップロード"}),(0,t.jsxs)("div",{style:{border:"2px dashed #3498db",borderRadius:"4px",padding:"20px",textAlign:"center",background:"#f8fbff",cursor:"pointer"},onClick:()=>y.current?.click(),children:[(0,t.jsx)("input",{ref:y,type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:e=>{let t=e.target.files;if(!t)return;let i=Array.from(t).map(e=>({id:h(),fileName:e.name,fileType:e.type,fileSize:e.size,uploadedAt:new Date().toISOString()}));x(e=>[...e,...i]),y.current&&(y.current.value="")}}),(0,t.jsx)("div",{style:{fontSize:"14px",color:"#3498db"},children:"クリックまたはドラッグ＆ドロップで写真を追加"})]}),c.length>0&&(0,t.jsx)("div",{style:{marginTop:"10px",display:"flex",flexWrap:"wrap",gap:"10px"},children:c.map(e=>(0,t.jsxs)("div",{style:{padding:"8px 12px",background:"#e3f2fd",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px",fontSize:"12px"},children:[(0,t.jsx)("span",{style:{color:"#1565c0"},children:e.fileName}),(0,t.jsxs)("span",{style:{color:"#666"},children:["(",f(e.fileSize),")"]}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void x(e=>e.filter(e=>e.id!==t))},style:{background:"#e74c3c",color:"white",border:"none",borderRadius:"50%",width:"20px",height:"20px",cursor:"pointer",fontSize:"12px",lineHeight:"1"},children:"×"})]},e.id))})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#2c3e50"},children:"③ シリアルNo."}),(0,t.jsx)("input",{type:"text",value:a,onChange:e=>p(e.target.value),placeholder:"シリアルナンバーを入力",style:{width:"100%",padding:"10px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#2c3e50"},children:"④ 各種ドキュメントアップロード"}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:u.map(e=>(0,t.jsxs)("div",{style:{padding:"12px",background:"#fafafa",borderRadius:"4px",border:"1px solid #eee"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,t.jsx)("span",{style:{fontWeight:500,color:"#2c3e50",fontSize:"13px"},children:e.type}),(0,t.jsx)("button",{onClick:()=>m.current[e.type]?.click(),style:{padding:"6px 12px",background:"#3498db",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"ファイル追加"}),(0,t.jsx)("input",{ref:t=>{m.current[e.type]=t},type:"file",multiple:!0,style:{display:"none"},onChange:t=>((e,t)=>{let i=t.target.files;if(!i)return;let o=Array.from(i).map(e=>({id:h(),fileName:e.name,fileType:e.type,fileSize:e.size,uploadedAt:new Date().toISOString()}));b(t=>t.map(t=>t.type===e?{...t,files:[...t.files,...o]}:t));let n=m.current[e];n&&(n.value="")})(e.type,t)})]}),e.files.length>0&&(0,t.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:e.files.map(i=>(0,t.jsxs)("div",{style:{padding:"6px 10px",background:"#e8f5e9",borderRadius:"4px",display:"flex",alignItems:"center",gap:"6px",fontSize:"11px"},children:[(0,t.jsx)("span",{style:{color:"#2e7d32"},children:i.fileName}),(0,t.jsxs)("span",{style:{color:"#666"},children:["(",f(i.fileSize),")"]}),(0,t.jsx)("button",{onClick:()=>{var t,o;return t=e.type,o=i.id,void b(e=>e.map(e=>e.type===t?{...e,files:e.files.filter(e=>e.id!==o)}:e))},style:{background:"#e74c3c",color:"white",border:"none",borderRadius:"50%",width:"18px",height:"18px",cursor:"pointer",fontSize:"11px",lineHeight:"1"},children:"×"})]},i.id))}),0===e.files.length&&(0,t.jsx)("span",{style:{fontSize:"12px",color:"#95a5a6",fontStyle:"italic"},children:"ファイルなし"})]},e.type))})]})]}),(0,t.jsxs)("div",{style:{padding:"15px 20px",borderTop:"1px solid #dee2e6",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,t.jsx)("button",{onClick:o,style:{padding:"10px 24px",background:"#95a5a6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"キャンセル"}),(0,t.jsx)("button",{onClick:()=>{if(!n)return;let e={qrCodeNo:d,serialNo:a,photos:c,documents:u.filter(e=>e.files.length>0),registeredAt:new Date().toISOString(),registeredBy:"current-user"};l(n.id,e),o()},style:{padding:"10px 24px",background:"#27ae60",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"登録確定"})]})]})}):null},y=["廃棄申請書","廃棄証明書","写真（廃棄前）","写真（廃棄後）"],m=({show:e,onClose:o,application:n,onSubmit:l})=>{let[r,d]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),[p,c]=(0,i.useState)(y.map(e=>({type:e,files:[]}))),[x,u]=(0,i.useState)(!1),g=(0,i.useRef)({});return((0,i.useEffect)(()=>{e&&(d(""),a(new Date().toISOString().split("T")[0]),c(y.map(e=>({type:e,files:[]}))),u(!1))},[e]),e&&n)?(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:o,children:(0,t.jsxs)("div",{style:{background:"white",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid #dee2e6",background:"#e74c3c",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},children:[(0,t.jsxs)("h2",{style:{margin:0,fontSize:"18px"},children:["廃棄執行 - ",n.applicationNo]}),(0,t.jsx)("button",{onClick:o,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"white"},children:"×"})]}),(0,t.jsxs)("div",{style:{padding:"20px"},children:[(0,t.jsx)("div",{style:{marginBottom:"20px",padding:"15px",background:"#ffebee",borderRadius:"4px",border:"1px solid #ef9a9a"},children:(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px",fontSize:"13px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{color:"#666"},children:"品目:"})," ",(0,t.jsx)("strong",{children:n.asset.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{color:"#666"},children:"型式:"})," ",(0,t.jsx)("strong",{children:n.asset.model})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{color:"#666"},children:"メーカー:"})," ",(0,t.jsx)("strong",{children:n.vendor})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{color:"#666"},children:"設置場所:"})," ",(0,t.jsxs)("strong",{children:[n.facility.building," ",n.facility.floor," ",n.facility.department]})]})]})}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#2c3e50"},children:"廃棄日"}),(0,t.jsx)("input",{type:"date",value:s,onChange:e=>a(e.target.value),style:{padding:"10px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#2c3e50"},children:"廃棄理由"}),(0,t.jsx)("textarea",{value:r,onChange:e=>d(e.target.value),placeholder:"廃棄理由を入力してください",rows:3,style:{width:"100%",padding:"10px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",resize:"vertical",boxSizing:"border-box"}})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#2c3e50"},children:"関連ドキュメント"}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:p.map(e=>(0,t.jsxs)("div",{style:{padding:"10px",background:"#fafafa",borderRadius:"4px",border:"1px solid #eee"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[(0,t.jsx)("span",{style:{fontWeight:500,fontSize:"13px"},children:e.type}),(0,t.jsx)("button",{onClick:()=>g.current[e.type]?.click(),style:{padding:"4px 10px",background:"#3498db",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"追加"}),(0,t.jsx)("input",{ref:t=>{g.current[e.type]=t},type:"file",multiple:!0,style:{display:"none"},onChange:t=>((e,t)=>{let i=t.target.files;if(!i)return;let o=Array.from(i).map(e=>({id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),fileName:e.name,fileType:e.type,fileSize:e.size,uploadedAt:new Date().toISOString()}));c(t=>t.map(t=>t.type===e?{...t,files:[...t.files,...o]}:t));let n=g.current[e];n&&(n.value="")})(e.type,t)})]}),e.files.length>0?(0,t.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:e.files.map(i=>(0,t.jsxs)("div",{style:{padding:"4px 8px",background:"#e3f2fd",borderRadius:"4px",display:"flex",alignItems:"center",gap:"4px",fontSize:"11px"},children:[(0,t.jsx)("span",{children:i.fileName}),(0,t.jsx)("button",{onClick:()=>{var t,o;return t=e.type,o=i.id,void c(e=>e.map(e=>e.type===t?{...e,files:e.files.filter(e=>e.id!==o)}:e))},style:{background:"#e74c3c",color:"white",border:"none",borderRadius:"50%",width:"16px",height:"16px",cursor:"pointer",fontSize:"10px"},children:"×"})]},i.id))}):(0,t.jsx)("span",{style:{fontSize:"11px",color:"#95a5a6"},children:"ファイルなし"})]},e.type))})]}),(0,t.jsx)("div",{style:{padding:"15px",background:"#fff3cd",borderRadius:"4px",border:"1px solid #ffc107"},children:(0,t.jsxs)("label",{style:{display:"flex",alignItems:"flex-start",gap:"10px",cursor:"pointer"},children:[(0,t.jsx)("input",{type:"checkbox",checked:x,onChange:e=>u(e.target.checked),style:{marginTop:"3px"}}),(0,t.jsx)("span",{style:{fontSize:"13px",color:"#856404"},children:"この操作により、対象資産のレコードが廃棄済みとなり、申請は完了（クローズ）となります。 この操作は取り消せません。"})]})})]}),(0,t.jsxs)("div",{style:{padding:"15px 20px",borderTop:"1px solid #dee2e6",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,t.jsx)("button",{onClick:o,style:{padding:"10px 24px",background:"#95a5a6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"キャンセル"}),(0,t.jsx)("button",{onClick:()=>{n&&x&&(l(n.id),o())},disabled:!x,style:{padding:"10px 24px",background:x?"#e74c3c":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:x?"pointer":"not-allowed",fontSize:"14px",fontWeight:"bold"},children:"廃棄執行"})]})]})}):null},j=["移動申請書","移動確認書","写真（移動前）","写真（移動後）"],S=({show:e,onClose:o,application:n,onSubmit:l})=>{let[r,d]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),[p,c]=(0,i.useState)(j.map(e=>({type:e,files:[]}))),[x,u]=(0,i.useState)(!1),g=(0,i.useRef)({});if((0,i.useEffect)(()=>{e&&(d(new Date().toISOString().split("T")[0]),a(""),c(j.map(e=>({type:e,files:[]}))),u(!1))},[e]),!e||!n)return null;let f=n.applicationReason||"移動先は申請内容を参照してください";return(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:o,children:(0,t.jsxs)("div",{style:{background:"white",borderRadius:"8px",width:"90%",maxWidth:"700px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid #dee2e6",background:"#9b59b6",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},children:[(0,t.jsxs)("h2",{style:{margin:0,fontSize:"18px"},children:["移動執行 - ",n.applicationNo]}),(0,t.jsx)("button",{onClick:o,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"white"},children:"×"})]}),(0,t.jsxs)("div",{style:{padding:"20px"},children:[(0,t.jsx)("div",{style:{marginBottom:"20px",padding:"15px",background:"#f3e5f5",borderRadius:"4px",border:"1px solid #ce93d8"},children:(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px",fontSize:"13px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{color:"#666"},children:"品目:"})," ",(0,t.jsx)("strong",{children:n.asset.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{color:"#666"},children:"型式:"})," ",(0,t.jsx)("strong",{children:n.asset.model})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{color:"#666"},children:"メーカー:"})," ",(0,t.jsx)("strong",{children:n.vendor})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{color:"#666"},children:"現在の設置場所:"})," ",(0,t.jsxs)("strong",{children:[n.facility.building," ",n.facility.floor," ",n.facility.department]})]})]})}),(0,t.jsxs)("div",{style:{marginBottom:"20px",padding:"15px",background:"#e8f5e9",borderRadius:"4px",border:"1px solid #a5d6a7"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#2e7d32"},children:"移動先・申請理由"}),(0,t.jsx)("div",{style:{fontSize:"14px"},children:(0,t.jsx)("strong",{children:f})})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#2c3e50"},children:"移動日"}),(0,t.jsx)("input",{type:"date",value:r,onChange:e=>d(e.target.value),style:{padding:"10px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#2c3e50"},children:"備考"}),(0,t.jsx)("textarea",{value:s,onChange:e=>a(e.target.value),placeholder:"備考があれば入力してください",rows:3,style:{width:"100%",padding:"10px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",resize:"vertical",boxSizing:"border-box"}})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#2c3e50"},children:"関連ドキュメント"}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:p.map(e=>(0,t.jsxs)("div",{style:{padding:"10px",background:"#fafafa",borderRadius:"4px",border:"1px solid #eee"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[(0,t.jsx)("span",{style:{fontWeight:500,fontSize:"13px"},children:e.type}),(0,t.jsx)("button",{onClick:()=>g.current[e.type]?.click(),style:{padding:"4px 10px",background:"#3498db",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"追加"}),(0,t.jsx)("input",{ref:t=>{g.current[e.type]=t},type:"file",multiple:!0,style:{display:"none"},onChange:t=>((e,t)=>{let i=t.target.files;if(!i)return;let o=Array.from(i).map(e=>({id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),fileName:e.name,fileType:e.type,fileSize:e.size,uploadedAt:new Date().toISOString()}));c(t=>t.map(t=>t.type===e?{...t,files:[...t.files,...o]}:t));let n=g.current[e];n&&(n.value="")})(e.type,t)})]}),e.files.length>0?(0,t.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:e.files.map(i=>(0,t.jsxs)("div",{style:{padding:"4px 8px",background:"#e3f2fd",borderRadius:"4px",display:"flex",alignItems:"center",gap:"4px",fontSize:"11px"},children:[(0,t.jsx)("span",{children:i.fileName}),(0,t.jsx)("button",{onClick:()=>{var t,o;return t=e.type,o=i.id,void c(e=>e.map(e=>e.type===t?{...e,files:e.files.filter(e=>e.id!==o)}:e))},style:{background:"#e74c3c",color:"white",border:"none",borderRadius:"50%",width:"16px",height:"16px",cursor:"pointer",fontSize:"10px"},children:"×"})]},i.id))}):(0,t.jsx)("span",{style:{fontSize:"11px",color:"#95a5a6"},children:"ファイルなし"})]},e.type))})]}),(0,t.jsx)("div",{style:{padding:"15px",background:"#fff3cd",borderRadius:"4px",border:"1px solid #ffc107"},children:(0,t.jsxs)("label",{style:{display:"flex",alignItems:"flex-start",gap:"10px",cursor:"pointer"},children:[(0,t.jsx)("input",{type:"checkbox",checked:x,onChange:e=>u(e.target.checked),style:{marginTop:"3px"}}),(0,t.jsx)("span",{style:{fontSize:"13px",color:"#856404"},children:"この操作により、対象資産の設置場所が更新され、申請は完了（クローズ）となります。"})]})})]}),(0,t.jsxs)("div",{style:{padding:"15px 20px",borderTop:"1px solid #dee2e6",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,t.jsx)("button",{onClick:o,style:{padding:"10px 24px",background:"#95a5a6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"キャンセル"}),(0,t.jsx)("button",{onClick:()=>{n&&x&&(l(n.id),o())},disabled:!x,style:{padding:"10px 24px",background:x?"#9b59b6":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:x?"pointer":"not-allowed",fontSize:"14px",fontWeight:"bold"},children:"移動執行"})]})]})})},v=({value:e,fieldKey:o,applicationId:n,isSelected:l,selectedCount:r,onSave:d,onBulkEdit:s,style:a={},type:p="text",options:c=[]})=>{let[x,u]=(0,i.useState)(!1),[g,f]=(0,i.useState)(e),[h,b]=(0,i.useState)(!1),y=(0,i.useRef)(null),m=(0,i.useRef)(null);(0,i.useEffect)(()=>{f(e)},[e]),(0,i.useEffect)(()=>{x&&y.current&&(y.current.focus(),y.current instanceof HTMLInputElement&&y.current.select())},[x]);let j=(0,i.useCallback)(t=>{m.current&&!m.current.contains(t.target)&&(g!==e&&d(n,o,g),u(!1),b(!1))},[g,e,n,o,d]);(0,i.useEffect)(()=>{if(x)return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[x,j]);let S=t=>{"Enter"===t.key?(g!==e&&d(n,o,g),u(!1)):"Escape"===t.key&&(f(e),u(!1))},v={padding:"12px 8px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",transition:"background-color 0.15s ease",backgroundColor:x?"#fff3cd":h?"#e8f4fd":"transparent",position:"relative",...a};return x?(0,t.jsx)("td",{ref:m,style:v,children:"select"===p?(0,t.jsxs)("select",{ref:y,value:g,onChange:e=>f(e.target.value),onKeyDown:S,style:{width:"100%",padding:"4px 8px",border:"2px solid #3498db",borderRadius:"4px",fontSize:"13px",outline:"none"},children:[(0,t.jsx)("option",{value:"",children:"-"}),c.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}):(0,t.jsx)("input",{ref:y,type:"text",value:g,onChange:e=>f(e.target.value),onKeyDown:S,style:{width:"100%",padding:"4px 8px",border:"2px solid #3498db",borderRadius:"4px",fontSize:"13px",outline:"none"}})}):(0,t.jsxs)("td",{ref:m,style:v,onDoubleClick:t=>{(t.stopPropagation(),r>1&&l)?s(o,e):u(!0)},onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),title:r>1&&l?"ダブルクリックで一括編集":"ダブルクリックで編集",children:[e||"-",h&&(0,t.jsx)("span",{style:{position:"absolute",right:"4px",top:"50%",transform:"translateY(-50%)",fontSize:"10px",color:"#3498db",pointerEvents:"none"},children:"✏️"})]})},k={applicationNo:"申請番号",applicationDate:"申請日",applicationType:"申請種別","facility.building":"棟","facility.floor":"階","facility.department":"部門","facility.section":"部署",roomName:"諸室名","asset.name":"品目",vendor:"メーカー","asset.model":"型式",quantity:"数量",unit:"単位",currentConnectionStatus:"現在の接続状況",currentConnectionDestination:"現在の接続先",requestConnectionStatus:"要望機器の接続要望",requestConnectionDestination:"要望機器の接続先",applicationReason:"申請理由・コメント等",executionYear:"執行年度",rfqNo:"見積依頼No.",rfqGroupName:"グループ名称"},w={applicationType:{type:"select",options:["新規申請","増設申請","更新申請","移動申請","廃棄申請","保留"]},currentConnectionStatus:{type:"select",options:["接続あり","接続なし","スタンドアロン"]},requestConnectionStatus:{type:"select",options:["接続希望","接続不要","スタンドアロン"]}},C=({show:e,fieldKey:o,currentValue:n,selectedCount:l,onClose:r,onSubmit:d})=>{let[s,a]=(0,i.useState)(n);if((0,i.useEffect)(()=>{a(n)},[n,o]),!e)return null;let p=k[o]||o,c=w[o]||{type:"text"};return(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:r,children:(0,t.jsxs)("div",{style:{background:"white",borderRadius:"8px",padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h2",{style:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"bold",color:"#2c3e50"},children:"一括編集"}),(0,t.jsx)("div",{style:{marginBottom:"20px",padding:"12px",background:"#e8f4fd",borderRadius:"4px"},children:(0,t.jsxs)("p",{style:{margin:0,fontSize:"14px",color:"#2980b9"},children:[(0,t.jsxs)("strong",{children:[l,"件"]}),"の申請を一括で更新します"]})}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"14px",color:"#2c3e50"},children:p}),"select"===c.type?(0,t.jsxs)("select",{value:s,onChange:e=>a(e.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",outline:"none"},children:[(0,t.jsx)("option",{value:"",children:"-"}),c.options?.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}):(0,t.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),placeholder:`${p}を入力`,style:{width:"100%",padding:"10px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",outline:"none",boxSizing:"border-box"},autoFocus:!0})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[(0,t.jsx)("button",{onClick:r,style:{padding:"10px 20px",background:"#95a5a6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"キャンセル"}),(0,t.jsxs)("button",{onClick:()=>{d(s),r()},style:{padding:"10px 20px",background:"#3498db",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:[l,"件を更新"]})]})]})})},z={新規申請:{background:"#e8f5e9",color:"#2e7d32"},増設申請:{background:"#e3f2fd",color:"#1565c0"},更新申請:{background:"#fff3e0",color:"#e65100"},移動申請:{background:"#f3e5f5",color:"#6a1b9a"},廃棄申請:{background:"#ffebee",color:"#c62828"},保留:{background:"#f5f5f5",color:"#555"}},R={width:1400,height:900},W={width:1400,height:900},B=["新規申請","更新申請","増設申請"],T=["廃棄申請"],A=["移動申請"];function I(){let e=(0,o.useSearchParams)(),{facilities:c,assets:x}=(0,n.useMasterStore)(),{applications:g,updateApplication:f,deleteApplication:h}=(0,l.useApplicationStore)(),{generateRfqNo:y,addRfqGroup:j}=(0,r.useRfqGroupStore)(),{isMobile:k}=(0,s.useResponsive)(),w=e.get("facility")||"",I=e.get("department")||"",N=w&&I?`リモデル申請一覧 - ${w} ${I}`:"リモデル申請一覧",[E,M]=(0,i.useState)({building:"",floor:"",department:"",section:"",category:"",largeClass:"",mediumClass:"",applicationType:""}),[q,D]=(0,i.useState)(new Set),[K,$]=(0,i.useState)(!1),[L,F]=(0,i.useState)(""),[P,O]=(0,i.useState)("create"),[G,H]=(0,i.useState)(""),[Q,Y]=(0,i.useState)(null),[V,U]=(0,i.useState)(!1),[J,X]=(0,i.useState)(null),[Z,_]=(0,i.useState)(!1),[ee,et]=(0,i.useState)(null),[ei,eo]=(0,i.useState)(!1),[en,el]=(0,i.useState)(null),[er,ed]=(0,i.useState)(1),[es,ea]=(0,i.useState)(!1),[ep,ec]=(0,i.useState)(""),[ex,eu]=(0,i.useState)(""),eg=(0,i.useMemo)(()=>({building:Array.from(new Set(c.map(e=>e.building))).filter(Boolean),floor:Array.from(new Set(c.map(e=>e.floor))).filter(Boolean),department:Array.from(new Set(c.map(e=>e.department))).filter(Boolean),section:Array.from(new Set(c.map(e=>e.section))).filter(Boolean),category:Array.from(new Set(x.map(e=>e.category))).filter(Boolean),largeClass:Array.from(new Set(x.map(e=>e.largeClass))).filter(Boolean),mediumClass:Array.from(new Set(x.map(e=>e.mediumClass))).filter(Boolean)}),[c,x]),ef=(0,i.useMemo)(()=>g.filter(e=>(!E.building||e.facility.building===E.building)&&(!E.floor||e.facility.floor===E.floor)&&(!E.department||e.facility.department===E.department)&&(!E.section||e.facility.section===E.section)&&(!E.applicationType||e.applicationType===E.applicationType)),[g,E]),eh=e=>{(0===q.size&&e&&D(new Set([e])),0!==q.size||e)?(O("create"),H(""),Y(null),$(!0),F("")):alert("見積依頼グループに追加する申請を選択してください")},eb=(e,t,i)=>{let o=(window.screen.width-i.width)/2,n=(window.screen.height-i.height)/2,l=`/medical-device-mgmt${e}`;window.open(l,t,`width=${i.width},height=${i.height},left=${o},top=${n},resizable=yes,scrollbars=yes`)},ey=["quotationAmount","estimatedAmount"],em=(e,t,i)=>{let o={};if(t.startsWith("facility.")){let n=t.split(".")[1],l=g.find(t=>t.id===e);l&&(o.facility={...l.facility,[n]:i})}else if(t.startsWith("asset.")){let n=t.split(".")[1],l=g.find(t=>t.id===e);l&&(o.asset={...l.asset,[n]:i})}else if(ey.includes(t)){let e=i?parseInt(i.replace(/[,¥]/g,""),10):void 0;o[t]=e}else o[t]=i;f(e,o)},ej=(e,t)=>{ec(e),eu(t),ea(!0)};return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",style:{background:"white"},children:[(0,t.jsxs)(a.Header,{title:N,resultCount:ef.length,showOriginalLabel:!1,showBackButton:!0,backHref:"/main",backLabel:"メイン画面に戻る",hideMenu:!0,children:[(0,t.jsx)("button",{style:{padding:"8px 16px",background:"#16a085",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",whiteSpace:"nowrap"},onClick:()=>eb("/ship-asset-master","ShipAssetMasterWindow",R),onMouseEnter:e=>{e.currentTarget.style.background="#138d75"},onMouseLeave:e=>{e.currentTarget.style.background="#16a085"},children:"資産マスタを別ウィンドウで開く"}),(0,t.jsx)("button",{style:{padding:"8px 16px",background:"#8e44ad",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",whiteSpace:"nowrap"},onClick:()=>eb("/quotation-data-box","QuotationManagementWindow",W),onMouseEnter:e=>{e.currentTarget.style.background="#7d3c98"},onMouseLeave:e=>{e.currentTarget.style.background="#8e44ad"},children:"見積管理を別ウィンドウで開く"})]}),(0,t.jsx)("div",{style:{background:"#f8f9fa",padding:"15px 20px",borderBottom:"1px solid #dee2e6"},children:(0,t.jsx)("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap"},children:[{label:"棟",key:"building",options:eg.building},{label:"階",key:"floor",options:eg.floor},{label:"部門",key:"department",options:eg.department},{label:"部署",key:"section",options:eg.section},{label:"Category",key:"category",options:eg.category},{label:"大分類",key:"largeClass",options:eg.largeClass},{label:"中分類",key:"mediumClass",options:eg.mediumClass}].map(({label:e,key:i,options:o})=>(0,t.jsx)("div",{style:{flex:"1",minWidth:"120px"},children:(0,t.jsx)(d.SearchableSelect,{label:e,value:E[i],onChange:e=>M(t=>({...t,[i]:e})),options:["",...o],placeholder:"すべて",isMobile:k})},i))})}),(0,t.jsx)(u,{selectedCount:q.size,currentFilter:E.applicationType,onFilterChange:e=>{M(t=>({...t,applicationType:t.applicationType===e?"":e}))},onClearFilter:()=>M(e=>({...e,applicationType:""}))}),(0,t.jsxs)("div",{style:{flex:1,overflow:"auto",padding:"20px"},children:[(0,t.jsx)("div",{style:{overflowX:"auto",position:"relative"},children:(0,t.jsxs)("table",{style:{borderCollapse:"collapse",fontSize:"13px",minWidth:"2860px"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"center",fontWeight:"bold",color:"#2c3e50",width:"50px",position:"sticky",left:0,background:"#f8f9fa",boxShadow:"2px 0 5px rgba(0,0,0,0.1)",zIndex:10},children:(0,t.jsx)("input",{type:"checkbox",onChange:e=>{D(e.target.checked?new Set(ef.map(e=>e.id)):new Set)}})}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"120px"},children:"申請番号"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"100px"},children:"申請日"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"120px"},children:"申請種別"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"100px"},children:"棟"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"80px"},children:"階"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"120px"},children:"部門"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"120px"},children:"部署"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"150px"},children:"諸室名"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"200px"},children:"品目"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"150px"},children:"メーカー"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"150px"},children:"型式"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"80px"},children:"数量"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"80px"},children:"単位"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"120px"},children:"現在の接続状況"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"150px"},children:"現在の接続先"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"140px"},children:"要望機器の接続要望"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"150px"},children:"要望機器の接続先"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"200px"},children:"申請理由・コメント等"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"100px"},children:"執行年度"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"120px"},children:"見積依頼No."}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"150px"},children:"グループ名称"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"150px"},children:"見積業者"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"right",fontWeight:"bold",color:"#2c3e50",width:"120px"},children:"見積金額"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"right",fontWeight:"bold",color:"#2c3e50",width:"120px"},children:"概算金額"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"150px"},children:"編集カラム"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"left",fontWeight:"bold",color:"#2c3e50",width:"150px"},children:"編集カラム"}),(0,t.jsx)("th",{style:{padding:"12px 8px",textAlign:"center",fontWeight:"bold",color:"#2c3e50",width:"180px",position:"sticky",right:0,background:"#f8f9fa",boxShadow:"-2px 0 5px rgba(0,0,0,0.1)",zIndex:10},children:"操作"})]})}),(0,t.jsx)("tbody",{children:ef.map(e=>{let i=q.has(e.id);return z[e.applicationType],(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #dee2e6",background:i?"#e3f2fd":"white"},children:[(0,t.jsx)("td",{style:{padding:"12px 8px",textAlign:"center",position:"sticky",left:0,background:i?"#e3f2fd":"white",boxShadow:"2px 0 5px rgba(0,0,0,0.1)",zIndex:5},children:(0,t.jsx)("input",{type:"checkbox",checked:i,onChange:()=>{var t;let i;return t=e.id,void((i=new Set(q)).has(t)?i.delete(t):i.add(t),D(i))}})}),(0,t.jsx)(v,{value:e.applicationNo,fieldKey:"applicationNo",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej,style:{fontFamily:"monospace",fontWeight:600}}),(0,t.jsx)(v,{value:e.applicationDate,fieldKey:"applicationDate",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.applicationType,fieldKey:"applicationType",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej,type:"select",options:["新規申請","増設申請","更新申請","移動申請","廃棄申請","保留"]}),(0,t.jsx)(v,{value:e.facility.building,fieldKey:"facility.building",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.facility.floor,fieldKey:"facility.floor",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.facility.department,fieldKey:"facility.department",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.facility.section,fieldKey:"facility.section",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.roomName||"",fieldKey:"roomName",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.asset.name,fieldKey:"asset.name",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.vendor,fieldKey:"vendor",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.asset.model,fieldKey:"asset.model",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.quantity||"",fieldKey:"quantity",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.unit||"",fieldKey:"unit",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.currentConnectionStatus||"",fieldKey:"currentConnectionStatus",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej,type:"select",options:["接続あり","接続なし","スタンドアロン"]}),(0,t.jsx)(v,{value:e.currentConnectionDestination||"",fieldKey:"currentConnectionDestination",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.requestConnectionStatus||"",fieldKey:"requestConnectionStatus",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej,type:"select",options:["接続希望","接続不要","スタンドアロン"]}),(0,t.jsx)(v,{value:e.requestConnectionDestination||"",fieldKey:"requestConnectionDestination",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.applicationReason||"",fieldKey:"applicationReason",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.executionYear,fieldKey:"executionYear",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)("td",{style:{padding:"12px 8px",fontFamily:"monospace",cursor:"pointer",background:e.rfqNo?void 0:"#fffbf0"},onDoubleClick:()=>{if(e.rfqNo)e.rfqNo&&(O("edit"),H(e.rfqNo),Y(e.id),F(e.rfqGroupName||""),$(!0));else q.size>0&&i?eh():eh(e.id)},title:e.rfqNo?"ダブルクリックで編集":"ダブルクリックで見積依頼No.を発行",children:e.rfqNo||(0,t.jsx)("span",{style:{color:"#bdc3c7",fontSize:"12px"},children:"未発行"})}),(0,t.jsx)("td",{style:{padding:"12px 8px"},children:e.rfqGroupName||(0,t.jsx)("span",{style:{color:"#bdc3c7",fontSize:"12px"},children:"-"})}),(0,t.jsx)(v,{value:e.quotationVendor||"",fieldKey:"quotationVendor",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.quotationAmount?.toString()||"",fieldKey:"quotationAmount",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej,style:{textAlign:"right",fontWeight:600}}),(0,t.jsx)(v,{value:e.estimatedAmount?.toString()||"",fieldKey:"estimatedAmount",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej,style:{textAlign:"right"}}),(0,t.jsx)(v,{value:e.editColumn1||"",fieldKey:"editColumn1",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)(v,{value:e.editColumn2||"",fieldKey:"editColumn2",applicationId:e.id,isSelected:i,selectedCount:q.size,onSave:em,onBulkEdit:ej}),(0,t.jsx)("td",{style:{padding:"12px 8px",textAlign:"center",position:"sticky",right:0,background:i?"#e3f2fd":"white",boxShadow:"-2px 0 5px rgba(0,0,0,0.1)",zIndex:5},onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{style:{display:"flex",gap:"6px",justifyContent:"center",flexWrap:"wrap"},children:[B.includes(e.applicationType)&&(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),X(e),U(!0)},style:{padding:"6px 12px",background:e.originalRegistration?"#27ae60":"#f39c12",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},onMouseEnter:t=>{t.currentTarget.style.background=e.originalRegistration?"#219a52":"#d68910"},onMouseLeave:t=>{t.currentTarget.style.background=e.originalRegistration?"#27ae60":"#f39c12"},children:e.originalRegistration?"原本登録済":"原本登録"}),T.includes(e.applicationType)&&(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),et(e),_(!0)},style:{padding:"6px 12px",background:"#e74c3c",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},onMouseEnter:e=>{e.currentTarget.style.background="#c0392b"},onMouseLeave:e=>{e.currentTarget.style.background="#e74c3c"},children:"廃棄執行"}),A.includes(e.applicationType)&&(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),el(e),eo(!0)},style:{padding:"6px 12px",background:"#9b59b6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},onMouseEnter:e=>{e.currentTarget.style.background="#8e44ad"},onMouseLeave:e=>{e.currentTarget.style.background="#9b59b6"},children:"移動執行"}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void(confirm("この申請を削除しますか？")&&(h(t),D(e=>{let i=new Set(e);return i.delete(t),i})))},style:{padding:"6px 12px",background:"#e74c3c",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},onMouseEnter:e=>{e.currentTarget.style.background="#c0392b"},onMouseLeave:e=>{e.currentTarget.style.background="#e74c3c"},children:"削除"})]})})]},e.id)})})]})}),0===ef.length&&(0,t.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#7f8c8d",fontSize:"16px"},children:"申請データがありません"})]}),(0,t.jsx)(p,{show:K,onClose:()=>$(!1),selectedCount:"edit"===P?g.filter(e=>e.rfqNo===G).length:q.size,rfqNo:"edit"===P?G:y(),rfqGroupName:L,onRfqGroupNameChange:F,onSubmit:()=>{if(!L.trim())return void alert("見積依頼グループ名称を入力してください");if("edit"===P)g.forEach(e=>{e.rfqNo===G&&f(e.id,{rfqGroupName:L})}),alert(`見積依頼グループを更新しました
見積依頼No: ${G}
グループ名称: ${L}`);else{let e=y(),t=new Date;j({rfqNo:e,groupName:L,createdDate:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,applicationIds:Array.from(q).map(String),status:"見積依頼"}),q.forEach(t=>{f(t,{rfqNo:e,rfqGroupName:L})}),alert(`見積依頼グループを作成しました
見積依頼No: ${e}
グループ名称: ${L}
登録件数: ${q.size}件`),D(new Set)}$(!1),F(""),H(""),Y(null)},mode:P,onDelete:()=>{!G||confirm(`見積依頼No: ${G} を削除しますか？

紐づいている全ての申請から見積依頼No.とグループ名称が削除されます。`)&&(g.forEach(e=>{e.rfqNo===G&&f(e.id,{rfqNo:void 0,rfqGroupName:void 0})}),alert(`見積依頼グループを削除しました: ${G}`),$(!1),F(""),H(""),Y(null))}}),(0,t.jsx)(C,{show:es,fieldKey:ep,currentValue:ex,selectedCount:q.size,onClose:()=>ea(!1),onSubmit:e=>{q.forEach(t=>{em(t,ep,e)}),alert(`${q.size}件の申請を更新しました`),ea(!1)}}),(0,t.jsx)(b,{show:V,onClose:()=>U(!1),application:J,onSubmit:(e,t)=>{f(e,{originalRegistration:t}),ed(e=>e+1),alert(`原本登録が完了しました
QRコードNo: ${t.qrCodeNo}

申請はクローズされます。`),h(e)},generateQrCodeNo:()=>{let e=new Date,t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),n=String(er).padStart(5,"0");return`QR-${t}${i}${o}-${n}`}}),(0,t.jsx)(m,{show:Z,onClose:()=>_(!1),application:ee,onSubmit:e=>{alert("廃棄執行が完了しました。\n\n申請はクローズされます。"),h(e)}}),(0,t.jsx)(S,{show:ei,onClose:()=>eo(!1),application:en,onSubmit:e=>{alert("移動執行が完了しました。\n\n申請はクローズされます。"),h(e)}})]})}function N(){return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:(0,t.jsx)(I,{})})}e.s(["default",()=>N],39086)}]);