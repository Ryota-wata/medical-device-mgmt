(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82796,e=>{"use strict";var t=e.i(43476),l=e.i(71645),i=e.i(57616),n=e.i(18566),o=e.i(11276);e.i(17363);var s=e.i(89056),r=e.i(26549);function d({isOpen:e,onClose:i,editMenu:n}){let{assets:d}=(0,r.useMasterStore)(),{addMenu:c,updateMenu:p,menus:x}=(0,s.useInspectionStore)(),u=(0,l.useMemo)(()=>[...new Set(d.map(e=>e.largeClass))],[d]),h=(0,l.useMemo)(()=>[...new Set(d.map(e=>e.mediumClass))],[d]),m=(0,l.useMemo)(()=>[...new Set(d.map(e=>e.item))],[d]),g=(0,l.useMemo)(()=>{let e={};return d.forEach(t=>{e[t.mediumClass]||(e[t.mediumClass]=t.largeClass)}),e},[d]),y=(0,l.useMemo)(()=>{let e={};return d.forEach(t=>{e[t.item]||(e[t.item]=t.mediumClass)}),e},[d]),[b,f]=(0,l.useState)({name:"",largeClass:"",mediumClass:"",item:"",menuType:"定期点検",cycleMonths:3,dailyTiming:void 0,inspectionItems:[]}),[j,C]=(0,l.useState)("日常点検"),[v,S]=(0,l.useState)("使用前"),[k,w]=(0,l.useState)({order:1,itemName:"",content:"",inputType:"フリー入力",evaluationType:"合否"}),[I,B]=(0,l.useState)(-1),[z,T]=(0,l.useState)(null);(0,l.useMemo)(()=>x.map(e=>e.name),[x]);let R=e=>{let t=x.find(t=>t.name===e);t&&(T(t.id),f({name:t.name,largeClass:t.largeClass,mediumClass:t.mediumClass,item:t.item,menuType:t.menuType,cycleMonths:t.cycleMonths,dailyTiming:t.dailyTiming,inspectionItems:t.inspectionItems.map(({id:e,...t})=>t)}),C(t.menuType),t.dailyTiming&&S(t.dailyTiming),M())};(0,l.useEffect)(()=>{n?(T(n.id),f({name:n.name,largeClass:n.largeClass,mediumClass:n.mediumClass,item:n.item,menuType:n.menuType,cycleMonths:n.cycleMonths,dailyTiming:n.dailyTiming,inspectionItems:n.inspectionItems.map(({id:e,...t})=>t)}),C(n.menuType),n.dailyTiming&&S(n.dailyTiming)):(T(null),f({name:"",largeClass:"",mediumClass:"",item:"",menuType:"日常点検",cycleMonths:3,dailyTiming:"使用前",inspectionItems:[]}),C("日常点検"),S("使用前"))},[n,e]),(0,l.useEffect)(()=>{if(null===z&&b.item){let e=b.item;"日常点検"===j?e+=` ${v}点検`:e+=` 定期点検 ${b.cycleMonths}ヶ月`,f(t=>({...t,name:e}))}},[b.item,j,b.cycleMonths,v,z]),(0,l.useEffect)(()=>{f(e=>({...e,menuType:j,dailyTiming:"日常点検"===j?v:void 0}))},[j,v]);let M=()=>{w({order:b.inspectionItems.length+1,itemName:"",content:"",inputType:"フリー入力",evaluationType:"合否",unitValue:void 0,unitCustom:void 0,freeValue:void 0}),B(-1)},W=(e,t)=>{let l=[...b.inspectionItems],i="up"===t?e-1:e+1;i<0||i>=l.length||([l[e],l[i]]=[l[i],l[e]],l.forEach((e,t)=>{e.order=t+1}),f(e=>({...e,inspectionItems:l})))};return e?(0,t.jsx)("div",{style:a.overlay,onClick:i,children:(0,t.jsxs)("div",{style:a.modal,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{style:a.header,children:[(0,t.jsxs)("div",{style:a.titleRow,children:[(0,t.jsx)("h2",{style:a.title,children:"点検メニュー"}),(0,t.jsx)("span",{style:null===z?a.modeBadgeNew:a.modeBadgeEdit,children:null===z?"新規作成":"編集"})]}),(0,t.jsx)("button",{style:a.closeButton,onClick:i,"aria-label":"閉じる",children:"×"})]}),(0,t.jsxs)("div",{style:a.content,children:[(0,t.jsxs)("div",{style:a.section,children:[(0,t.jsxs)("div",{style:a.modeSelection,children:[(0,t.jsxs)("label",{style:a.radioLabel,children:[(0,t.jsx)("input",{type:"radio",name:"editMode",checked:null===z,onChange:()=>{T(null),f({name:"",largeClass:"",mediumClass:"",item:"",menuType:"日常点検",cycleMonths:3,dailyTiming:"使用前",inspectionItems:[]}),C("日常点検"),S("使用前"),M()},style:a.radioInput}),(0,t.jsx)("span",{children:"新規作成"})]}),(0,t.jsxs)("label",{style:a.radioLabel,children:[(0,t.jsx)("input",{type:"radio",name:"editMode",checked:null!==z,onChange:()=>{x.length>0&&null===z&&R(x[0].name)},style:a.radioInput,disabled:0===x.length}),(0,t.jsxs)("span",{style:0===x.length?{color:"#bdc3c7"}:{},children:["既存プラン編集 ",0===x.length&&"（プランなし）"]})]})]}),null!==z&&(0,t.jsxs)("div",{style:a.existingPlanSelect,children:[(0,t.jsx)("label",{style:a.label,children:"編集するプランを選択"}),(0,t.jsx)("select",{style:a.selectFull,value:b.name,onChange:e=>R(e.target.value),children:x.map(e=>(0,t.jsx)("option",{value:e.name,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{style:a.section,children:[(0,t.jsx)("div",{style:a.topRow,children:(0,t.jsxs)("div",{style:a.targetSection,children:[(0,t.jsxs)("div",{style:a.targetField,children:[(0,t.jsx)("label",{style:a.label,children:"大分類"}),(0,t.jsx)(o.SearchableSelect,{value:b.largeClass,onChange:e=>f(t=>({...t,largeClass:e})),options:u,placeholder:"選択"})]}),(0,t.jsxs)("div",{style:a.targetField,children:[(0,t.jsx)("label",{style:a.label,children:"中分類"}),(0,t.jsx)(o.SearchableSelect,{value:b.mediumClass,onChange:e=>{let t=g[e]||"";f(l=>({...l,mediumClass:e,largeClass:t}))},options:h,placeholder:"選択"})]}),(0,t.jsxs)("div",{style:a.targetField,children:[(0,t.jsx)("label",{style:a.label,children:"品目"}),(0,t.jsx)(o.SearchableSelect,{value:b.item,onChange:e=>{let t=y[e]||"",l=g[t]||"";f(i=>({...i,item:e,mediumClass:t,largeClass:l}))},options:m,placeholder:"選択"})]})]})}),(0,t.jsx)("p",{style:a.hintSmall,children:"点検項目を作成、編集する医療機器を選択してください（点検対象の医療機器のみ選択が可能です）"})]}),(0,t.jsx)("div",{style:a.section,children:(0,t.jsxs)("div",{style:a.planRow,children:[(0,t.jsxs)("div",{style:a.planNameSection,children:[(0,t.jsx)("label",{style:a.label,children:"点検プラン名称"}),(0,t.jsx)("input",{type:"text",style:a.input,value:b.name,onChange:e=>f(t=>({...t,name:e.target.value})),placeholder:null===z?"品目選択で自動生成":"",readOnly:null!==z}),null===z&&(0,t.jsx)("p",{style:a.hintSmall,children:"品目を選択するとプラン名が自動生成されます"})]}),(0,t.jsxs)("div",{style:a.typeTabSection,children:[(0,t.jsx)("label",{style:a.label,children:"点検区分設定"}),(0,t.jsxs)("div",{style:a.radioGroup,children:[(0,t.jsxs)("label",{style:a.radioLabel,children:[(0,t.jsx)("input",{type:"radio",name:"menuType",value:"定期点検",checked:"定期点検"===j,onChange:()=>C("定期点検"),style:a.radioInput}),(0,t.jsx)("span",{children:"定期点検"})]}),"定期点検"===j&&(0,t.jsxs)("div",{style:a.cycleInputInline,children:[(0,t.jsx)("input",{type:"number",style:a.cycleNumberSmall,value:b.cycleMonths||"",onChange:e=>f(t=>({...t,cycleMonths:parseInt(e.target.value)||1})),min:1}),(0,t.jsx)("span",{style:a.cycleUnitSmall,children:"ヶ月ごと"})]}),(0,t.jsxs)("label",{style:a.radioLabel,children:[(0,t.jsx)("input",{type:"radio",name:"menuType",value:"日常点検",checked:"日常点検"===j,onChange:()=>C("日常点検"),style:a.radioInput}),(0,t.jsx)("span",{children:"日常点検"})]})]}),"日常点検"===j&&(0,t.jsxs)("div",{style:a.timingGroup,children:[(0,t.jsxs)("label",{style:a.radioLabel,children:[(0,t.jsx)("input",{type:"radio",name:"dailyTiming",value:"使用前",checked:"使用前"===v,onChange:()=>S("使用前"),style:a.radioInput}),(0,t.jsx)("span",{children:"使用前"})]}),(0,t.jsxs)("label",{style:a.radioLabel,children:[(0,t.jsx)("input",{type:"radio",name:"dailyTiming",value:"使用中",checked:"使用中"===v,onChange:()=>S("使用中"),style:a.radioInput}),(0,t.jsx)("span",{children:"使用中"})]}),(0,t.jsxs)("label",{style:a.radioLabel,children:[(0,t.jsx)("input",{type:"radio",name:"dailyTiming",value:"使用後",checked:"使用後"===v,onChange:()=>S("使用後"),style:a.radioInput}),(0,t.jsx)("span",{children:"使用後"})]})]})]})]})}),(0,t.jsxs)("div",{style:{...a.section,...I>=0?{border:"2px solid #3498db",backgroundColor:"#f8fbff"}:{}},children:[(0,t.jsx)("h3",{style:a.sectionTitle,children:I>=0?`点検項目の編集（${I+1}行目）`:"新たな点検項目"}),(0,t.jsxs)("div",{style:a.newItemRow,children:[(0,t.jsxs)("div",{style:a.newItemField,children:[(0,t.jsx)("label",{style:a.labelSmall,children:"項目"}),(0,t.jsx)("input",{type:"text",style:a.inputSmall,value:k.itemName,onChange:e=>w(t=>({...t,itemName:e.target.value})),placeholder:"選択orフリー入力"})]}),(0,t.jsxs)("div",{style:a.newItemField,children:[(0,t.jsx)("label",{style:a.labelSmall,children:"点検内容"}),(0,t.jsx)("input",{type:"text",style:a.inputSmall,value:k.content,onChange:e=>w(t=>({...t,content:e.target.value})),placeholder:"フリー入力"})]}),(0,t.jsxs)("div",{style:a.evaluationSection,children:[(0,t.jsx)("label",{style:a.labelSmall,children:"評価"}),(0,t.jsxs)("div",{style:a.evaluationInputs,children:[(0,t.jsxs)("select",{style:a.evalSelect,value:k.evaluationType,onChange:e=>w(t=>({...t,evaluationType:e.target.value,unitValue:void 0,unitCustom:void 0,freeValue:void 0})),children:[(0,t.jsx)("option",{value:"合否",children:"合・否"}),(0,t.jsx)("option",{value:"単位",children:"単位"}),(0,t.jsx)("option",{value:"フリー入力",children:"フリー入力"})]}),"単位"===k.evaluationType&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("select",{style:a.evalSelect,value:k.unitValue||"",onChange:e=>w(t=>({...t,unitValue:e.target.value})),children:[(0,t.jsx)("option",{value:"",children:"選択"}),(0,t.jsx)("option",{value:"℃",children:"℃"}),(0,t.jsx)("option",{value:"%",children:"%"}),(0,t.jsx)("option",{value:"個",children:"個"}),(0,t.jsx)("option",{value:"その他",children:"その他"})]}),"その他"===k.unitValue&&(0,t.jsx)("input",{type:"text",style:a.evalInput,value:k.unitCustom||"",onChange:e=>w(t=>({...t,unitCustom:e.target.value})),placeholder:"単位を入力"})]}),"フリー入力"===k.evaluationType&&(0,t.jsx)("input",{type:"text",style:a.evalInput,value:k.freeValue||"",onChange:e=>w(t=>({...t,freeValue:e.target.value})),placeholder:"評価内容を入力"})]})]}),(0,t.jsxs)("div",{style:a.newItemFieldNarrow,children:[(0,t.jsx)("label",{style:a.labelSmall,children:"操作"}),(0,t.jsxs)("div",{style:a.formActions,children:[(0,t.jsx)("button",{style:a.addButton,onClick:()=>{let e;if(!k.itemName||!k.content)return;"単位"===k.evaluationType&&(e="その他"===k.unitValue&&k.unitCustom?k.unitCustom:k.unitValue);let t={order:I>=0?I+1:b.inspectionItems.length+1,itemName:k.itemName,content:k.content,inputType:k.inputType,evaluationType:k.evaluationType,unitValue:"単位"===k.evaluationType?e:void 0,freeValue:"フリー入力"===k.evaluationType?k.freeValue:void 0,selectOptions:"選択"===k.inputType?k.selectOptions:void 0};I>=0?f(e=>({...e,inspectionItems:e.inspectionItems.map((e,l)=>l===I?{...e,...t}:e)})):f(e=>({...e,inspectionItems:[...e.inspectionItems,t]})),M()},children:I>=0?"更新":"登録"}),I>=0&&(0,t.jsx)("button",{style:a.cancelEditButton,onClick:()=>{M()},children:"キャンセル"})]})]})]})]}),(0,t.jsxs)("div",{style:a.section,children:[(0,t.jsx)("h3",{style:a.sectionTitle,children:"点検項目の編集"}),(0,t.jsxs)("table",{style:a.table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:a.th,children:"項目"}),(0,t.jsx)("th",{style:a.th,children:"点検内容"}),(0,t.jsx)("th",{style:a.th,children:"評価"}),(0,t.jsx)("th",{style:a.th,children:"操作"})]})}),(0,t.jsx)("tbody",{children:0===b.inspectionItems.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,style:{...a.td,textAlign:"center",color:"#7f8c8d",padding:"20px"},children:"点検項目がありません"})}):b.inspectionItems.map((e,l)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:a.td,children:e.itemName}),(0,t.jsx)("td",{style:a.td,children:e.content}),(0,t.jsx)("td",{style:a.td,children:"合否"===e.evaluationType?"合・否":"単位"===e.evaluationType?`単位: ${e.unitValue||"-"}`:e.freeValue||"フリー"}),(0,t.jsx)("td",{style:a.td,children:(0,t.jsxs)("div",{style:a.actionButtons,children:[(0,t.jsx)("button",{style:{...a.editButton,...I===l?{backgroundColor:"#2980b9"}:{}},onClick:()=>{let e;w({order:(e=b.inspectionItems[l]).order,itemName:e.itemName,content:e.content,inputType:e.inputType,evaluationType:e.evaluationType,unitValue:e.unitValue,unitCustom:void 0,freeValue:e.freeValue}),B(l)},"aria-label":"編集",children:I===l?"編集中":"編集"}),(0,t.jsxs)("div",{style:a.orderButtons,children:[(0,t.jsx)("button",{style:a.orderButton,onClick:()=>W(l,"up"),disabled:0===l,"aria-label":"上へ",children:"▲"}),(0,t.jsx)("button",{style:a.orderButton,onClick:()=>W(l,"down"),disabled:l===b.inspectionItems.length-1,"aria-label":"下へ",children:"▼"})]}),(0,t.jsx)("button",{style:a.deleteButton,onClick:()=>{f(e=>({...e,inspectionItems:e.inspectionItems.filter((e,t)=>t!==l).map((e,t)=>({...e,order:t+1}))}))},children:"削除"})]})})]},l))})]}),(0,t.jsx)("p",{style:a.hintSmall,children:"※選択項目のみ作成"})]})]}),(0,t.jsxs)("div",{style:a.footer,children:[(0,t.jsx)("button",{style:a.cancelButton,onClick:i,children:"キャンセル"}),(0,t.jsx)("button",{style:a.submitButton,onClick:()=>{if(!b.largeClass||!b.mediumClass||!b.item)return void alert("対象機器を選択してください");if(0===b.inspectionItems.length)return void alert("点検項目を1つ以上追加してください");let e=z?x.find(e=>e.id===z):null;e?p(e.id,{...b,inspectionItems:b.inspectionItems.map((t,l)=>({...t,id:e.inspectionItems[l]?.id||`ITEM_${Date.now()}_${l}`}))}):c(b),i()},children:null===z?"点検メニューを登録":"点検メニューを更新"})]})]})}):null}let a={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modal:{backgroundColor:"#e8e8e8",borderRadius:"8px",width:"95%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",borderBottom:"1px solid #ccc"},titleRow:{display:"flex",alignItems:"center",gap:"12px"},title:{margin:0,fontSize:"16px",fontWeight:600,color:"#2c3e50"},modeBadgeNew:{backgroundColor:"#27ae60",color:"white",padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:500},modeBadgeEdit:{backgroundColor:"#3498db",color:"white",padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:500},closeButton:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666",padding:"4px 8px"},content:{flex:1,overflowY:"auto",padding:"16px 20px"},topRow:{display:"flex",gap:"24px",alignItems:"flex-end",marginBottom:"8px"},targetSection:{display:"flex",gap:"12px",flex:1},targetField:{flex:1,minWidth:"120px"},hintSmall:{fontSize:"11px",color:"#7f8c8d",margin:"4px 0 0 0"},planRow:{display:"flex",gap:"24px",marginBottom:"16px"},planNameSection:{flex:2,minWidth:"300px"},input:{flex:1,minWidth:"280px",padding:"8px 12px",border:"1px solid #d0d0d0",borderRadius:"4px",fontSize:"14px"},modeSelection:{display:"flex",gap:"24px",marginBottom:"16px",padding:"12px 16px",backgroundColor:"#f8f9fa",borderRadius:"6px",border:"1px solid #e0e0e0"},existingPlanSelect:{marginTop:"12px",maxWidth:"400px"},selectFull:{width:"100%",padding:"8px 12px",border:"1px solid #d0d0d0",borderRadius:"4px",fontSize:"14px",backgroundColor:"white"},typeTabSection:{display:"flex",flexDirection:"column"},radioGroup:{display:"flex",gap:"16px",marginBottom:"8px"},radioLabel:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#2c3e50",cursor:"pointer"},radioInput:{width:"16px",height:"16px",cursor:"pointer",accentColor:"#3498db"},cycleInputInline:{display:"flex",alignItems:"center",gap:"4px",marginLeft:"8px",paddingLeft:"8px",borderLeft:"1px solid #e0e0e0"},cycleNumberSmall:{width:"50px",padding:"4px 8px",border:"1px solid #d0d0d0",borderRadius:"4px",fontSize:"13px",textAlign:"center"},cycleUnitSmall:{fontSize:"13px",color:"#2c3e50"},timingGroup:{display:"flex",gap:"16px",marginLeft:"24px",paddingLeft:"16px",borderLeft:"2px solid #e0e0e0"},label:{display:"block",fontSize:"12px",fontWeight:500,color:"#2c3e50",marginBottom:"4px"},labelSmall:{display:"block",fontSize:"11px",fontWeight:500,color:"#2c3e50",marginBottom:"4px"},section:{backgroundColor:"white",borderRadius:"6px",padding:"12px 16px",marginBottom:"12px"},sectionTitle:{margin:"0 0 12px 0",fontSize:"13px",fontWeight:600,color:"#2c3e50",paddingBottom:"8px",borderBottom:"1px solid #e0e0e0"},newItemRow:{display:"flex",gap:"12px",alignItems:"flex-end"},newItemField:{flex:1},newItemFieldNarrow:{width:"120px"},evaluationSection:{flex:1,minWidth:"200px"},evaluationInputs:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},evalSelect:{padding:"6px 10px",border:"1px solid #d0d0d0",borderRadius:"4px",fontSize:"13px",backgroundColor:"white",minWidth:"80px"},evalInput:{padding:"6px 10px",border:"1px solid #d0d0d0",borderRadius:"4px",fontSize:"13px",width:"100px"},inputSmall:{width:"100%",padding:"6px 10px",border:"1px solid #d0d0d0",borderRadius:"4px",fontSize:"13px",boxSizing:"border-box"},addButton:{backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",cursor:"pointer",whiteSpace:"nowrap"},formActions:{display:"flex",gap:"6px"},cancelEditButton:{backgroundColor:"#95a5a6",color:"white",border:"none",borderRadius:"4px",padding:"6px 10px",fontSize:"12px",cursor:"pointer",whiteSpace:"nowrap"},table:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},th:{backgroundColor:"#f8f9fa",padding:"8px 10px",textAlign:"left",fontWeight:500,color:"#2c3e50",borderBottom:"1px solid #e0e0e0"},td:{padding:"8px 10px",borderBottom:"1px solid #e0e0e0",verticalAlign:"middle"},actionButtons:{display:"flex",alignItems:"center",gap:"8px"},orderButtons:{display:"flex",gap:"2px"},orderButton:{padding:"2px 6px",border:"1px solid #bdc3c7",borderRadius:"3px",backgroundColor:"white",fontSize:"10px",cursor:"pointer"},editButton:{backgroundColor:"#3498db",color:"white",border:"none",borderRadius:"4px",padding:"4px 10px",fontSize:"12px",cursor:"pointer"},deleteButton:{backgroundColor:"#e74c3c",color:"white",border:"none",borderRadius:"4px",padding:"4px 10px",fontSize:"12px",cursor:"pointer"},footer:{display:"flex",justifyContent:"flex-end",gap:"12px",padding:"12px 20px",borderTop:"1px solid #ccc",backgroundColor:"#f0f0f0",borderRadius:"0 0 8px 8px"},cancelButton:{backgroundColor:"#95a5a6",color:"white",border:"none",borderRadius:"4px",padding:"8px 20px",fontSize:"13px",cursor:"pointer"},submitButton:{backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"4px",padding:"8px 20px",fontSize:"13px",cursor:"pointer"}};var c=e.i(50140);function p({isOpen:e,onClose:i}){let{assets:n}=(0,c.useAssetStore)(),{menus:r,addTask:d,tasks:a}=(0,s.useInspectionStore)(),[p,u]=(0,l.useState)("search"),[h,m]=(0,l.useState)({building:"",floor:"",department:"",section:"",category:"",largeClass:"",mediumClass:""}),[g,y]=(0,l.useState)([]),[b,f]=(0,l.useState)(!1),[j,C]=(0,l.useState)(new Set),[v,S]=(0,l.useState)([]),[k,w]=(0,l.useState)({periodic:!1,daily:!1,spot:!1}),[I,B]=(0,l.useState)(""),[z,T]=(0,l.useState)({before:"",during:"",after:""}),[R,M]=(0,l.useState)(!1),[W,L]=(0,l.useState)(""),A=(0,l.useMemo)(()=>new Set(a.map(e=>e.assetId)),[a]),N=(0,l.useMemo)(()=>Array.from(new Set(n.map(e=>e.building))).filter(Boolean),[n]),D=(0,l.useMemo)(()=>{let e=n;return h.building&&(e=e.filter(e=>e.building===h.building)),Array.from(new Set(e.map(e=>e.floor))).filter(Boolean)},[n,h.building]),F=(0,l.useMemo)(()=>{let e=n;return h.building&&(e=e.filter(e=>e.building===h.building)),h.floor&&(e=e.filter(e=>e.floor===h.floor)),Array.from(new Set(e.map(e=>e.department))).filter(Boolean)},[n,h.building,h.floor]),V=(0,l.useMemo)(()=>{let e=n;return h.building&&(e=e.filter(e=>e.building===h.building)),h.floor&&(e=e.filter(e=>e.floor===h.floor)),h.department&&(e=e.filter(e=>e.department===h.department)),Array.from(new Set(e.map(e=>e.section))).filter(Boolean)},[n,h.building,h.floor,h.department]),G=(0,l.useMemo)(()=>Array.from(new Set(n.map(e=>e.category))).filter(Boolean),[n]),H=(0,l.useMemo)(()=>{let e=n;return h.category&&(e=e.filter(e=>e.category===h.category)),Array.from(new Set(e.map(e=>e.largeClass))).filter(Boolean)},[n,h.category]),q=(0,l.useMemo)(()=>{let e=n;return h.category&&(e=e.filter(e=>e.category===h.category)),h.largeClass&&(e=e.filter(e=>e.largeClass===h.largeClass)),Array.from(new Set(e.map(e=>e.mediumClass))).filter(Boolean)},[n,h.category,h.largeClass]),E=(0,l.useMemo)(()=>{if(0===v.length)return{periodic:[],daily:[]};let e=v[0],t=r.filter(t=>t.largeClass===e.largeClass&&t.mediumClass===e.mediumClass);return{periodic:t.filter(e=>"定期点検"===e.menuType),daily:t.filter(e=>"日常点検"===e.menuType)}},[v,r]),O=e=>{let t=new Set(j);t.has(e)?t.delete(e):t.add(e),C(t)},P=()=>{u("search"),m({building:"",floor:"",department:"",section:"",category:"",largeClass:"",mediumClass:""}),y([]),f(!1),C(new Set),S([]),w({periodic:!1,daily:!1,spot:!1}),B(""),T({before:"",during:"",after:""}),M(!1),L(""),i()};return e?(0,t.jsx)("div",{style:x.overlay,onClick:P,children:(0,t.jsxs)("div",{style:x.modal,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{style:x.header,children:[(0,t.jsx)("h3",{style:x.title,children:"search"===p?"点検管理 登録 - 対象資産を選択":"点検管理 登録 - 点検設定"}),(0,t.jsx)("button",{style:x.closeButton,onClick:P,"aria-label":"閉じる",children:"×"})]}),"search"===p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:{padding:"16px 20px",borderBottom:"1px solid #eee",backgroundColor:"#f8f9fa"},children:[(0,t.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",marginBottom:"12px",alignItems:"flex-end"},children:[(0,t.jsxs)("div",{style:{width:"120px"},children:[(0,t.jsx)("label",{style:{fontSize:"11px",color:"#555",display:"block",marginBottom:"4px"},children:"棟"}),(0,t.jsx)(o.SearchableSelect,{value:h.building,onChange:e=>{m(t=>({...t,building:e,floor:"",department:"",section:""}))},options:N,placeholder:"すべて",dropdownMinWidth:"120px"})]}),(0,t.jsxs)("div",{style:{width:"100px"},children:[(0,t.jsx)("label",{style:{fontSize:"11px",color:"#555",display:"block",marginBottom:"4px"},children:"階"}),(0,t.jsx)(o.SearchableSelect,{value:h.floor,onChange:e=>{m(t=>({...t,floor:e,department:"",section:""}))},options:D,placeholder:"すべて",dropdownMinWidth:"100px"})]}),(0,t.jsxs)("div",{style:{width:"120px"},children:[(0,t.jsx)("label",{style:{fontSize:"11px",color:"#555",display:"block",marginBottom:"4px"},children:"部門"}),(0,t.jsx)(o.SearchableSelect,{value:h.department,onChange:e=>{m(t=>({...t,department:e,section:""}))},options:F,placeholder:"すべて",dropdownMinWidth:"140px"})]}),(0,t.jsxs)("div",{style:{width:"120px"},children:[(0,t.jsx)("label",{style:{fontSize:"11px",color:"#555",display:"block",marginBottom:"4px"},children:"部署"}),(0,t.jsx)(o.SearchableSelect,{value:h.section,onChange:e=>m(t=>({...t,section:e})),options:V,placeholder:"すべて",dropdownMinWidth:"140px"})]}),(0,t.jsxs)("div",{style:{width:"120px"},children:[(0,t.jsx)("label",{style:{fontSize:"11px",color:"#555",display:"block",marginBottom:"4px"},children:"Category"}),(0,t.jsx)(o.SearchableSelect,{value:h.category,onChange:e=>{m(t=>({...t,category:e,largeClass:"",mediumClass:""}))},options:G,placeholder:"すべて",dropdownMinWidth:"140px"})]}),(0,t.jsxs)("div",{style:{width:"140px"},children:[(0,t.jsx)("label",{style:{fontSize:"11px",color:"#555",display:"block",marginBottom:"4px"},children:"大分類"}),(0,t.jsx)(o.SearchableSelect,{value:h.largeClass,onChange:e=>{m(t=>({...t,largeClass:e,mediumClass:""}))},options:H,placeholder:"すべて",dropdownMinWidth:"180px"})]}),(0,t.jsxs)("div",{style:{width:"140px"},children:[(0,t.jsx)("label",{style:{fontSize:"11px",color:"#555",display:"block",marginBottom:"4px"},children:"中分類"}),(0,t.jsx)(o.SearchableSelect,{value:h.mediumClass,onChange:e=>m(t=>({...t,mediumClass:e})),options:q,placeholder:"すべて",dropdownMinWidth:"180px"})]})]}),(0,t.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,t.jsx)("button",{onClick:()=>{y(n.filter(e=>!A.has(e.qrCode)&&(!h.building||!!e.building.includes(h.building))&&(!h.floor||!!e.floor.includes(h.floor))&&(!h.department||!!e.department.includes(h.department))&&(!h.section||!!e.section.includes(h.section))&&(!h.category||!!e.category.includes(h.category))&&(!h.largeClass||!!e.largeClass.includes(h.largeClass))&&(!h.mediumClass||!!e.mediumClass.includes(h.mediumClass))&&!0)),C(new Set),f(!0)},style:{padding:"8px 24px",backgroundColor:"#3498db",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"bold"},children:"検索"})})]}),(0,t.jsx)("div",{style:x.resultsSection,children:b?0===g.length?(0,t.jsx)("div",{style:x.emptyMessage,children:"該当する資産がありません"}):(0,t.jsxs)("table",{style:x.table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:x.tableHeaderRow,children:[(0,t.jsx)("th",{style:{...x.th,width:"40px",textAlign:"center"},children:(0,t.jsx)("input",{type:"checkbox",checked:j.size===g.length&&g.length>0,onChange:()=>{j.size===g.length?C(new Set):C(new Set(g.map(e=>e.qrCode)))}})}),(0,t.jsx)("th",{style:x.th,children:"施設名"}),(0,t.jsx)("th",{style:x.th,children:"QRコード"}),(0,t.jsx)("th",{style:x.th,children:"棟"}),(0,t.jsx)("th",{style:x.th,children:"階"}),(0,t.jsx)("th",{style:x.th,children:"部門"}),(0,t.jsx)("th",{style:x.th,children:"品目名"}),(0,t.jsx)("th",{style:x.th,children:"メーカー"}),(0,t.jsx)("th",{style:x.th,children:"型式"})]})}),(0,t.jsx)("tbody",{children:g.map((e,l)=>(0,t.jsxs)("tr",{style:{...x.tableRow,backgroundColor:j.has(e.qrCode)?"#e3f2fd":l%2==0?"white":"#fafafa"},onClick:()=>O(e.qrCode),children:[(0,t.jsx)("td",{style:{...x.td,textAlign:"center"},children:(0,t.jsx)("input",{type:"checkbox",checked:j.has(e.qrCode),onChange:()=>O(e.qrCode),onClick:e=>e.stopPropagation()})}),(0,t.jsx)("td",{style:x.td,children:e.facility}),(0,t.jsx)("td",{style:{...x.td,fontFamily:"monospace",fontVariantNumeric:"tabular-nums"},children:e.qrCode}),(0,t.jsx)("td",{style:x.td,children:e.building}),(0,t.jsx)("td",{style:x.td,children:e.floor}),(0,t.jsx)("td",{style:x.td,children:e.department}),(0,t.jsx)("td",{style:x.td,children:e.name}),(0,t.jsx)("td",{style:x.td,children:e.maker}),(0,t.jsx)("td",{style:x.td,children:e.model})]},e.qrCode))})]}):(0,t.jsx)("div",{style:x.emptyMessage,children:"検索条件を入力して「検索」ボタンをクリックしてください"})}),(0,t.jsxs)("div",{style:x.footer,children:[(0,t.jsx)("div",{style:x.footerLeft,children:g.length>0&&`${j.size}件選択中`}),(0,t.jsxs)("div",{style:x.footerRight,children:[(0,t.jsx)("button",{style:x.cancelButton,onClick:P,children:"キャンセル"}),(0,t.jsxs)("button",{style:{...x.proceedButton,...0===j.size?x.proceedButtonDisabled:{}},onClick:()=>{S(g.filter(e=>j.has(e.qrCode))),u("register")},disabled:0===j.size,children:["選択した資産を点検登録（",j.size,"件）"]})]})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:x.registerContent,children:[(0,t.jsxs)("div",{style:x.section,children:[(0,t.jsxs)("label",{style:x.sectionTitle,children:["選択した資産（",v.length,"件）"]}),(0,t.jsx)("div",{style:x.selectedAssetsBox,children:v.map(e=>(0,t.jsxs)("div",{style:x.selectedAssetItem,children:[(0,t.jsx)("span",{style:x.assetQr,children:e.qrCode}),(0,t.jsx)("span",{style:x.assetName,children:e.name}),(0,t.jsxs)("span",{style:x.assetMeta,children:[e.maker," / ",e.model]})]},e.qrCode))})]}),(0,t.jsxs)("div",{style:x.section,children:[(0,t.jsx)("label",{style:x.sectionTitle,children:"点検種別"}),(0,t.jsxs)("div",{style:x.checkboxGroup,children:[(0,t.jsxs)("label",{style:x.checkboxLabel,children:[(0,t.jsx)("input",{type:"checkbox",checked:k.periodic,onChange:e=>w(t=>({...t,periodic:e.target.checked})),style:x.checkbox}),(0,t.jsx)("span",{children:"院内定期点検"})]}),(0,t.jsxs)("label",{style:x.checkboxLabel,children:[(0,t.jsx)("input",{type:"checkbox",checked:k.daily,onChange:e=>w(t=>({...t,daily:e.target.checked})),style:x.checkbox}),(0,t.jsx)("span",{children:"日常点検"})]}),(0,t.jsxs)("label",{style:x.checkboxLabel,children:[(0,t.jsx)("input",{type:"checkbox",checked:k.spot,onChange:e=>w(t=>({...t,spot:e.target.checked})),style:x.checkbox}),(0,t.jsx)("span",{children:"スポット点検"})]})]})]}),k.periodic&&(0,t.jsxs)("div",{style:x.menuSection,children:[(0,t.jsx)("div",{style:x.menuHeader,children:"院内定期点検メニュー"}),(0,t.jsx)("div",{style:x.menuContent,children:E.periodic.length>0?(0,t.jsxs)("select",{style:x.select,value:I,onChange:e=>B(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"メニューを選択"}),E.periodic.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name,"（",e.cycleMonths,"ヶ月周期）"]},e.id))]}):(0,t.jsx)("p",{style:x.noMenuHint,children:"該当する定期点検メニューがありません。先に点検メニューを作成してください。"})})]}),k.daily&&(0,t.jsxs)("div",{style:x.menuSection,children:[(0,t.jsx)("div",{style:x.menuHeader,children:"日常点検メニュー"}),(0,t.jsx)("div",{style:x.menuContent,children:E.daily.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:x.menuRow,children:[(0,t.jsx)("span",{style:x.menuLabel,children:"使用前"}),(0,t.jsxs)("select",{style:x.selectSmall,value:z.before,onChange:e=>T(t=>({...t,before:e.target.value})),children:[(0,t.jsx)("option",{value:"",children:"-"}),E.daily.filter(e=>"使用前"===e.dailyTiming).map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{style:x.menuRow,children:[(0,t.jsx)("span",{style:x.menuLabel,children:"使用中"}),(0,t.jsxs)("select",{style:x.selectSmall,value:z.during,onChange:e=>T(t=>({...t,during:e.target.value})),children:[(0,t.jsx)("option",{value:"",children:"-"}),E.daily.filter(e=>"使用中"===e.dailyTiming).map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{style:x.menuRow,children:[(0,t.jsx)("span",{style:x.menuLabel,children:"使用後"}),(0,t.jsxs)("select",{style:x.selectSmall,value:z.after,onChange:e=>T(t=>({...t,after:e.target.value})),children:[(0,t.jsx)("option",{value:"",children:"-"}),E.daily.filter(e=>"使用後"===e.dailyTiming).map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}):(0,t.jsx)("p",{style:x.noMenuHint,children:"該当する日常点検メニューがありません。先に点検メニューを作成してください。"})})]}),(0,t.jsxs)("div",{style:x.section,children:[(0,t.jsx)("label",{style:x.sectionTitle,children:"法定点検"}),(0,t.jsxs)("div",{style:x.radioGroup,children:[(0,t.jsxs)("label",{style:x.radioLabel,children:[(0,t.jsx)("input",{type:"radio",name:"legal",checked:R,onChange:()=>M(!0),style:x.radio}),(0,t.jsx)("span",{children:"あり"})]}),(0,t.jsxs)("label",{style:x.radioLabel,children:[(0,t.jsx)("input",{type:"radio",name:"legal",checked:!R,onChange:()=>M(!1),style:x.radio}),(0,t.jsx)("span",{children:"なし"})]})]})]}),(0,t.jsxs)("div",{style:x.section,children:[(0,t.jsxs)("label",{style:x.sectionTitle,children:["点検開始日 ",(0,t.jsx)("span",{style:x.required,children:"*"})]}),(0,t.jsx)("input",{type:"date",style:x.dateInput,value:W,onChange:e=>L(e.target.value)})]})]}),(0,t.jsxs)("div",{style:x.footer,children:[(0,t.jsx)("div",{style:x.footerLeft,children:(0,t.jsx)("button",{style:x.backButton,onClick:()=>{u("search"),w({periodic:!1,daily:!1,spot:!1}),B(""),T({before:"",during:"",after:""}),M(!1),L("")},children:"← 資産選択に戻る"})}),(0,t.jsxs)("div",{style:x.footerRight,children:[(0,t.jsx)("button",{style:x.cancelButton,onClick:P,children:"キャンセル"}),(0,t.jsx)("button",{style:x.submitButton,onClick:()=>{k.periodic||k.daily||k.spot?W?(v.forEach(e=>{d({assetId:e.qrCode,inspectionType:k.spot?"院内スポット点検":"院内定期点検",periodicMenuIds:I?[I]:[],hasDailyInspection:k.daily,dailyMenus:{before:z.before||void 0,during:z.during||void 0,after:z.after||void 0},hasLegalInspection:R,nextInspectionDate:W},{assetId:e.qrCode,assetName:e.name,maker:e.maker,model:e.model,largeClass:e.largeClass,mediumClass:e.mediumClass,managementDepartment:e.department||"",installedDepartment:e.section||"",purchaseDate:""})}),alert(`${v.length}件の資産を点検タスクに登録しました`),P()):alert("点検開始日を入力してください"):alert("点検種別を1つ以上選択してください")},children:"点検タスクに登録"})]})]})]})]})}):null}let x={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modal:{backgroundColor:"white",borderRadius:"8px",width:"1000px",maxHeight:"85vh",display:"flex",flexDirection:"column",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"},header:{padding:"16px 20px",borderBottom:"1px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center"},title:{margin:0,fontSize:"18px",fontWeight:"bold"},closeButton:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666",lineHeight:1},resultsSection:{flex:1,overflow:"auto",padding:0},emptyMessage:{padding:"40px",textAlign:"center",color:"#999"},table:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},tableHeaderRow:{background:"#f8f9fa"},th:{padding:"10px 8px",border:"1px solid #ddd",textAlign:"left",whiteSpace:"nowrap"},tableRow:{cursor:"pointer"},td:{padding:"8px",border:"1px solid #ddd"},footer:{padding:"16px 20px",borderTop:"1px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f8f9fa"},footerLeft:{fontSize:"13px",color:"#666"},footerRight:{display:"flex",gap:"12px"},cancelButton:{padding:"8px 20px",backgroundColor:"#fff",color:"#666",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},proceedButton:{padding:"8px 20px",backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"bold"},proceedButtonDisabled:{backgroundColor:"#ccc",cursor:"not-allowed"},backButton:{padding:"8px 16px",backgroundColor:"transparent",color:"#3498db",border:"1px solid #3498db",borderRadius:"4px",cursor:"pointer",fontSize:"13px"},submitButton:{padding:"8px 24px",backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"bold"},registerContent:{flex:1,overflowY:"auto",padding:"24px"},section:{marginBottom:"20px"},sectionTitle:{display:"block",fontSize:"14px",fontWeight:600,color:"#2c3e50",marginBottom:"8px"},required:{color:"#e74c3c"},selectedAssetsBox:{backgroundColor:"white",border:"1px solid #ddd",borderRadius:"4px",maxHeight:"150px",overflowY:"auto"},selectedAssetItem:{padding:"8px 12px",borderBottom:"1px solid #eee",display:"flex",alignItems:"center",gap:"12px",fontSize:"13px"},assetQr:{color:"#7f8c8d",fontFamily:"monospace",minWidth:"80px"},assetName:{fontWeight:500,color:"#2c3e50",flex:1},assetMeta:{color:"#95a5a6",fontSize:"12px"},checkboxGroup:{display:"flex",gap:"24px",flexWrap:"wrap"},checkboxLabel:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",color:"#2c3e50",cursor:"pointer"},checkbox:{width:"18px",height:"18px",cursor:"pointer",accentColor:"#3498db"},menuSection:{marginBottom:"20px",border:"1px solid #ddd",borderRadius:"6px",overflow:"hidden"},menuHeader:{backgroundColor:"#ecf0f1",padding:"10px 16px",fontSize:"14px",fontWeight:600,color:"#2c3e50",borderBottom:"1px solid #ddd"},menuContent:{padding:"16px",backgroundColor:"white"},menuRow:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},menuLabel:{fontSize:"14px",color:"#2c3e50",minWidth:"60px"},select:{flex:1,padding:"8px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",backgroundColor:"white"},selectSmall:{flex:1,padding:"8px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",backgroundColor:"white",maxWidth:"300px"},noMenuHint:{fontSize:"13px",color:"#e67e22",margin:0},radioGroup:{display:"flex",gap:"24px"},radioLabel:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",color:"#2c3e50",cursor:"pointer"},radio:{width:"18px",height:"18px",cursor:"pointer",accentColor:"#3498db"},dateInput:{padding:"10px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",width:"200px"}},u=[{itemName:"清掃",content:"本体の清掃",result:""},{itemName:"外装点検",content:"ACインレット",result:""},{itemName:"外装点検",content:"スライダー",result:""},{itemName:"性能点検",content:"閉塞圧測定",result:"",unit:"kPa"},{itemName:"性能点検",content:"流量測定",result:"",unit:"ml"}];function h({isOpen:e,mode:i="periodic",task:o,menu:r,asset:d,onClose:a,onComplete:c}){let p=(0,n.useRouter)(),{menus:x}=(0,s.useInspectionStore)(),[h,g]=(0,l.useState)(""),[y,b]=(0,l.useState)("使用前"),[f,j]=(0,l.useState)(""),[C,v]=(0,l.useState)(u),[S,k]=(0,l.useState)(""),w=(0,l.useMemo)(()=>"daily"===i&&d?x.filter(e=>"日常点検"===e.menuType&&e.item===d.item):[],[x,d,i]),I=(0,l.useMemo)(()=>w.filter(e=>e.dailyTiming===y),[w,y]),B=(0,l.useMemo)(()=>"periodic"===i?r:x.find(e=>e.id===f)||null,[i,r,x,f]);(0,l.useEffect)(()=>{B&&B.inspectionItems.length>0?v(B.inspectionItems.map(e=>({itemName:e.itemName,content:e.content,result:"",unit:"単位"===e.evaluationType?e.unitValue:void 0}))):v(u)},[B]),(0,l.useEffect)(()=>{"daily"===i&&j("")},[y,i]);let z=(e,t)=>{v(l=>{let i=[...l];return i[e]={...i[e],result:t},i})},T=e=>{if(!h)return void alert("実施者名を入力してください");if("daily"===i&&!f)return void alert("点検メニューを選択してください");c({taskId:o?.id,assetQrCode:"daily"===i?d?.qrCode:o?.assetId,inspectorName:h,inspectionDate:new Date().toISOString().split("T")[0],inspectionType:"daily"===i?"日常点検":"定期点検",usageTiming:y,menuId:B?.id,menuName:B?.name,itemResults:C,remarks:S,overallResult:e});let t={source:i,taskId:o?.id,qrCode:"daily"===i?d?.qrCode||"":o?.assetId||"",largeClass:"daily"===i?d?.largeClass||"":o?.largeClass||"",mediumClass:"daily"===i?d?.mediumClass||"":o?.mediumClass||"",item:"daily"===i?d?.item||"":o?.assetName||"",maker:"daily"===i?d?.maker||"":o?.maker||"",model:"daily"===i?d?.model||"":o?.model||"",inspectionType:"daily"===i?"日常点検":"定期点検",usageTiming:"daily"===i?y:void 0,menuName:B?.name||o?.assetName+" 定期点検①",inspectorName:h,inspectionDate:new Date().toISOString().split("T")[0],itemResults:C,remarks:S,overallResult:e};sessionStorage.setItem("inspectionResult",JSON.stringify(t)),R(),p.push("/inspection-result")},R=()=>{g(""),b("使用前"),j(""),v(u),k(""),a()};if(!(e&&("periodic"===i?!!o:!!d)))return null;let M="periodic"===i?o?.assetId:d?.qrCode,W="periodic"===i?o?.largeClass:d?.largeClass,L="periodic"===i?o?.mediumClass:d?.mediumClass,A="periodic"===i?o?.assetName:d?.item,N="periodic"===i?o?.maker:d?.maker,D="periodic"===i?o?.model:d?.model,F=new Date().toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/");return(0,t.jsx)("div",{style:m.overlay,onClick:R,children:(0,t.jsxs)("div",{style:m.modal,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{style:m.header,children:[(0,t.jsx)("div",{style:m.title,children:"daily"===i?"日常点検の実施":"点検の実施"}),(0,t.jsxs)("div",{style:m.infoRow,children:[(0,t.jsxs)("div",{style:m.infoItem,children:[(0,t.jsx)("span",{style:m.infoLabel,children:"QRコード"}),(0,t.jsx)("span",{style:{...m.infoValue,fontVariantNumeric:"tabular-nums"},children:M})]}),(0,t.jsxs)("div",{style:m.infoItem,children:[(0,t.jsx)("span",{style:m.infoLabel,children:"実施者名"}),(0,t.jsx)("input",{type:"text",style:m.input,value:h,onChange:e=>g(e.target.value),placeholder:"氏名を入力"})]}),(0,t.jsx)("div",{style:m.dateDisplay,children:F})]}),(0,t.jsxs)("div",{style:m.infoRow,children:[(0,t.jsx)("div",{style:m.infoItem,children:(0,t.jsx)("span",{style:m.infoValue,children:W})}),(0,t.jsx)("div",{style:m.infoItem,children:(0,t.jsx)("span",{style:m.infoValue,children:L})}),(0,t.jsx)("div",{style:m.infoItem,children:(0,t.jsxs)("span",{style:m.infoValue,children:[A,"/",N,"/",D]})})]}),(0,t.jsx)("div",{style:m.infoRow,children:(0,t.jsxs)("div",{style:m.infoItem,children:[(0,t.jsx)("span",{style:m.infoLabel,children:"点検種別"}),(0,t.jsx)("span",{style:{...m.infoValue,color:"#27ae60"},children:"daily"===i?"日常点検":"定期点検"})]})}),"daily"===i&&(0,t.jsxs)("div",{style:m.infoRow,children:[(0,t.jsx)("span",{style:{...m.infoLabel,marginRight:"8px",alignSelf:"center"},children:"点検タイミング"}),(0,t.jsx)("div",{style:m.tabGroup,children:["使用前","使用中","使用後"].map(e=>(0,t.jsxs)("label",{style:y===e?m.tabActive:m.tab,children:[(0,t.jsx)("input",{type:"radio",name:"usageTiming",value:e,checked:y===e,onChange:()=>b(e),style:{display:"none"}}),e]},e))})]}),(0,t.jsx)("div",{style:m.infoRow,children:(0,t.jsxs)("div",{style:{...m.infoItem,flex:1},children:[(0,t.jsx)("span",{style:m.infoLabel,children:"点検メニュー"}),"daily"===i?(0,t.jsxs)("select",{value:f,onChange:e=>j(e.target.value),style:m.select,children:[(0,t.jsx)("option",{value:"",children:"選択してください"}),I.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}):(0,t.jsx)("span",{style:m.infoValue,children:r?.name||o?.assetName+" 定期点検①"})]})}),"daily"===i&&0===I.length&&(0,t.jsxs)("div",{style:m.warning,children:["この品目の「",y,"」点検メニューが登録されていません"]})]}),(0,t.jsxs)("div",{style:m.body,children:[(0,t.jsx)("div",{style:m.notice,children:"点検対象機器、点検メニューにまちがいがないか確認して点検を開始してください"}),(0,t.jsxs)("table",{style:m.table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:m.th,children:"項目"}),(0,t.jsx)("th",{style:m.th,children:"点検内容"}),(0,t.jsx)("th",{style:m.th,children:"評価"})]})}),(0,t.jsx)("tbody",{children:C.map((e,l)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:m.td,children:e.itemName}),(0,t.jsx)("td",{style:m.td,children:e.content}),(0,t.jsx)("td",{style:m.td,children:e.unit?(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,t.jsx)("input",{type:"number",style:m.numericInput,value:e.result,onChange:e=>z(l,e.target.value)}),(0,t.jsx)("span",{style:m.unit,children:e.unit})]}):(0,t.jsxs)("div",{style:m.resultButtonGroup,children:[(0,t.jsx)("button",{style:"合"===e.result?m.resultButtonActive:m.resultButton,onClick:()=>z(l,"合"),children:"合"}),(0,t.jsx)("button",{style:"否"===e.result?m.resultButtonNg:m.resultButton,onClick:()=>z(l,"否"),children:"否"})]})})]},l))})]}),(0,t.jsxs)("div",{style:m.remarksSection,children:[(0,t.jsx)("div",{style:m.remarksLabel,children:"備考（交換部品等）"}),(0,t.jsx)("input",{type:"text",style:m.remarksInput,value:S,onChange:e=>k(e.target.value),placeholder:"備考を入力"})]})]}),(0,t.jsxs)("div",{style:m.footer,children:[(0,t.jsx)("div",{style:m.footerLabel,children:"総合評価"}),(0,t.jsxs)("div",{style:m.footerButtons,children:[(0,t.jsx)("button",{style:m.passButton,onClick:()=>T("合格"),children:"合格（異常なし）"}),(0,t.jsx)("button",{style:m.reinspectButton,onClick:()=>T("再点検"),children:"再点検"}),(0,t.jsx)("button",{style:m.repairButton,onClick:()=>T("修理申請"),children:"修理申請"})]})]})]})})}let m={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"16px"},modal:{backgroundColor:"white",borderRadius:"12px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto"},header:{padding:"16px",borderBottom:"1px solid #e0e0e0"},title:{fontSize:"18px",fontWeight:600,color:"#2c3e50",marginBottom:"16px"},infoRow:{display:"flex",gap:"8px",marginBottom:"8px",flexWrap:"wrap"},infoItem:{display:"flex",alignItems:"center",gap:"4px",backgroundColor:"#f8f9fa",padding:"6px 12px",borderRadius:"4px",fontSize:"13px"},infoLabel:{color:"#7f8c8d",fontSize:"12px"},infoValue:{color:"#2c3e50",fontWeight:500},input:{border:"1px solid #ddd",borderRadius:"4px",padding:"6px 10px",fontSize:"14px",width:"120px"},select:{border:"1px solid #ddd",borderRadius:"4px",padding:"6px 10px",fontSize:"14px",minWidth:"200px",backgroundColor:"white"},dateDisplay:{backgroundColor:"#e8f5e9",padding:"6px 12px",borderRadius:"4px",fontSize:"13px",color:"#27ae60"},tabGroup:{display:"flex",gap:"4px"},tab:{padding:"6px 12px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"white",cursor:"pointer",fontSize:"13px"},tabActive:{padding:"6px 12px",border:"1px solid #27ae60",borderRadius:"4px",backgroundColor:"#e8f5e9",cursor:"pointer",fontSize:"13px",color:"#27ae60"},warning:{backgroundColor:"#fff3cd",border:"1px solid #ffc107",borderRadius:"4px",padding:"8px 12px",fontSize:"13px",color:"#856404",marginTop:"8px"},body:{padding:"16px"},notice:{backgroundColor:"#fff3cd",padding:"12px",borderRadius:"4px",fontSize:"13px",color:"#856404",marginBottom:"16px"},table:{width:"100%",borderCollapse:"collapse",fontSize:"13px",marginBottom:"16px"},th:{backgroundColor:"#e8f5e9",padding:"10px 12px",textAlign:"left",fontWeight:500,color:"#2c3e50",borderBottom:"1px solid #ddd"},td:{padding:"10px 12px",borderBottom:"1px solid #eee",verticalAlign:"middle"},resultButtonGroup:{display:"flex",gap:"4px"},resultButton:{padding:"6px 12px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"white",cursor:"pointer",fontSize:"12px",minWidth:"44px",minHeight:"32px"},resultButtonActive:{padding:"6px 12px",border:"1px solid #27ae60",borderRadius:"4px",backgroundColor:"#e8f5e9",cursor:"pointer",fontSize:"12px",color:"#27ae60",minWidth:"44px",minHeight:"32px"},resultButtonNg:{padding:"6px 12px",border:"1px solid #e74c3c",borderRadius:"4px",backgroundColor:"#fdecea",cursor:"pointer",fontSize:"12px",color:"#e74c3c",minWidth:"44px",minHeight:"32px"},numericInput:{border:"1px solid #ddd",borderRadius:"4px",padding:"6px 8px",fontSize:"13px",width:"60px",textAlign:"right"},unit:{fontSize:"12px",color:"#7f8c8d",marginLeft:"4px"},remarksSection:{marginBottom:"16px"},remarksLabel:{fontSize:"13px",color:"#7f8c8d",marginBottom:"4px"},remarksInput:{width:"100%",border:"1px solid #ddd",borderRadius:"4px",padding:"8px 12px",fontSize:"14px",boxSizing:"border-box"},footer:{padding:"16px",borderTop:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},footerLabel:{fontSize:"13px",color:"#7f8c8d"},footerButtons:{display:"flex",gap:"8px",flexWrap:"wrap"},passButton:{padding:"12px 24px",backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:500,minHeight:"44px"},reinspectButton:{padding:"12px 16px",backgroundColor:"#f39c12",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",minHeight:"44px"},repairButton:{padding:"12px 16px",backgroundColor:"#e74c3c",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",minHeight:"44px"}};function g({isMobile:e=!1}){let i=(0,n.useRouter)(),{tasks:a,menus:c,startInspection:x,skipInspection:u,setInspectionDate:m,getMenuById:g}=(0,s.useInspectionStore)(),{assets:b,departments:f}=(0,r.useMasterStore)(),j=(0,l.useMemo)(()=>[...new Set(b.map(e=>e.category))],[b]),C=(0,l.useMemo)(()=>[...new Set(b.map(e=>e.largeClass))],[b]),v=(0,l.useMemo)(()=>{let e={};return b.forEach(t=>{e[t.largeClass]||(e[t.largeClass]=[]),e[t.largeClass].includes(t.mediumClass)||e[t.largeClass].push(t.mediumClass)}),e},[b]),S=(0,l.useMemo)(()=>{let e={};return b.forEach(t=>{e[t.mediumClass]||(e[t.mediumClass]=[]),e[t.mediumClass].includes(t.item)||e[t.mediumClass].push(t.item)}),e},[b]),k=(0,l.useMemo)(()=>[...new Set(f.map(e=>e.department))],[f]),[w,I]=(0,l.useState)({inspectionType:"",managementDepartment:"",status:"",category:"",largeClass:"",mediumClass:"",item:"",maker:""}),[B,z]=(0,l.useState)(!1),[T,R]=(0,l.useState)(!1),[M,W]=(0,l.useState)(!1),[L,A]=(0,l.useState)(null),[N,D]=(0,l.useState)(""),[F,V]=(0,l.useState)(!1),[G,H]=(0,l.useState)(null),q=(0,l.useMemo)(()=>a.filter(e=>(!w.inspectionType||e.inspectionType===w.inspectionType)&&(!w.managementDepartment||e.managementDepartment===w.managementDepartment)&&(!w.status||e.status===w.status)&&(!w.largeClass||e.largeClass===w.largeClass)&&(!w.mediumClass||e.mediumClass===w.mediumClass)&&(!w.item||e.assetName===w.item)&&(!w.maker||e.maker===w.maker)&&!0),[a,w]),E=(e,t)=>{I(l=>({...l,[e]:t}))},O=(0,l.useMemo)(()=>[...new Set(a.map(e=>e.maker).filter(Boolean))],[a]);return(0,t.jsxs)("div",{style:y.container,children:[(0,t.jsxs)("div",{style:y.filterSection,children:[(0,t.jsx)("div",{style:y.filterHeader,children:(0,t.jsxs)("div",{style:y.filterActions,children:[(0,t.jsx)("button",{style:y.menuButton,onClick:()=>z(!0),children:"点検メニュー登録"}),(0,t.jsx)("button",{style:y.registrationButton,onClick:()=>R(!0),children:"点検管理登録"}),(0,t.jsx)("button",{style:y.exportButton,onClick:()=>{alert("点検予定表をCSV出力します")},children:"点検予定表の出力"})]})}),(0,t.jsxs)("div",{style:y.filterRow,children:[(0,t.jsxs)("div",{style:y.filterItem,children:[(0,t.jsx)("label",{style:y.filterLabel,children:"点検種別"}),(0,t.jsx)(o.SearchableSelect,{value:w.inspectionType,onChange:e=>E("inspectionType",e),options:["院内定期点検","メーカー保守","院内スポット点検"],placeholder:"全て"})]}),(0,t.jsxs)("div",{style:y.filterItem,children:[(0,t.jsx)("label",{style:y.filterLabel,children:"管理部署"}),(0,t.jsx)(o.SearchableSelect,{value:w.managementDepartment,onChange:e=>E("managementDepartment",e),options:k,placeholder:"全て"})]}),(0,t.jsxs)("div",{style:y.filterItem,children:[(0,t.jsx)("label",{style:y.filterLabel,children:"ステータス"}),(0,t.jsx)(o.SearchableSelect,{value:w.status,onChange:e=>E("status",e),options:["点検2ヶ月前","点検月","点検月超過","点検日調整","点検実施中","点検完了"],placeholder:"全て"})]}),(0,t.jsxs)("div",{style:y.filterItem,children:[(0,t.jsx)("label",{style:y.filterLabel,children:"Category"}),(0,t.jsx)(o.SearchableSelect,{value:w.category,onChange:e=>E("category",e),options:j,placeholder:"全て"})]}),(0,t.jsxs)("div",{style:y.filterItem,children:[(0,t.jsx)("label",{style:y.filterLabel,children:"大分類"}),(0,t.jsx)(o.SearchableSelect,{value:w.largeClass,onChange:e=>E("largeClass",e),options:C,placeholder:"全て"})]}),(0,t.jsxs)("div",{style:y.filterItem,children:[(0,t.jsx)("label",{style:y.filterLabel,children:"中分類"}),(0,t.jsx)(o.SearchableSelect,{value:w.mediumClass,onChange:e=>E("mediumClass",e),options:w.largeClass&&v[w.largeClass]||[],placeholder:"全て"})]}),(0,t.jsxs)("div",{style:y.filterItem,children:[(0,t.jsx)("label",{style:y.filterLabel,children:"品目"}),(0,t.jsx)(o.SearchableSelect,{value:w.item,onChange:e=>E("item",e),options:w.mediumClass&&S[w.mediumClass]||[],placeholder:"全て"})]}),(0,t.jsxs)("div",{style:y.filterItem,children:[(0,t.jsx)("label",{style:y.filterLabel,children:"メーカー"}),(0,t.jsx)(o.SearchableSelect,{value:w.maker,onChange:e=>E("maker",e),options:O,placeholder:"全て"})]})]}),(0,t.jsxs)("div",{style:y.filterFooter,children:[(0,t.jsx)("button",{style:y.clearButton,onClick:()=>{I({inspectionType:"",managementDepartment:"",status:"",category:"",largeClass:"",mediumClass:"",item:"",maker:""})},children:"フィルタークリア"}),(0,t.jsxs)("span",{style:y.resultCount,children:[q.length," 件"]})]})]}),(0,t.jsx)("div",{style:y.tableContainer,children:(0,t.jsxs)("table",{style:y.table,children:[(0,t.jsxs)("thead",{children:[(0,t.jsxs)("tr",{style:{backgroundColor:"#e9ecef"},children:[(0,t.jsx)("th",{style:y.thGroupFirst,rowSpan:2,children:"点検種別"}),(0,t.jsx)("th",{style:y.thGroup,colSpan:2,children:"部署情報"}),(0,t.jsx)("th",{style:y.thGroup,colSpan:6,children:"商品情報"}),(0,t.jsx)("th",{style:y.thGroup,colSpan:7,children:"点検情報"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:y.thFirstInGroup,children:"管理部署"}),(0,t.jsx)("th",{style:y.th,children:"設置部署"}),(0,t.jsx)("th",{style:y.thFirstInGroup,children:"QRコード"}),(0,t.jsx)("th",{style:y.th,children:"大分類"}),(0,t.jsx)("th",{style:y.th,children:"中分類"}),(0,t.jsx)("th",{style:y.th,children:"品目"}),(0,t.jsx)("th",{style:y.th,children:"メーカー"}),(0,t.jsx)("th",{style:y.th,children:"型式"}),(0,t.jsx)("th",{style:y.thFirstInGroup,children:"購入年月日"}),(0,t.jsx)("th",{style:y.th,children:"採用中の点検メニュー"}),(0,t.jsx)("th",{style:y.th,children:"点検周期"}),(0,t.jsx)("th",{style:y.th,children:"前回点検日"}),(0,t.jsx)("th",{style:y.th,children:"次回点検予定"}),(0,t.jsx)("th",{style:y.th,children:"ステータス"}),(0,t.jsx)("th",{style:y.th,children:"操作"})]})]}),(0,t.jsx)("tbody",{children:0===q.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:16,style:y.emptyCell,children:"点検タスクがありません。資産を選択して点検タスクを追加してください。"})}):q.map((e,l)=>{let n=e.periodicMenuIds.map(e=>g(e)?.name).filter(Boolean).join(", ")||"-",o=e.periodicMenuIds.length>0?e.periodicMenuIds.map(e=>{let t=g(e);return t?.cycleMonths?`${t.cycleMonths}ヶ月`:null}).filter(Boolean).join(", "):"-";return(0,t.jsxs)("tr",{style:l%2==0?y.row:y.rowAlt,children:[(0,t.jsx)("td",{style:y.td,children:e.inspectionType}),(0,t.jsx)("td",{style:y.tdFirstInGroup,children:e.managementDepartment}),(0,t.jsx)("td",{style:y.td,children:e.installedDepartment}),(0,t.jsx)("td",{style:{...y.tdFirstInGroup,fontFamily:"monospace",fontVariantNumeric:"tabular-nums"},children:e.assetId}),(0,t.jsx)("td",{style:y.td,children:e.largeClass}),(0,t.jsx)("td",{style:y.td,children:e.mediumClass}),(0,t.jsx)("td",{style:y.td,children:e.assetName}),(0,t.jsx)("td",{style:y.td,children:e.maker}),(0,t.jsx)("td",{style:y.td,children:e.model}),(0,t.jsx)("td",{style:y.tdFirstInGroup,children:e.purchaseDate||"-"}),(0,t.jsx)("td",{style:y.td,children:n}),(0,t.jsx)("td",{style:y.td,children:o}),(0,t.jsx)("td",{style:y.td,children:e.lastInspectionDate||"-"}),(0,t.jsx)("td",{style:y.td,children:e.nextInspectionDate}),(0,t.jsx)("td",{style:y.td,children:(0,t.jsx)("span",{style:{...y.statusBadge,...(e=>{switch(e){case"点検月超過":return{backgroundColor:"#e74c3c",color:"white"};case"点検月":return{backgroundColor:"#f39c12",color:"white"};case"点検2ヶ月前":return{backgroundColor:"#3498db",color:"white"};case"点検日調整":return{backgroundColor:"#9b59b6",color:"white"};case"点検実施中":return{backgroundColor:"#e67e22",color:"white"};case"点検完了":return{backgroundColor:"#27ae60",color:"white"};case"再点検":return{backgroundColor:"#c0392b",color:"white"};default:return{backgroundColor:"#95a5a6",color:"white"}}})(e.status)},children:e.status})}),(0,t.jsx)("td",{style:y.td,children:(0,t.jsx)("div",{style:y.actionButtons,children:"メーカー保守"===e.inspectionType?"点検日調整"===e.status?(0,t.jsx)("button",{style:y.actionButton,onClick:()=>{A(e),D(e.nextInspectionDate),W(!0)},children:"点検日登録"}):(0,t.jsx)("button",{style:{...y.actionButton,...y.makerMaintenanceAction},onClick:()=>{sessionStorage.setItem("makerMaintenanceTask",JSON.stringify(e)),i.push("/maker-maintenance-result")},disabled:"点検完了"===e.status,children:"点検記録登録"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{style:{...y.actionButton,...y.primaryAction},onClick:()=>{H(e),V(!0)},disabled:"点検完了"===e.status,children:"点検実施"}),(0,t.jsx)("button",{style:y.actionButton,onClick:()=>{u(e.id)},children:"スキップ"})]})})})]},e.id)})})]})}),(0,t.jsxs)("div",{style:y.notes,children:[(0,t.jsx)("p",{children:"※次回点検予定日はあくまで予定日となります。ステータスに「点検月」「点検2ヶ月前」「点検月超過」が表示されます"}),(0,t.jsx)("p",{children:"※メーカー保守については点検2ヶ月前より点検日を設定できます（「点検日程調整」）"})]}),(0,t.jsx)(d,{isOpen:B,onClose:()=>z(!1)}),(0,t.jsx)(p,{isOpen:T,onClose:()=>R(!1)}),M&&L&&(0,t.jsx)("div",{style:y.modalOverlay,onClick:()=>W(!1),children:(0,t.jsxs)("div",{style:y.dateModal,onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h3",{style:y.dateModalTitle,children:"点検日程調整"}),(0,t.jsx)("p",{style:y.dateModalAsset,children:L.assetName}),(0,t.jsxs)("div",{style:y.dateModalField,children:[(0,t.jsx)("label",{children:"点検予定日"}),(0,t.jsx)("input",{type:"date",value:N,onChange:e=>D(e.target.value),style:y.dateModalInput})]}),(0,t.jsxs)("div",{style:y.dateModalActions,children:[(0,t.jsx)("button",{style:y.cancelBtn,onClick:()=>W(!1),children:"キャンセル"}),(0,t.jsx)("button",{style:y.confirmBtn,onClick:()=>{L&&N&&(m(L.id,N),W(!1),A(null))},children:"設定"})]})]})}),(0,t.jsx)(h,{isOpen:F,task:G,menu:G?.periodicMenuIds[0]?g(G.periodicMenuIds[0])??null:null,onClose:()=>{V(!1),H(null)},onComplete:e=>{e.taskId&&x(e.taskId),console.log("点検完了:",e)}})]})}let y={container:{display:"flex",flexDirection:"column",height:"100%"},filterSection:{padding:"16px",borderBottom:"1px solid #e0e0e0",backgroundColor:"#f8f9fa"},filterHeader:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:"12px"},filterActions:{display:"flex",gap:"8px"},registrationButton:{backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"13px",fontWeight:600,cursor:"pointer"},menuButton:{backgroundColor:"#9b59b6",color:"white",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"13px",cursor:"pointer"},exportButton:{backgroundColor:"#3498db",color:"white",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"13px",cursor:"pointer"},filterRow:{display:"flex",flexWrap:"wrap",gap:"12px"},filterItem:{display:"flex",flexDirection:"column",gap:"4px",minWidth:"140px",flex:"1 1 140px",maxWidth:"180px"},filterLabel:{fontSize:"12px",color:"#555",fontWeight:500},filterFooter:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px"},clearButton:{backgroundColor:"#95a5a6",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",cursor:"pointer"},resultCount:{fontSize:"13px",color:"#555"},tableContainer:{flex:1,overflow:"auto",padding:"0 16px"},table:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},thGroup:{backgroundColor:"#e8ecef",padding:"8px",textAlign:"center",fontWeight:600,fontSize:"12px",whiteSpace:"nowrap",border:"1px solid #ddd",borderLeft:"2px solid #ccc"},thGroupFirst:{backgroundColor:"#e8ecef",padding:"8px",textAlign:"center",fontWeight:600,fontSize:"12px",whiteSpace:"nowrap",border:"1px solid #ddd"},th:{backgroundColor:"#f8f9fa",padding:"10px 8px",textAlign:"left",fontWeight:600,whiteSpace:"nowrap",border:"1px solid #ddd"},thFirstInGroup:{backgroundColor:"#f8f9fa",padding:"10px 8px",textAlign:"left",fontWeight:600,whiteSpace:"nowrap",border:"1px solid #ddd",borderLeft:"2px solid #ccc"},td:{padding:"8px",border:"1px solid #ddd",whiteSpace:"nowrap"},tdFirstInGroup:{padding:"8px",border:"1px solid #ddd",whiteSpace:"nowrap",borderLeft:"2px solid #ccc"},row:{backgroundColor:"white"},rowAlt:{backgroundColor:"#fafafa"},emptyCell:{padding:"48px",textAlign:"center",color:"#6c757d",fontSize:"14px",borderBottom:"1px solid #e9ecef"},statusBadge:{display:"inline-block",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:500},actionButtons:{display:"flex",gap:"6px"},actionButton:{backgroundColor:"#ecf0f1",color:"#2c3e50",border:"1px solid #bdc3c7",borderRadius:"4px",padding:"4px 10px",fontSize:"12px",cursor:"pointer",whiteSpace:"nowrap"},primaryAction:{backgroundColor:"#27ae60",color:"white",borderColor:"#27ae60"},makerMaintenanceAction:{backgroundColor:"#9b59b6",color:"white",borderColor:"#9b59b6"},notes:{padding:"12px 16px",fontSize:"12px",color:"#7f8c8d",lineHeight:1.6,borderTop:"1px solid #e0e0e0"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},dateModal:{backgroundColor:"white",borderRadius:"8px",padding:"24px",width:"90%",maxWidth:"400px"},dateModalTitle:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#2c3e50"},dateModalAsset:{margin:"0 0 16px 0",fontSize:"14px",color:"#7f8c8d"},dateModalField:{marginBottom:"20px"},dateModalInput:{width:"100%",padding:"10px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",marginTop:"8px",boxSizing:"border-box"},dateModalActions:{display:"flex",justifyContent:"flex-end",gap:"12px"},cancelBtn:{backgroundColor:"#95a5a6",color:"white",border:"none",borderRadius:"4px",padding:"10px 20px",fontSize:"14px",cursor:"pointer"},confirmBtn:{backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"4px",padding:"10px 20px",fontSize:"14px",cursor:"pointer"}};var b=e.i(72822);function f(){return(0,t.jsxs)("div",{className:"min-h-dvh flex flex-col",style:{background:"#f5f5f5"},children:[(0,t.jsx)(i.Header,{title:"タスク管理",showBackButton:!0,backHref:"/main",backLabel:"メイン画面に戻る",hideMenu:!0}),(0,t.jsx)("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:(0,t.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"16px",overflow:"hidden"},children:[(0,t.jsx)(b.SubTabNavigation,{activeTab:"inHouseInspection"}),(0,t.jsx)("div",{style:{flex:1,background:"white",overflow:"auto"},children:(0,t.jsx)(g,{})})]})})]})}function j(){return(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)("div",{style:{padding:"20px",textAlign:"center"},children:"読み込み中..."}),children:(0,t.jsx)(f,{})})}e.s(["default",()=>j],82796)}]);