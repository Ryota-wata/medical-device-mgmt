(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11276,e=>{"use strict";var o=e.i(43476),t=e.i(71645);function r({value:e,onChange:r,onSelect:i,options:l,placeholder:d="選択または入力してください",label:n,isMobile:a=!1,disabled:s=!1,dropdownMinWidth:p="200px"}){let[x,c]=(0,t.useState)(!1),[g,u]=(0,t.useState)(e||""),[h,b]=(0,t.useState)(l),m=(0,t.useRef)(null);return(0,t.useEffect)(()=>{u(e||"")},[e]),(0,t.useEffect)(()=>{g?b(l.filter(e=>e.toLowerCase().includes(g.toLowerCase()))):b(l)},[g,l]),(0,t.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,o.jsxs)("div",{style:{width:"100%",position:"relative"},ref:m,children:[n&&(0,o.jsx)("label",{style:{display:"block",fontSize:a?"13px":"14px",fontWeight:600,color:"#2c3e50",marginBottom:a?"6px":"8px"},children:n}),(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)("input",{type:"text",value:g??"",onChange:e=>{let o=e.target.value;u(o),r(o),c(!0)},onFocus:()=>{c(!0)},placeholder:d,disabled:s,style:{width:"100%",paddingTop:"10px",paddingBottom:"10px",paddingLeft:a?"10px":"12px",paddingRight:"36px",border:"1px solid #d0d0d0",borderRadius:"6px",fontSize:"14px",background:s?"#f8f9fa":"white",cursor:s?"not-allowed":"text",boxSizing:"border-box"}}),(0,o.jsx)("div",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:"#7f8c8d",fontSize:"12px"},children:"▼"})]}),x&&h.length>0&&!s&&(0,o.jsx)("div",{style:{position:"absolute",top:"100%",left:0,minWidth:p,marginTop:"4px",background:"white",border:"1px solid #d0d0d0",borderRadius:"6px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxHeight:a?"200px":"350px",overflowY:"auto",zIndex:9999},children:h.map((t,l)=>(0,o.jsx)("div",{onClick:()=>{u(t),r(t),i&&i(t),c(!1)},style:{padding:a?"10px 12px":"12px 14px",cursor:"pointer",fontSize:a?"13px":"14px",color:"#2c3e50",background:t===e?"#e8f4f8":"white",borderBottom:l<h.length-1?"1px solid #f0f0f0":"none",transition:"background 0.15s",whiteSpace:"nowrap"},onMouseEnter:o=>{t!==e&&(o.currentTarget.style.background="#f8f9fa")},onMouseLeave:o=>{t!==e&&(o.currentTarget.style.background="white")},children:t},l))}),x&&0===h.length&&g&&!s&&(0,o.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",border:"1px solid #d0d0d0",borderRadius:"6px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",padding:a?"12px":"16px",textAlign:"center",color:"#7f8c8d",fontSize:a?"13px":"14px",zIndex:9999},children:"検索結果がありません"})]})}e.s(["SearchableSelect",()=>r])},63521,e=>{"use strict";var o=e.i(43476),t=e.i(71645),r=e.i(18566);e.i(17363);var i=e.i(26549),l=e.i(26569),d=e.i(11276);function n(){let e="simple"===(0,r.useSearchParams)().get("mode"),{assets:n}=(0,i.useMasterStore)(),{isMobile:a}=(0,l.useResponsive)(),[s,p]=(0,t.useState)(null),[x,c]=(0,t.useState)({globalSearch:"",category:"",largeClass:"",mediumClass:"",item:"",maker:"",model:""}),g=(0,t.useMemo)(()=>Array.from(new Set(n.map(e=>e.category))).filter(Boolean),[n]),u=(0,t.useMemo)(()=>Array.from(new Set(n.map(e=>e.largeClass))).filter(Boolean),[n]),h=(0,t.useMemo)(()=>Array.from(new Set(n.map(e=>e.mediumClass))).filter(Boolean),[n]),b=(0,t.useMemo)(()=>Array.from(new Set(n.map(e=>e.item))).filter(Boolean),[n]),m=(0,t.useMemo)(()=>Array.from(new Set(n.map(e=>e.maker))).filter(Boolean),[n]),f=(0,t.useMemo)(()=>Array.from(new Set(n.map(e=>e.model))).filter(Boolean),[n]),y=(0,t.useMemo)(()=>{let e=n;if(x.globalSearch){let o=x.globalSearch.toLowerCase();e=e.filter(e=>(e.category?.toLowerCase()||"").includes(o)||(e.largeClass?.toLowerCase()||"").includes(o)||(e.mediumClass?.toLowerCase()||"").includes(o)||(e.item?.toLowerCase()||"").includes(o)||(e.maker?.toLowerCase()||"").includes(o)||(e.model?.toLowerCase()||"").includes(o)||(e.id?.toLowerCase()||"").includes(o))}return x.category&&(e=e.filter(e=>e.category===x.category)),x.largeClass&&(e=e.filter(e=>e.largeClass===x.largeClass)),x.mediumClass&&(e=e.filter(e=>e.mediumClass===x.mediumClass)),x.item&&(e=e.filter(e=>e.item===x.item)),x.maker&&(e=e.filter(e=>e.maker===x.maker)),x.model&&(e=e.filter(e=>e.model===x.model)),e},[n,x]),w=(0,t.useMemo)(()=>n.find(e=>e.id===s)||null,[n,s]),k=e=>{let o;if(!w)return void alert("資産を選択してください");switch(e){case"toItem":o={id:w.id,category:w.category,largeClass:w.largeClass,mediumClass:w.mediumClass,item:w.item};break;case"toMaker":o={id:w.id,category:w.category,largeClass:w.largeClass,mediumClass:w.mediumClass,item:w.item,maker:w.maker};break;default:o={id:w.id,category:w.category,largeClass:w.largeClass,mediumClass:w.mediumClass,item:w.item,maker:w.maker,model:w.model}}window.opener&&!window.opener.closed?(window.opener.postMessage({type:"ASSET_SELECTED",assets:[o],scope:e},window.location.origin),window.close()):alert("親ウィンドウが見つかりません")};return(0,o.jsxs)("div",{style:{minHeight:"100vh",background:"#f5f5f5",display:"flex",flexDirection:"column"},children:[(0,o.jsx)("div",{style:{background:"#2c3e50",color:"white",padding:a?"12px":"16px 20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:(0,o.jsx)("h1",{style:{fontSize:a?"18px":"20px",fontWeight:"bold",margin:0},children:"資産マスタ選択"})}),(0,o.jsxs)("div",{style:{background:"#f8f9fa",padding:"15px 20px",borderBottom:"1px solid #dee2e6"},children:[(0,o.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",color:"#2c3e50",marginBottom:"4px"},children:"全体検索"}),(0,o.jsx)("input",{type:"text",value:x.globalSearch||"",onChange:e=>c({...x,globalSearch:e.target.value}),placeholder:"キーワードを入力（全カラムから曖昧検索）",style:{width:"100%",padding:"10px 12px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px",boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"flex-end"},children:[(0,o.jsx)("div",{style:{flex:"1",minWidth:"120px"},children:(0,o.jsx)(d.SearchableSelect,{label:"Category",value:x.category,onChange:e=>c({...x,category:e}),options:g,placeholder:"全て",isMobile:a})}),(0,o.jsx)("div",{style:{flex:"1",minWidth:"120px"},children:(0,o.jsx)(d.SearchableSelect,{label:"大分類",value:x.largeClass,onChange:e=>c({...x,largeClass:e}),options:u,placeholder:"全て",isMobile:a})}),(0,o.jsx)("div",{style:{flex:"1",minWidth:"120px"},children:(0,o.jsx)(d.SearchableSelect,{label:"中分類",value:x.mediumClass,onChange:e=>c({...x,mediumClass:e}),options:h,placeholder:"全て",isMobile:a})}),(0,o.jsx)("div",{style:{flex:"1",minWidth:"120px"},children:(0,o.jsx)(d.SearchableSelect,{label:"個体管理品目",value:x.item,onChange:e=>c({...x,item:e}),options:b,placeholder:"全て",isMobile:a})}),(0,o.jsx)("div",{style:{flex:"1",minWidth:"120px"},children:(0,o.jsx)(d.SearchableSelect,{label:"メーカー",value:x.maker,onChange:e=>c({...x,maker:e}),options:m,placeholder:"全て",isMobile:a})}),(0,o.jsx)("div",{style:{flex:"1",minWidth:"120px"},children:(0,o.jsx)(d.SearchableSelect,{label:"型式",value:x.model,onChange:e=>c({...x,model:e}),options:f,placeholder:"全て",isMobile:a})}),(0,o.jsx)("button",{onClick:()=>c({globalSearch:"",category:"",largeClass:"",mediumClass:"",item:"",maker:"",model:""}),style:{padding:"8px 16px",background:"#95a5a6",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:"クリア"})]})]}),(0,o.jsx)("div",{style:{background:"white",padding:"16px 20px",borderBottom:"1px solid #dee2e6",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:(0,o.jsx)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:e?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>{if(!w)return void alert("資産を選択してください");let e={id:w.id,category:w.category,largeClass:w.largeClass,mediumClass:w.mediumClass,item:w.item,maker:w.maker,model:w.model};window.opener&&!window.opener.closed?(window.opener.postMessage({type:"ASSET_SELECTED",assets:[e]},window.location.origin),window.close()):alert("親ウィンドウが見つかりません")},disabled:!s,style:{padding:a?"8px 12px":"10px 20px",background:s?"#27ae60":"#bdc3c7",color:"white",border:"none",borderRadius:"6px",fontSize:a?"12px":"14px",fontWeight:"bold",cursor:s?"pointer":"not-allowed",transition:"background 0.2s"},onMouseEnter:e=>{s&&(e.currentTarget.style.background="#229954")},onMouseLeave:e=>{s&&(e.currentTarget.style.background="#27ae60")},children:"選択"}),(0,o.jsx)("button",{onClick:()=>window.close(),style:{padding:a?"8px 12px":"10px 20px",background:"#95a5a6",color:"white",border:"none",borderRadius:"6px",fontSize:a?"12px":"14px",fontWeight:"bold",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="#7f8c8d"},onMouseLeave:e=>{e.currentTarget.style.background="#95a5a6"},children:"キャンセル"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>k("all"),disabled:!s,style:{padding:a?"8px 12px":"10px 16px",background:s?"#27ae60":"#bdc3c7",color:"white",border:"none",borderRadius:"6px",fontSize:a?"12px":"14px",fontWeight:"bold",cursor:s?"pointer":"not-allowed",transition:"background 0.2s"},onMouseEnter:e=>{s&&(e.currentTarget.style.background="#229954")},onMouseLeave:e=>{s&&(e.currentTarget.style.background="#27ae60")},children:"全て確定"}),(0,o.jsx)("button",{onClick:()=>k("toMaker"),disabled:!s,style:{padding:a?"8px 12px":"10px 16px",background:s?"#3498db":"#bdc3c7",color:"white",border:"none",borderRadius:"6px",fontSize:a?"12px":"14px",fontWeight:"bold",cursor:s?"pointer":"not-allowed",transition:"background 0.2s"},onMouseEnter:e=>{s&&(e.currentTarget.style.background="#2980b9")},onMouseLeave:e=>{s&&(e.currentTarget.style.background="#3498db")},children:"メーカーまで確定"}),(0,o.jsx)("button",{onClick:()=>k("toItem"),disabled:!s,style:{padding:a?"8px 12px":"10px 16px",background:s?"#9b59b6":"#bdc3c7",color:"white",border:"none",borderRadius:"6px",fontSize:a?"12px":"14px",fontWeight:"bold",cursor:s?"pointer":"not-allowed",transition:"background 0.2s"},onMouseEnter:e=>{s&&(e.currentTarget.style.background="#8e44ad")},onMouseLeave:e=>{s&&(e.currentTarget.style.background="#9b59b6")},children:"品目まで確定"}),(0,o.jsx)("button",{onClick:()=>window.close(),style:{padding:a?"8px 12px":"10px 16px",background:"#95a5a6",color:"white",border:"none",borderRadius:"6px",fontSize:a?"12px":"14px",fontWeight:"bold",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="#7f8c8d"},onMouseLeave:e=>{e.currentTarget.style.background="#95a5a6"},children:"キャンセル"})]})})}),(0,o.jsxs)("div",{style:{flex:1,background:"white",margin:"20px",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,o.jsx)("div",{style:{flex:1,overflowX:"auto",overflowY:"auto"},children:(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:a?"12px":"14px"},children:[(0,o.jsx)("thead",{style:{background:"#34495e",color:"white",position:"sticky",top:0,zIndex:10},children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{padding:a?"10px 8px":"12px",textAlign:"center",fontWeight:"bold",width:"50px",borderRight:"1px solid rgba(255,255,255,0.1)"},children:"選択"}),(0,o.jsx)("th",{style:{padding:a?"10px 8px":"12px",textAlign:"left",fontWeight:"bold",borderRight:"1px solid rgba(255,255,255,0.1)",minWidth:"60px"},children:"No."}),(0,o.jsx)("th",{style:{padding:a?"10px 8px":"12px",textAlign:"left",fontWeight:"bold",borderRight:"1px solid rgba(255,255,255,0.1)",minWidth:"100px"},children:"Category"}),(0,o.jsx)("th",{style:{padding:a?"10px 8px":"12px",textAlign:"left",fontWeight:"bold",borderRight:"1px solid rgba(255,255,255,0.1)",minWidth:"150px"},children:"大分類"}),(0,o.jsx)("th",{style:{padding:a?"10px 8px":"12px",textAlign:"left",fontWeight:"bold",borderRight:"1px solid rgba(255,255,255,0.1)",minWidth:"150px"},children:"中分類"}),(0,o.jsx)("th",{style:{padding:a?"10px 8px":"12px",textAlign:"left",fontWeight:"bold",borderRight:"1px solid rgba(255,255,255,0.1)",minWidth:"200px"},children:"個体管理品目"}),(0,o.jsx)("th",{style:{padding:a?"10px 8px":"12px",textAlign:"left",fontWeight:"bold",borderRight:"1px solid rgba(255,255,255,0.1)",minWidth:"150px"},children:"メーカー"}),(0,o.jsx)("th",{style:{padding:a?"10px 8px":"12px",textAlign:"left",fontWeight:"bold",minWidth:"150px"},children:"型式"})]})}),(0,o.jsx)("tbody",{children:y.map((e,t)=>(0,o.jsxs)("tr",{style:{background:s===e.id?"#d5f4e6":t%2==0?"white":"#f8f9fa",borderBottom:"1px solid #ecf0f1",cursor:"pointer"},onClick:()=>p(e.id),onMouseEnter:o=>{s!==e.id&&(o.currentTarget.style.background="#e8f4f8")},onMouseLeave:o=>{s!==e.id&&(o.currentTarget.style.background=t%2==0?"white":"#f8f9fa")},children:[(0,o.jsx)("td",{style:{padding:a?"10px 8px":"12px",textAlign:"center",borderRight:"1px solid #ecf0f1"},onClick:e=>e.stopPropagation(),children:(0,o.jsx)("input",{type:"radio",name:"assetSelection",checked:s===e.id,onChange:()=>p(e.id),onClick:e=>e.stopPropagation(),style:{cursor:"pointer",width:"16px",height:"16px"}})}),(0,o.jsx)("td",{style:{padding:a?"10px 8px":"12px",color:"#2c3e50",borderRight:"1px solid #ecf0f1"},children:t+1}),(0,o.jsx)("td",{style:{padding:a?"10px 8px":"12px",color:"#2c3e50",borderRight:"1px solid #ecf0f1"},children:e.category}),(0,o.jsx)("td",{style:{padding:a?"10px 8px":"12px",color:"#2c3e50",borderRight:"1px solid #ecf0f1"},children:e.largeClass}),(0,o.jsx)("td",{style:{padding:a?"10px 8px":"12px",color:"#2c3e50",borderRight:"1px solid #ecf0f1"},children:e.mediumClass}),(0,o.jsx)("td",{style:{padding:a?"10px 8px":"12px",color:"#2c3e50",borderRight:"1px solid #ecf0f1"},children:e.item}),(0,o.jsx)("td",{style:{padding:a?"10px 8px":"12px",color:"#2c3e50",borderRight:"1px solid #ecf0f1"},children:e.maker}),(0,o.jsx)("td",{style:{padding:a?"10px 8px":"12px",color:"#2c3e50"},children:e.model})]},e.id))})]})}),0===y.length&&(0,o.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#7f8c8d",fontSize:a?"14px":"16px"},children:"該当する資産がありません"})]})]})}function a(){return(0,o.jsx)(t.Suspense,{fallback:(0,o.jsx)("div",{children:"読み込み中..."}),children:(0,o.jsx)(n,{})})}e.s(["default",()=>a])}]);