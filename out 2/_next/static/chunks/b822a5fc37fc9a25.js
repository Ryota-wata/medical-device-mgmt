(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,28944,57181,78173,23408,e=>{"use strict";e.s(["MESSAGES",0,{QUOTATION_REGISTERED:(e,t)=>`見積書を登録しました
見積番号: ${e}
明細数: ${t}件`,CONFIRM_DELETE:"見積書を削除しますか？",CONFIRM_DELETE_ITEM:"この見積明細を削除しますか？"},"TIMEOUTS",0,{OCR_SIMULATION:1e3}],28944),e.s(["MOCK_OCR_RESULT",0,{vendorName:"第一医科株式会社",facilityName:"医療法人社団 サンプル病院",quotationDate:"2025-01-15",validityPeriod:3,deliveryPeriod:2,phase:"確定見積",items:[{rowNo:1,itemType:"A_表紙明細",itemName:"耳鼻咽喉科ユニット きららEFUS01",manufacturer:"第一医科",model:"EFUS01",specification:"",quantity:4,unit:"台",listPriceUnit:35e5,listPriceTotal:14e6,purchasePriceUnit:3e6,purchasePriceTotal:12e6,discount:14.3,taxRate:10,totalWithTax:132e5,remarks:"",aiJudgments:[{itemType:"A_表紙明細",category:"01医療機器",majorCategory:"20各科特有機器(耳鼻科)",middleCategory:"01診察関連",assetName:"診察ユニット（耳鼻科用）片面",manufacturer:"第一医科",model:"きらら EFUS01",quantity:4}]},{rowNo:2,itemType:"B_明細代表",itemName:"仕様",manufacturer:"",model:"",specification:"文字列",quantity:4,unit:"式",listPriceUnit:0,listPriceTotal:0,purchasePriceUnit:0,purchasePriceTotal:0,discount:0,taxRate:10,totalWithTax:0,remarks:"",aiJudgments:[]},{rowNo:3,itemType:"C_個体管理品目",itemName:"耳鼻咽喉科ユニット きらら",manufacturer:"第一医科",model:"きらら EFUS01",specification:"（構成内訳）",quantity:4,unit:"台",listPriceUnit:28e5,listPriceTotal:112e5,purchasePriceUnit:24e5,purchasePriceTotal:96e5,discount:14.3,taxRate:10,totalWithTax:1056e4,remarks:"主要機器",aiJudgments:[{itemType:"C_個体管理品目",category:"01医療機器",majorCategory:"20各科特有機器(耳鼻科)",middleCategory:"01診察関連",assetName:"診察ユニット（耳鼻科用）片面",manufacturer:"第一医科",model:"きらら EFUS01",quantity:1},{itemType:"C_個体管理品目",category:"01医療機器",majorCategory:"20各科特有機器(耳鼻科)",middleCategory:"01診察関連",assetName:"診察ユニット（耳鼻科用）片面",manufacturer:"第一医科",model:"きらら EFUS01",quantity:1},{itemType:"C_個体管理品目",category:"01医療機器",majorCategory:"20各科特有機器(耳鼻科)",middleCategory:"01診察関連",assetName:"診察ユニット（耳鼻科用）片面",manufacturer:"第一医科",model:"きらら EFUS01",quantity:1},{itemType:"C_個体管理品目",category:"01医療機器",majorCategory:"20各科特有機器(耳鼻科)",middleCategory:"01診察関連",assetName:"診察ユニット（耳鼻科用）片面",manufacturer:"第一医科",model:"きらら EFUS01",quantity:1}]},{rowNo:4,itemType:"D_付属品",itemName:"ホース付きスプレー２本",manufacturer:"第一医科",model:"",specification:"",quantity:4,unit:"セット",listPriceUnit:5e4,listPriceTotal:2e5,purchasePriceUnit:45e3,purchasePriceTotal:18e4,discount:10,taxRate:10,totalWithTax:198e3,remarks:"",aiJudgments:[{itemType:"D_付属品",category:"01医療機器",majorCategory:"20各科特有機器(耳鼻科)",middleCategory:"01診察関連(付属品)",assetName:"ホース付きスプレー２本",manufacturer:"第一医科",model:"",quantity:4}]},{rowNo:5,itemType:"D_付属品",itemName:"吸引滑車式 ロック機構付",manufacturer:"第一医科",model:"",specification:"",quantity:4,unit:"個",listPriceUnit:8e4,listPriceTotal:32e4,purchasePriceUnit:72e3,purchasePriceTotal:288e3,discount:10,taxRate:10,totalWithTax:316800,remarks:"",aiJudgments:[{itemType:"D_付属品",category:"01医療機器",majorCategory:"20各科特有機器(耳鼻科)",middleCategory:"01診察関連(付属品)",assetName:"吸引滑車式　ロック機構付",manufacturer:"第一医科",model:"",quantity:4}]},{rowNo:6,itemType:"D_付属品",itemName:"通気滑車式 ロック機構付",manufacturer:"第一医科",model:"",specification:"",quantity:4,unit:"個",listPriceUnit:8e4,listPriceTotal:32e4,purchasePriceUnit:72e3,purchasePriceTotal:288e3,discount:10,taxRate:10,totalWithTax:316800,remarks:"",aiJudgments:[{itemType:"D_付属品",category:"01医療機器",majorCategory:"20各科特有機器(耳鼻科)",middleCategory:"01診察関連(付属品)",assetName:"通気滑車式　ロック機構付",manufacturer:"第一医科",model:"",quantity:4}]},{rowNo:7,itemType:"D_付属品",itemName:"ツインポール",manufacturer:"第一医科",model:"",specification:"",quantity:4,unit:"本",listPriceUnit:3e4,listPriceTotal:12e4,purchasePriceUnit:27e3,purchasePriceTotal:108e3,discount:10,taxRate:10,totalWithTax:118800,remarks:"",aiJudgments:[{itemType:"D_付属品",category:"01医療機器",majorCategory:"20各科特有機器(耳鼻科)",middleCategory:"01診察関連(付属品)",assetName:"ツインポール",manufacturer:"第一医科",model:"",quantity:4}]},{rowNo:8,itemType:"D_付属品",itemName:"モニターアーム",manufacturer:"第一医科",model:"",specification:"",quantity:4,unit:"個",listPriceUnit:25e3,listPriceTotal:1e5,purchasePriceUnit:22500,purchasePriceTotal:9e4,discount:10,taxRate:10,totalWithTax:99e3,remarks:"",aiJudgments:[{itemType:"D_付属品",category:"01医療機器",majorCategory:"20各科特有機器(耳鼻科)",middleCategory:"01診察関連(付属品)",assetName:"モニターアーム",manufacturer:"第一医科",model:"",quantity:4}]},{rowNo:9,itemType:"C_個体管理品目",itemName:"ドクタースツール",manufacturer:"第一医科",model:"",specification:"",quantity:4,unit:"脚",listPriceUnit:6e4,listPriceTotal:24e4,purchasePriceUnit:54e3,purchasePriceTotal:216e3,discount:10,taxRate:10,totalWithTax:237600,remarks:"",aiJudgments:[{itemType:"C_個体管理品目",category:"02什器備品",majorCategory:"什器備品",middleCategory:"椅子",assetName:"スツール",manufacturer:"第一医科",model:"",quantity:1},{itemType:"C_個体管理品目",category:"02什器備品",majorCategory:"什器備品",middleCategory:"椅子",assetName:"スツール",manufacturer:"第一医科",model:"",quantity:1},{itemType:"C_個体管理品目",category:"02什器備品",majorCategory:"什器備品",middleCategory:"椅子",assetName:"スツール",manufacturer:"第一医科",model:"",quantity:1},{itemType:"C_個体管理品目",category:"02什器備品",majorCategory:"什器備品",middleCategory:"椅子",assetName:"スツール",manufacturer:"第一医科",model:"",quantity:1}]},{rowNo:10,itemType:"E_その他役務",itemName:"設置工事費",manufacturer:"",model:"",specification:"",quantity:1,unit:"式",listPriceUnit:5e5,listPriceTotal:5e5,purchasePriceUnit:5e5,purchasePriceTotal:5e5,discount:0,taxRate:10,totalWithTax:55e4,remarks:"設置・配線工事一式",aiJudgments:[]}],totalAmount:14597e3}],57181);var t=e.i(43476),d=e.i(71645);e.s(["RfqGroupsTab",0,({rfqGroups:e,rfqStatusFilter:i,onFilterChange:r,onRegisterQuotation:o,onRegisterOrder:n,onRegisterInspection:l,onRegisterAssetProvisional:a,onUpdateDeadline:s})=>{let p=(0,d.useMemo)(()=>i?e.filter(e=>e.status===i):e,[e,i]);return(0,t.jsxs)("div",{style:{flex:1,overflow:"auto",padding:"20px"},children:[(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f8f9fa"},children:[(0,t.jsx)("th",{style:{padding:"10px 8px",border:"1px solid #ddd",textAlign:"left",fontWeight:600,whiteSpace:"nowrap"},children:"見積依頼No."}),(0,t.jsx)("th",{style:{padding:"10px 8px",border:"1px solid #ddd",textAlign:"left",fontWeight:600,whiteSpace:"nowrap"},children:"見積グループ名称"}),(0,t.jsx)("th",{style:{padding:"10px 8px",border:"1px solid #ddd",textAlign:"left",fontWeight:600,whiteSpace:"nowrap"},children:"見積依頼先"}),(0,t.jsx)("th",{style:{padding:"10px 8px",border:"1px solid #ddd",textAlign:"left",fontWeight:600,whiteSpace:"nowrap"},children:"担当"}),(0,t.jsx)("th",{style:{padding:"10px 8px",border:"1px solid #ddd",textAlign:"left",fontWeight:600,whiteSpace:"nowrap"},children:"mail"}),(0,t.jsx)("th",{style:{padding:"10px 8px",border:"1px solid #ddd",textAlign:"left",fontWeight:600,whiteSpace:"nowrap"},children:"連絡先(TEL)"}),(0,t.jsx)("th",{style:{padding:"10px 8px",border:"1px solid #ddd",textAlign:"left",fontWeight:600,whiteSpace:"nowrap"},children:"依頼日"}),(0,t.jsx)("th",{style:{padding:"10px 8px",border:"1px solid #ddd",textAlign:"center",fontWeight:600,whiteSpace:"nowrap"},children:"ステータス"}),(0,t.jsx)("th",{style:{padding:"10px 8px",border:"1px solid #ddd",textAlign:"left",fontWeight:600,whiteSpace:"nowrap"},children:"期限"}),(0,t.jsx)("th",{style:{padding:"10px 8px",border:"1px solid #ddd",textAlign:"center",fontWeight:600,whiteSpace:"nowrap"},children:"操作"})]})}),(0,t.jsx)("tbody",{children:p.map((e,d)=>(0,t.jsxs)("tr",{style:{background:d%2==0?"white":"#fafafa"},children:[(0,t.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",fontFamily:"monospace",fontWeight:600,whiteSpace:"nowrap"},children:e.rfqNo}),(0,t.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",whiteSpace:"nowrap"},children:e.groupName}),(0,t.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",whiteSpace:"nowrap"},children:e.vendorName||"-"}),(0,t.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",whiteSpace:"nowrap"},children:e.personInCharge||"-"}),(0,t.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",whiteSpace:"nowrap"},children:e.email||"-"}),(0,t.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",whiteSpace:"nowrap"},children:e.tel||"-"}),(0,t.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",whiteSpace:"nowrap"},children:e.createdDate}),(0,t.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"center",whiteSpace:"nowrap"},children:(0,t.jsx)("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",background:"見積依頼"===e.status?"#3498db":"見積依頼済"===e.status?"#f39c12":"見積登録済"===e.status?"#27ae60":"発注登録済"===e.status?"#8e44ad":"検収登録済"===e.status?"#e67e22":"資産仮登録済"===e.status?"#16a085":"資産登録済"===e.status?"#7f8c8d":"#95a5a6",color:"white",whiteSpace:"nowrap"},children:e.status})}),(0,t.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",whiteSpace:"nowrap"},children:(0,t.jsx)("input",{type:"date",value:e.deadline||"",onChange:t=>s(e.id,t.target.value||void 0),style:{padding:"4px 8px",fontSize:"12px",border:"1px solid #ddd",borderRadius:"4px",color:e.deadline?"#2c3e50":"#aaa",background:"white",cursor:"pointer"}})}),(0,t.jsxs)("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"center",whiteSpace:"nowrap"},children:["見積依頼"===e.status&&(0,t.jsx)("button",{onClick:()=>{},style:{padding:"6px 12px",background:"#3498db",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"見積依頼"}),"見積依頼済"===e.status&&(0,t.jsx)("button",{onClick:()=>o(e.id),style:{padding:"6px 12px",background:"#27ae60",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"見積登録"}),"見積登録済"===e.status&&(0,t.jsx)("button",{onClick:()=>n(e.id),style:{padding:"6px 12px",background:"#8e44ad",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"発注登録"}),"発注登録済"===e.status&&(0,t.jsx)("button",{onClick:()=>l(e.id),style:{padding:"6px 12px",background:"#e67e22",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"検収登録"}),"検収登録済"===e.status&&(0,t.jsx)("button",{onClick:()=>a(e.id),style:{padding:"6px 12px",background:"#16a085",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"資産仮登録"}),"資産仮登録済"===e.status&&(0,t.jsx)("button",{onClick:()=>{},style:{padding:"6px 12px",background:"#2c3e50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"資産登録"}),"資産登録済"===e.status&&(0,t.jsx)("span",{style:{color:"#7f8c8d",fontSize:"12px"},children:"-"})]})]},e.id))})]}),0===p.length&&(0,t.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#7f8c8d"},children:"見積依頼グループがありません"})]})}],78173);var i=e.i(54420);let r=({rfqGroups:e,formData:r,ocrProcessing:o,onFormDataChange:n,onPdfUpload:l,onGenerateTestOCR:a,onCancel:s})=>{let{user:p}=(0,i.useAuthStore)(),[x,c]=(0,d.useState)("listPrice"),[g,h]=(0,d.useState)("scanner"),[f,u]=(0,d.useState)(""),[y,b]=(0,d.useState)("");return(0,t.jsxs)("div",{children:[(0,t.jsx)("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #4a6fa5"},children:(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{background:"#4a6fa5",color:"white",padding:"10px 12px",fontSize:"13px",fontWeight:"bold",textAlign:"left",width:"120px",border:"1px solid #4a6fa5",whiteSpace:"nowrap"},children:"添付ファイル"}),(0,t.jsx)("td",{style:{background:"white",padding:"10px 12px",border:"1px solid #4a6fa5"},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,t.jsxs)("label",{style:{padding:"6px 16px",background:"#f5f5f5",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",fontSize:"13px",whiteSpace:"nowrap"},children:["ファイルの選択",(0,t.jsx)("input",{type:"file",accept:".pdf,.xlsx,.xls",onChange:e=>{let t=e.target.files?.[0];t&&u(t.name),l(e)},style:{display:"none"}})]}),(0,t.jsx)("span",{style:{color:"#666",fontSize:"13px"},children:f||"ファイルが選択されていません"})]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{background:"#4a6fa5",color:"white",padding:"10px 12px",fontSize:"13px",fontWeight:"bold",textAlign:"left",width:"120px",border:"1px solid #4a6fa5",whiteSpace:"nowrap"},children:"申請者"}),(0,t.jsx)("td",{style:{background:"white",padding:"10px 12px",border:"1px solid #4a6fa5"},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,t.jsx)("span",{style:{padding:"6px 12px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:"4px",fontSize:"13px",color:"#333"},children:p?.username||"user001"}),(0,t.jsx)("span",{style:{fontSize:"13px",color:"#333"},children:p?.email?p.email.split("@")[0]:"担当者名"})]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{background:"#4a6fa5",color:"white",padding:"10px 12px",fontSize:"13px",fontWeight:"bold",textAlign:"left",width:"120px",border:"1px solid #4a6fa5",whiteSpace:"nowrap",verticalAlign:"top"},children:"見積フェーズ"}),(0,t.jsx)("td",{style:{background:"white",padding:"10px 12px",border:"1px solid #4a6fa5"},children:(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",fontSize:"13px"},children:[(0,t.jsx)("input",{type:"radio",name:"quotationPhase",checked:"listPrice"===x,onChange:()=>c("listPrice")}),"定価"]}),(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",fontSize:"13px"},children:[(0,t.jsx)("input",{type:"radio",name:"quotationPhase",checked:"approximate"===x,onChange:()=>c("approximate")}),"概算"]}),(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",fontSize:"13px"},children:[(0,t.jsx)("input",{type:"radio",name:"quotationPhase",checked:"final"===x,onChange:()=>c("final")}),"最終原本登録用"]})]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{background:"#4a6fa5",color:"white",padding:"10px 12px",fontSize:"13px",fontWeight:"bold",textAlign:"left",width:"120px",border:"1px solid #4a6fa5",whiteSpace:"nowrap",verticalAlign:"top"},children:"保存形式"}),(0,t.jsx)("td",{style:{background:"white",padding:"10px 12px",border:"1px solid #4a6fa5"},children:(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",fontSize:"13px"},children:[(0,t.jsx)("input",{type:"radio",name:"saveFormat",checked:"electronic"===g,onChange:()=>h("electronic")}),"電子取引"]}),(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",fontSize:"13px"},children:[(0,t.jsx)("input",{type:"radio",name:"saveFormat",checked:"scanner"===g,onChange:()=>h("scanner")}),"スキャナ保存"]}),(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",fontSize:"13px"},children:[(0,t.jsx)("input",{type:"radio",name:"saveFormat",checked:"unspecified"===g,onChange:()=>h("unspecified")}),"未指定"]})]})})]})]})}),(0,t.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",alignItems:"center",marginTop:"20px"},children:[(0,t.jsx)("button",{onClick:s,style:{padding:"10px 20px",background:"#95a5a6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"bold"},children:"キャンセル"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,t.jsx)("button",{onClick:()=>{},style:{padding:"10px 20px",background:"#f39c12",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"bold"},children:"SHIPへ依頼"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,t.jsx)("label",{style:{fontSize:"12px",color:"#555"},children:"登録期限:"}),(0,t.jsx)("input",{type:"date",value:y,onChange:e=>b(e.target.value),style:{padding:"6px 10px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"13px"}})]})]}),(0,t.jsx)("button",{onClick:()=>{},style:{padding:"10px 20px",background:"#27ae60",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"bold"},children:"Excel取込"}),(0,t.jsx)("button",{onClick:a,disabled:o,style:{padding:"10px 20px",background:o?"#bdc3c7":"#3498db",color:"white",border:"none",borderRadius:"4px",cursor:o?"not-allowed":"pointer",fontSize:"13px",fontWeight:"bold"},children:o?"処理中...":"登録へ"})]})]})},o=[{value:"有形資産_医療用機器備品",label:"医療用機器備品"},{value:"有形資産_器具備品",label:"器具備品"},{value:"有形資産_建物附属設備",label:"建物附属設備"},{value:"無形資産_ソフトウェア",label:"ソフトウェア"},{value:"費用_消耗品経費",label:"消耗品・経費"},{value:"長期前払費用_保守費",label:"保守費"}],n=["資本的支出","経費","前払費用"],l=({ocrResult:e,pdfFile:i,confirmedState:r,onConfirmedStateChange:l,onOcrResultChange:a,onBack:s,onNext:p})=>{let[x,c]=(0,d.useState)({quotationDate:e.quotationDate||"",quotationPhase:"定価",vendorName:e.vendorName||"",manufacturer:"",personInCharge:"",tel:"",email:""}),[g,h]=(0,d.useState)([]),[f,u]=(0,d.useState)("basic");(0,d.useEffect)(()=>{h(e.items.map((e,t)=>({id:t+1,itemName:e.itemName,manufacturer:e.manufacturer,model:e.model,quantity:e.quantity,unitPrice:e.purchasePriceUnit,totalPrice:e.purchasePriceTotal,category:e.assetCategory,accountingCategory:e.accountingCategory})))},[e]);let y=(0,d.useMemo)(()=>i?URL.createObjectURL(i):null,[i]);(0,d.useEffect)(()=>()=>{y&&URL.revokeObjectURL(y)},[y]);let b=(0,d.useMemo)(()=>g.reduce((e,t)=>e+(t.totalPrice||0),0),[g]),m=(e,t)=>{c(d=>({...d,[e]:t}))},j=(e,t,d)=>{h(i=>{let r=[...i];return r[e]={...r[e],[t]:d},r})},w=e=>!!(e&&""!==e.trim()),S={padding:"8px 10px",border:"1px solid #ddd",fontSize:"12px",verticalAlign:"middle"},v={...S,background:"#4a6fa5",color:"white",fontWeight:"bold",whiteSpace:"nowrap",width:"100px"},k={width:"100%",padding:"6px 8px",border:"1px solid #ddd",borderRadius:"3px",fontSize:"12px"},C=e=>({display:"inline-block",padding:"2px 8px",borderRadius:"3px",fontSize:"10px",fontWeight:"bold",background:e?"#27ae60":"#e74c3c",color:"white"});return(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,t.jsxs)("div",{style:{background:"#2c3e50",color:"white",padding:"10px 16px",marginBottom:"12px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,t.jsx)("span",{style:{fontSize:"14px",fontWeight:"bold"},children:"見積登録（購入）OCR明細確認"}),(0,t.jsx)("span",{style:{background:"#e74c3c",color:"white",padding:"2px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:"STEP 2"})]}),(0,t.jsx)("div",{style:{background:"#fff3cd",color:"#856404",padding:"4px 12px",borderRadius:"4px",fontSize:"11px"},children:"フリーでの見積登録と合格基本情報を登録 → 仮登録を通知に送信"})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"16px",flex:1,minHeight:0},children:[(0,t.jsxs)("div",{style:{flex:"0 0 55%",display:"flex",flexDirection:"column",border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden",background:"white"},children:[(0,t.jsxs)("div",{style:{display:"flex",borderBottom:"1px solid #ddd"},children:[(0,t.jsx)("button",{onClick:()=>u("basic"),style:{padding:"10px 24px",background:"basic"===f?"#4a6fa5":"#f5f5f5",color:"basic"===f?"white":"#333",border:"none",borderRight:"1px solid #ddd",cursor:"pointer",fontSize:"13px",fontWeight:"bold"},children:"基本情報"}),(0,t.jsx)("button",{onClick:()=>u("category"),style:{padding:"10px 24px",background:"category"===f?"#4a6fa5":"#f5f5f5",color:"category"===f?"white":"#333",border:"none",cursor:"pointer",fontSize:"13px",fontWeight:"bold"},children:"category"}),(0,t.jsx)("div",{style:{flex:1}}),(0,t.jsx)("button",{onClick:()=>u("category"),style:{padding:"10px 24px",background:"#f5f5f5",color:"#333",border:"none",borderLeft:"1px solid #ddd",cursor:"pointer",fontSize:"13px",fontWeight:"bold"},children:"OC/詳細情報"})]}),(0,t.jsxs)("div",{style:{flex:1,overflow:"auto",padding:"12px"},children:["basic"===f&&(0,t.jsxs)("div",{children:[(0,t.jsx)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"16px"},children:(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:v,children:"見積日付"}),(0,t.jsx)("td",{style:S,children:(0,t.jsx)("input",{type:"text",placeholder:"yyyy/mm/dd",value:x.quotationDate,onChange:e=>m("quotationDate",e.target.value),style:k})}),(0,t.jsx)("th",{style:v,children:"見積フェーズ"}),(0,t.jsx)("td",{style:S,children:(0,t.jsxs)("select",{value:x.quotationPhase,onChange:e=>m("quotationPhase",e.target.value),style:k,children:[(0,t.jsx)("option",{value:"定価",children:"定価"}),(0,t.jsx)("option",{value:"概算",children:"概算"}),(0,t.jsx)("option",{value:"最終原本登録用",children:"最終原本登録用"})]})}),(0,t.jsx)("td",{style:{...S,width:"60px",textAlign:"center"},children:(0,t.jsx)("span",{style:C(w(x.quotationDate)),children:w(x.quotationDate)?"入力済":"未入力"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:v,children:"販売店"}),(0,t.jsx)("td",{style:S,colSpan:3,children:(0,t.jsx)("input",{type:"text",placeholder:"報告会 入力済",value:x.vendorName,onChange:e=>m("vendorName",e.target.value),style:k})}),(0,t.jsx)("td",{style:{...S,width:"60px",textAlign:"center"},children:(0,t.jsx)("span",{style:C(w(x.vendorName)),children:w(x.vendorName)?"入力済":"未入力"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:v,children:"メーカー"}),(0,t.jsx)("td",{style:S,colSpan:3,children:(0,t.jsx)("input",{type:"text",value:x.manufacturer,onChange:e=>m("manufacturer",e.target.value),style:k})}),(0,t.jsx)("td",{style:{...S,width:"60px",textAlign:"center"},children:(0,t.jsx)("span",{style:C(w(x.manufacturer)),children:w(x.manufacturer)?"入力済":"未入力"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:v,children:"担当"}),(0,t.jsx)("td",{style:S,colSpan:3,children:(0,t.jsx)("input",{type:"text",value:x.personInCharge,onChange:e=>m("personInCharge",e.target.value),style:k})}),(0,t.jsx)("td",{style:{...S,width:"60px",textAlign:"center"},children:(0,t.jsx)("span",{style:C(w(x.personInCharge)),children:w(x.personInCharge)?"入力済":"未入力"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:v,children:"連絡先(TEL)"}),(0,t.jsx)("td",{style:S,colSpan:3,children:(0,t.jsx)("input",{type:"text",value:x.tel,onChange:e=>m("tel",e.target.value),style:k})}),(0,t.jsx)("td",{style:{...S,width:"60px",textAlign:"center"},children:(0,t.jsx)("span",{style:C(w(x.tel)),children:w(x.tel)?"入力済":"未入力"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:v,children:"連絡先(mail)"}),(0,t.jsx)("td",{style:S,colSpan:3,children:(0,t.jsx)("input",{type:"text",value:x.email,onChange:e=>m("email",e.target.value),style:k})}),(0,t.jsx)("td",{style:{...S,width:"60px",textAlign:"center"},children:(0,t.jsx)("span",{style:C(w(x.email)),children:w(x.email)?"入力済":"未入力"})})]})]})}),(0,t.jsx)("div",{style:{marginBottom:"16px"},children:(0,t.jsx)("button",{onClick:()=>{console.log("資産情報紐チェック実行")},style:{padding:"8px 20px",background:"#9b59b6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"資産情報紐チェック"})}),(0,t.jsx)("div",{style:{marginBottom:"16px"},children:(0,t.jsx)("div",{style:{maxHeight:"200px",overflow:"auto",border:"1px solid #ddd",borderRadius:"4px"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[(0,t.jsx)("thead",{style:{position:"sticky",top:0,background:"#f8f9fa"},children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{padding:"8px",textAlign:"left",borderBottom:"1px solid #ddd",whiteSpace:"nowrap"},children:"項目"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"right",borderBottom:"1px solid #ddd",whiteSpace:"nowrap"},children:"金額"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #ddd",whiteSpace:"nowrap"},children:"category"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"center",borderBottom:"1px solid #ddd",whiteSpace:"nowrap"},children:"会計区分"})]})}),(0,t.jsx)("tbody",{children:g.map((e,d)=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,t.jsxs)("td",{style:{padding:"6px 8px"},children:[(0,t.jsx)("div",{style:{fontWeight:"bold"},children:e.itemName}),(0,t.jsxs)("div",{style:{fontSize:"10px",color:"#666"},children:[e.manufacturer," ",e.model]})]}),(0,t.jsxs)("td",{style:{padding:"6px 8px",textAlign:"right",fontWeight:"bold",whiteSpace:"nowrap"},children:["¥",e.totalPrice.toLocaleString()]}),(0,t.jsx)("td",{style:{padding:"6px 8px"},children:(0,t.jsxs)("select",{value:e.category||"",onChange:e=>j(d,"category",e.target.value),style:{width:"100%",padding:"4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px"},children:[(0,t.jsx)("option",{value:"",children:"選択..."}),o.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]})}),(0,t.jsx)("td",{style:{padding:"6px 8px"},children:(0,t.jsxs)("select",{value:e.accountingCategory||"",onChange:e=>j(d,"accountingCategory",e.target.value),style:{width:"100%",padding:"4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px"},children:[(0,t.jsx)("option",{value:"",children:"選択..."}),n.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})})]},d))})]})})}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"12px",padding:"10px",background:"#f8f9fa",borderRadius:"4px",marginBottom:"16px"},children:[(0,t.jsx)("span",{style:{fontSize:"13px",fontWeight:"bold"},children:"合計金額（税抜）"}),(0,t.jsxs)("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#2c3e50"},children:["¥",b.toLocaleString()]})]})]}),"category"===f&&(0,t.jsx)("div",{children:(0,t.jsx)("div",{style:{fontSize:"12px",color:"#666",padding:"20px",textAlign:"center"},children:"category設定画面"})})]}),(0,t.jsxs)("div",{style:{padding:"12px",borderTop:"1px solid #ddd",background:"#fafafa",fontSize:"11px",color:"#666",lineHeight:1.8},children:[(0,t.jsx)("div",{children:"✓ 読み込んだ見積PDFファイルと相違ないか確認・修正を行って下さい"}),(0,t.jsx)("div",{children:"✓ 合計値が税抜か税込か確認して下さい"}),(0,t.jsx)("div",{style:{color:"#e74c3c",fontWeight:"bold"},children:"★ 全てのcategory、会計区分を登録して下さい"})]})]}),(0,t.jsxs)("div",{style:{flex:"0 0 43%",display:"flex",flexDirection:"column",border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden",background:"white"},children:[(0,t.jsx)("div",{style:{flex:1,position:"relative"},children:y?(0,t.jsx)("iframe",{src:y,style:{width:"100%",height:"100%",border:"none",background:"#f5f5f5"},title:"見積書PDF"}):(0,t.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",color:"#999",fontSize:"13px"},children:"PDFファイルがありません"})}),(0,t.jsx)("div",{style:{padding:"12px",borderTop:"1px solid #ddd",display:"flex",justifyContent:"flex-end"},children:(0,t.jsx)("button",{onClick:p,style:{padding:"10px 24px",background:"#e74c3c",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"bold"},children:"登録BOXへの仮登録へ"})})]})]}),(0,t.jsx)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-start",marginTop:"16px"},children:(0,t.jsx)("button",{onClick:s,style:{padding:"10px 24px",background:"#95a5a6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:"bold"},children:"戻る"})})]})},a={A_表紙明細:"A_表紙明細",B_明細代表:"B_明細代表",C_個体管理品目:"C_個体管理品目",D_付属品:"D_付属品・消耗品",E_その他役務:"E_その他役務",F_値引き:"F_値引き"},s={A_表紙明細:"見積書の表紙に記載される明細（通常は総額のみ）",B_明細代表:"複数品目をまとめた代表明細",C_個体管理品目:"QRラベル発行・除却が可能な個体管理対象品目",D_付属品:"本体に付属する部品・消耗品",E_その他役務:"工事・設置費・接続費・交通費など",F_値引き:"値引き明細"},p={A_表紙明細:{bg:"#e3f2fd",text:"#1565c0",border:"#90caf9"},B_明細代表:{bg:"#f3e5f5",text:"#7b1fa2",border:"#ce93d8"},C_個体管理品目:{bg:"#e8f5e9",text:"#2e7d32",border:"#a5d6a7"},D_付属品:{bg:"#fff3e0",text:"#ef6c00",border:"#ffcc80"},E_その他役務:{bg:"#fce4ec",text:"#c2185b",border:"#f48fb1"},F_値引き:{bg:"#ffebee",text:"#c62828",border:"#ef9a9a"}},x=({ocrResult:e,onOcrResultChange:i,onBack:r,onNext:o})=>{let[n,l]=(0,d.useState)(e.items.map((e,t)=>({index:t,originalItemType:e.itemType,currentItemType:e.itemType,isModified:!1}))),x=(0,d.useMemo)(()=>{let e={A_表紙明細:0,B_明細代表:0,C_個体管理品目:0,D_付属品:0,E_その他役務:0,F_値引き:0};return n.forEach(t=>{e[t.currentItemType]++}),e},[n]),c=x["C_個体管理品目"];return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{marginBottom:"16px",padding:"14px",background:"#e3f2fd",borderRadius:"6px",border:"1px solid #90caf9"},children:[(0,t.jsx)("div",{style:{fontSize:"14px",fontWeight:"bold",color:"#1565c0",marginBottom:"8px"},children:"① 登録区分をチェック・修正してください"}),(0,t.jsxs)("div",{style:{fontSize:"12px",color:"#555",lineHeight:1.6},children:["※ QRラベルを発行・除却が可能な単位にて登録を行います",(0,t.jsx)("br",{}),"※ C_個体管理品目の稼働の為の項目は一体として資産登録が前提です"]})]}),(0,t.jsx)("div",{style:{marginBottom:"16px",display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.keys(a).map(e=>{let d=p[e],i=x[e];return(0,t.jsxs)("div",{style:{padding:"6px 12px",background:d.bg,border:`1px solid ${d.border}`,borderRadius:"4px",fontSize:"11px",color:d.text,fontWeight:"bold"},children:[a[e],": ",i,"件"]},e)})}),(0,t.jsxs)("div",{style:{marginBottom:"16px",padding:"10px",background:"#fafafa",borderRadius:"4px",fontSize:"10px"},children:[(0,t.jsx)("div",{style:{fontWeight:"bold",marginBottom:"6px",color:"#555"},children:"■ 登録区分について"}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"4px"},children:Object.keys(s).map(e=>(0,t.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,t.jsx)("span",{style:{display:"inline-block",padding:"2px 6px",background:p[e].bg,color:p[e].text,borderRadius:"3px",fontSize:"9px",fontWeight:"bold",minWidth:"100px"},children:a[e].split("_")[0]}),(0,t.jsx)("span",{style:{color:"#666"},children:s[e]})]},e))})]}),(0,t.jsx)("div",{style:{marginBottom:"16px",border:"1px solid #ddd",borderRadius:"6px",overflow:"hidden"},children:(0,t.jsx)("div",{style:{maxHeight:"400px",overflow:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[(0,t.jsx)("thead",{style:{position:"sticky",top:0,background:"#f8f9fa",zIndex:2},children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{padding:"8px",textAlign:"center",borderBottom:"2px solid #dee2e6",width:"40px"},children:"No"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"left",borderBottom:"2px solid #dee2e6",minWidth:"150px"},children:"品名"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"left",borderBottom:"2px solid #dee2e6",width:"100px"},children:"メーカー"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"left",borderBottom:"2px solid #dee2e6",width:"100px"},children:"型式"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"center",borderBottom:"2px solid #dee2e6",width:"50px"},children:"数量"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"right",borderBottom:"2px solid #dee2e6",width:"100px"},children:"購入金額"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"center",borderBottom:"2px solid #dee2e6",width:"100px",background:"#e8f5e9"},children:"AI判定"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"center",borderBottom:"2px solid #dee2e6",width:"150px",background:"#fff3e0"},children:"登録区分"})]})}),(0,t.jsx)("tbody",{children:e.items.map((e,d)=>{let i=n[d],r=p[i.currentItemType];return(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #eee",background:i.isModified?"#fff8e1":"transparent"},children:[(0,t.jsx)("td",{style:{padding:"6px",textAlign:"center"},children:e.rowNo||d+1}),(0,t.jsx)("td",{style:{padding:"6px",fontWeight:"bold"},children:e.itemName}),(0,t.jsx)("td",{style:{padding:"6px",color:"#555"},children:e.manufacturer||"-"}),(0,t.jsx)("td",{style:{padding:"6px",color:"#555"},children:e.model||"-"}),(0,t.jsx)("td",{style:{padding:"6px",textAlign:"center"},children:e.quantity}),(0,t.jsxs)("td",{style:{padding:"6px",textAlign:"right",fontWeight:"bold"},children:["¥",e.purchasePriceTotal.toLocaleString()]}),(0,t.jsx)("td",{style:{padding:"6px",textAlign:"center"},children:(0,t.jsx)("span",{style:{display:"inline-block",padding:"3px 8px",background:p[i.originalItemType].bg,color:p[i.originalItemType].text,borderRadius:"3px",fontSize:"10px",fontWeight:"bold"},children:a[i.originalItemType].split("_")[0]})}),(0,t.jsx)("td",{style:{padding:"6px",textAlign:"center"},children:(0,t.jsx)("select",{value:i.currentItemType,onChange:e=>{var t;return t=e.target.value,void l(e=>e.map(e=>e.index===d?{...e,currentItemType:t,isModified:t!==e.originalItemType}:e))},style:{width:"100%",padding:"4px",fontSize:"10px",border:`2px solid ${r.border}`,borderRadius:"4px",background:r.bg,color:r.text,fontWeight:"bold",cursor:"pointer"},children:Object.keys(a).map(e=>(0,t.jsx)("option",{value:e,children:a[e]},e))})})]},d)})})]})})}),(0,t.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",background:"#f3e5f5",borderRadius:"6px",border:"1px solid #ce93d8"},children:[(0,t.jsxs)("div",{style:{fontSize:"13px",fontWeight:"bold",color:"#7b1fa2",marginBottom:"4px"},children:["次のステップ：個体管理品目のAI判定（",c,"件）"]}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#555"},children:"C_個体管理品目に分類された明細について、資産Masterとの紐付けを行います"})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[(0,t.jsx)("button",{onClick:r,style:{padding:"10px 24px",background:"#95a5a6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"戻る"}),(0,t.jsx)("button",{onClick:()=>{let t=e.items.map((e,t)=>({...e,itemType:n[t].currentItemType}));i({...e,items:t}),o()},style:{padding:"10px 24px",background:"#9c27b0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"次へ（個体管理品目AI判定）"})]})]})};e.i(47167);let c=({ocrResult:e,confirmedState:i,onConfirmedStateChange:r,onBack:o,onNext:n})=>{let l=(0,d.useMemo)(()=>e.items.map((e,t)=>({item:e,index:t})).filter(({item:e})=>"C_個体管理品目"===e.itemType),[e.items]),[a,s]=(0,d.useState)(null),p=(0,d.useCallback)(e=>{if(e.origin===window.location.origin&&e.data?.type==="ASSET_MASTER_SELECTED"&&null!==a){let t=e.data.data,d=`${a}`;r({...i,[d]:{status:"asset_master_selected",assetInfo:t}}),s(null)}},[a,i,r]);(0,d.useEffect)(()=>(window.addEventListener("message",p),()=>{window.removeEventListener("message",p)}),[p]);let x=e=>i[`${e}`]||null,c=(0,d.useMemo)(()=>l.filter(({index:e})=>null!==x(e)).length,[l,i]);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{marginBottom:"16px",padding:"14px",background:"#f3e5f5",borderRadius:"6px",border:"1px solid #ce93d8"},children:[(0,t.jsx)("div",{style:{fontSize:"14px",fontWeight:"bold",color:"#7b1fa2",marginBottom:"8px"},children:"② 個体管理品目のAI判定を実施し確認・修正を実施してください"}),(0,t.jsxs)("div",{style:{fontSize:"12px",color:"#555",lineHeight:1.6},children:["・不適格な場合は資産Masterから選択が可能です",(0,t.jsx)("br",{}),"・IDの登録により耐用年数、推奨使用年数、添付文書などの情報が登録できます"]})]}),(0,t.jsxs)("div",{style:{marginBottom:"16px",display:"flex",gap:"16px",alignItems:"center"},children:[(0,t.jsxs)("div",{style:{padding:"8px 16px",background:"#e8f5e9",border:"1px solid #a5d6a7",borderRadius:"4px",fontSize:"13px",fontWeight:"bold",color:"#2e7d32"},children:["個体管理品目: ",l.length,"件"]}),(0,t.jsxs)("div",{style:{padding:"8px 16px",background:c===l.length?"#c8e6c9":"#fff3e0",border:`1px solid ${c===l.length?"#a5d6a7":"#ffcc80"}`,borderRadius:"4px",fontSize:"13px",fontWeight:"bold",color:c===l.length?"#2e7d32":"#ef6c00"},children:["紐付け済み: ",c,"/",l.length,"件"]}),(0,t.jsx)("button",{onClick:()=>{window.open("/medical-device-mgmt/ship-asset-master","_blank","width=1200,height=800")},style:{padding:"8px 16px",background:"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"資産Masterを開く"})]}),(0,t.jsx)("div",{style:{marginBottom:"16px",border:"1px solid #ddd",borderRadius:"6px",overflow:"hidden"},children:(0,t.jsx)("div",{style:{maxHeight:"450px",overflow:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",minWidth:"1100px"},children:[(0,t.jsxs)("thead",{style:{position:"sticky",top:0,zIndex:2},children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{colSpan:5,style:{padding:"6px",textAlign:"center",borderBottom:"2px solid #3498db",fontWeight:"bold",color:"#3498db",background:"#e8f4fc",fontSize:"11px"},children:"元明細（原本情報）"}),(0,t.jsx)("th",{style:{padding:"6px",background:"#f8f9fa",width:"25px"},children:"⇒"}),(0,t.jsx)("th",{colSpan:6,style:{padding:"6px",textAlign:"center",borderBottom:"2px solid #9c27b0",fontWeight:"bold",color:"#9c27b0",background:"#f3e5f5",fontSize:"11px"},children:"個体品目のAI判定"}),(0,t.jsx)("th",{style:{padding:"6px",background:"#f8f9fa",width:"150px",fontSize:"11px"},children:"操作"})]}),(0,t.jsxs)("tr",{style:{background:"#f8f9fa"},children:[(0,t.jsx)("th",{style:{padding:"5px",textAlign:"center",borderBottom:"1px solid #dee2e6",width:"30px",fontSize:"9px"},children:"No"}),(0,t.jsx)("th",{style:{padding:"5px",textAlign:"left",borderBottom:"1px solid #dee2e6",fontSize:"9px"},children:"品名"}),(0,t.jsx)("th",{style:{padding:"5px",textAlign:"left",borderBottom:"1px solid #dee2e6",width:"80px",fontSize:"9px"},children:"メーカー"}),(0,t.jsx)("th",{style:{padding:"5px",textAlign:"left",borderBottom:"1px solid #dee2e6",width:"80px",fontSize:"9px"},children:"型式"}),(0,t.jsx)("th",{style:{padding:"5px",textAlign:"center",borderBottom:"1px solid #dee2e6",width:"40px",fontSize:"9px"},children:"数量"}),(0,t.jsx)("th",{style:{padding:"5px",background:"#fafafa"}}),(0,t.jsx)("th",{style:{padding:"5px",textAlign:"left",borderBottom:"1px solid #dee2e6",width:"70px",fontSize:"9px",background:"#faf5fc"},children:"category"}),(0,t.jsx)("th",{style:{padding:"5px",textAlign:"left",borderBottom:"1px solid #dee2e6",width:"90px",fontSize:"9px",background:"#faf5fc"},children:"大分類"}),(0,t.jsx)("th",{style:{padding:"5px",textAlign:"left",borderBottom:"1px solid #dee2e6",width:"80px",fontSize:"9px",background:"#faf5fc"},children:"中分類"}),(0,t.jsx)("th",{style:{padding:"5px",textAlign:"left",borderBottom:"1px solid #dee2e6",fontSize:"9px",background:"#faf5fc"},children:"個体管理品目"}),(0,t.jsx)("th",{style:{padding:"5px",textAlign:"left",borderBottom:"1px solid #dee2e6",width:"70px",fontSize:"9px",background:"#faf5fc"},children:"メーカー"}),(0,t.jsx)("th",{style:{padding:"5px",textAlign:"left",borderBottom:"1px solid #dee2e6",width:"70px",fontSize:"9px",background:"#faf5fc"},children:"型式"}),(0,t.jsx)("th",{style:{padding:"5px",borderBottom:"1px solid #dee2e6"}})]})]}),(0,t.jsx)("tbody",{children:l.map(({item:e,index:d})=>{let o=x(d),n=null!==o,l=a===d,p=e.aiJudgments[0]||null,c=o?.assetInfo||p;return(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #ddd",background:l?"#fff3e0":n?"#e8f5e9":"transparent"},children:[(0,t.jsx)("td",{style:{padding:"5px",textAlign:"center"},children:e.rowNo||"-"}),(0,t.jsx)("td",{style:{padding:"5px",fontWeight:"bold"},title:e.itemName,children:e.itemName}),(0,t.jsx)("td",{style:{padding:"5px",color:"#555"},children:e.manufacturer||"-"}),(0,t.jsx)("td",{style:{padding:"5px",color:"#555"},children:e.model||"-"}),(0,t.jsx)("td",{style:{padding:"5px",textAlign:"center"},children:e.quantity}),(0,t.jsx)("td",{style:{padding:"5px",textAlign:"center",background:"#fafafa"},children:"⇒"}),(0,t.jsx)("td",{style:{padding:"5px",background:n?"#c8e6c9":"#fdfaff",fontSize:"9px"},children:c&&"category"in c?c.category:"-"}),(0,t.jsx)("td",{style:{padding:"5px",background:n?"#c8e6c9":"#fdfaff",fontSize:"9px"},children:c&&"majorCategory"in c?c.majorCategory:"-"}),(0,t.jsx)("td",{style:{padding:"5px",background:n?"#c8e6c9":"#fdfaff",fontSize:"9px"},children:c&&"middleCategory"in c?c.middleCategory:"-"}),(0,t.jsx)("td",{style:{padding:"5px",background:n?"#c8e6c9":"#fdfaff",fontWeight:"bold"},children:c?.assetName||"-"}),(0,t.jsx)("td",{style:{padding:"5px",background:n?"#c8e6c9":"#fdfaff",color:"#555",fontSize:"9px"},children:c?.manufacturer||"-"}),(0,t.jsx)("td",{style:{padding:"5px",background:n?"#c8e6c9":"#fdfaff",color:"#555",fontSize:"9px"},children:c?.model||"-"}),(0,t.jsx)("td",{style:{padding:"5px",textAlign:"center"},children:n?(0,t.jsxs)("div",{style:{display:"flex",gap:"4px",justifyContent:"center",alignItems:"center"},children:[(0,t.jsx)("span",{style:{display:"inline-block",padding:"3px 6px",background:o?.status==="asset_master_selected"?"#1976d2":"#27ae60",color:"white",borderRadius:"3px",fontSize:"8px",fontWeight:"bold"},children:o?.status==="asset_master_selected"?"紐付済":"AI適用"}),(0,t.jsx)("button",{onClick:()=>{let e,t;return e=`${d}`,t={...i},void(delete t[e],r(t))},style:{padding:"3px 5px",background:"#e74c3c",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"8px",fontWeight:"bold"},children:"解除"})]}):l?(0,t.jsx)("span",{style:{display:"inline-block",padding:"3px 8px",background:"#ff9800",color:"white",borderRadius:"3px",fontSize:"8px",fontWeight:"bold"},children:"選択中..."}):(0,t.jsxs)("div",{style:{display:"flex",gap:"3px",justifyContent:"center"},children:[p&&(0,t.jsx)("button",{onClick:()=>{let e;return e=`${d}`,void r({...i,[e]:{status:"ai_confirmed",assetInfo:{category:p.category,majorCategory:p.majorCategory,middleCategory:p.middleCategory,assetName:p.assetName,manufacturer:p.manufacturer,model:p.model}}})},style:{padding:"3px 5px",background:"#ff9800",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"8px",fontWeight:"bold"},children:"AI適用"}),(0,t.jsx)("button",{onClick:()=>(s(d),void window.open("/medical-device-mgmt/ship-asset-master?mode=select","_blank","width=1200,height=800")),style:{padding:"3px 5px",background:"#1976d2",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"8px",fontWeight:"bold"},children:"マスタ選択"})]})})]},d)})})]})})}),0===l.length&&(0,t.jsx)("div",{style:{marginBottom:"16px",padding:"20px",textAlign:"center",background:"#f5f5f5",borderRadius:"6px",color:"#666"},children:"個体管理品目がありません。次のステップへ進んでください。"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[(0,t.jsx)("button",{onClick:o,style:{padding:"10px 24px",background:"#95a5a6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"戻る"}),(0,t.jsx)("button",{onClick:n,style:{padding:"10px 24px",background:"#27ae60",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"次へ（金額案分・登録確定）"})]})]})},g={A_表紙明細:"A",B_明細代表:"B",C_個体管理品目:"C",D_付属品:"D",E_その他役務:"E",F_値引き:"F"},h={A_表紙明細:{bg:"#e3f2fd",text:"#1565c0"},B_明細代表:{bg:"#f3e5f5",text:"#7b1fa2"},C_個体管理品目:{bg:"#e8f5e9",text:"#2e7d32"},D_付属品:{bg:"#fff3e0",text:"#ef6c00"},E_その他役務:{bg:"#fce4ec",text:"#c2185b"},F_値引き:{bg:"#ffebee",text:"#c62828"}},f=["資本的支出","経費","前払費用"],u=({ocrResult:e,confirmedState:i,onSubmit:r,onBack:o})=>{let[n,l]=(0,d.useState)(()=>e.items.map((e,t)=>({index:t,itemType:e.itemType,itemName:e.itemName,manufacturer:e.manufacturer,model:e.model,originalQuantity:e.quantity,originalPrice:e.purchasePriceTotal,allocatedQuantity:"C_個体管理品目"===e.itemType?1:e.quantity,allocatedPrice:e.purchasePriceTotal,accountingCategory:"",parentIndex:null}))),a=(0,d.useMemo)(()=>n.filter(e=>"C_個体管理品目"===e.itemType),[n]),s=(0,d.useMemo)(()=>n.reduce((e,t)=>e+t.allocatedPrice,0),[n]),p=e.totalAmount,x=s-p,c=(e,t,d)=>{l(i=>i.map(i=>i.index===e?{...i,[t]:d}:i))};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{marginBottom:"16px",padding:"14px",background:"#e8f5e9",borderRadius:"6px",border:"1px solid #a5d6a7"},children:[(0,t.jsx)("div",{style:{fontSize:"14px",fontWeight:"bold",color:"#2e7d32",marginBottom:"8px"},children:"個体登録及び金額案分"}),(0,t.jsxs)("div",{style:{fontSize:"12px",color:"#555",lineHeight:1.6},children:["・個体管理品目に価格を案分登録してください",(0,t.jsx)("br",{}),"・本体は数量を1にて登録されます（C_個体管理品目）",(0,t.jsx)("br",{}),"・会計計上区分（資本的支出／経費／前払費用）を選択してください"]})]}),(0,t.jsxs)("div",{style:{marginBottom:"16px",display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[(0,t.jsxs)("div",{style:{padding:"8px 16px",background:"#e3f2fd",border:"1px solid #90caf9",borderRadius:"4px",fontSize:"13px"},children:[(0,t.jsx)("strong",{children:"見積総額:"})," ¥",p.toLocaleString()]}),(0,t.jsxs)("div",{style:{padding:"8px 16px",background:"#fff3e0",border:"1px solid #ffcc80",borderRadius:"4px",fontSize:"13px"},children:[(0,t.jsx)("strong",{children:"案分合計:"})," ¥",s.toLocaleString()]}),(0,t.jsxs)("div",{style:{padding:"8px 16px",background:0===x?"#e8f5e9":"#ffebee",border:`1px solid ${0===x?"#a5d6a7":"#ef9a9a"}`,borderRadius:"4px",fontSize:"13px",fontWeight:"bold",color:0===x?"#2e7d32":"#c62828"},children:["差額: ¥",x.toLocaleString(),0===x&&" ✓"]}),(0,t.jsx)("button",{onClick:()=>{let e=n.filter(e=>"C_個体管理品目"===e.itemType);if(0===e.length)return;let t=Math.floor(p/e.length),d=p-t*e.length;l(i=>i.map((i,r)=>{if("C_個体管理品目"===i.itemType){let r=e.findIndex(e=>e.index===i.index);return{...i,allocatedPrice:t+(0===r?d:0)}}return{...i,allocatedPrice:0}}))},style:{padding:"8px 16px",background:"#9c27b0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"均等案分"})]}),(0,t.jsx)("div",{style:{marginBottom:"16px",border:"1px solid #ddd",borderRadius:"6px",overflow:"hidden"},children:(0,t.jsx)("div",{style:{maxHeight:"400px",overflow:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[(0,t.jsx)("thead",{style:{position:"sticky",top:0,background:"#f8f9fa",zIndex:2},children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{padding:"8px",textAlign:"center",borderBottom:"2px solid #dee2e6",width:"50px"},children:"区分"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"left",borderBottom:"2px solid #dee2e6",minWidth:"150px"},children:"品名"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"center",borderBottom:"2px solid #dee2e6",width:"50px"},children:"原数量"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"right",borderBottom:"2px solid #dee2e6",width:"100px"},children:"原価格"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"center",borderBottom:"2px solid #dee2e6",width:"60px",background:"#fff3e0"},children:"案分数量"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"right",borderBottom:"2px solid #dee2e6",width:"120px",background:"#fff3e0"},children:"案分金額"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"center",borderBottom:"2px solid #dee2e6",width:"120px",background:"#e3f2fd"},children:"会計区分"}),(0,t.jsx)("th",{style:{padding:"8px",textAlign:"center",borderBottom:"2px solid #dee2e6",width:"120px"},children:"親品目"})]})}),(0,t.jsx)("tbody",{children:n.map(e=>{let d=h[e.itemType],i="C_個体管理品目"===e.itemType;return(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #eee",background:i?"#f8fff8":"transparent"},children:[(0,t.jsx)("td",{style:{padding:"6px",textAlign:"center"},children:(0,t.jsx)("span",{style:{display:"inline-block",padding:"2px 8px",background:d.bg,color:d.text,borderRadius:"3px",fontSize:"10px",fontWeight:"bold"},children:g[e.itemType]})}),(0,t.jsx)("td",{style:{padding:"6px",fontWeight:i?"bold":"normal"},children:e.itemName}),(0,t.jsx)("td",{style:{padding:"6px",textAlign:"center",color:"#666"},children:e.originalQuantity}),(0,t.jsxs)("td",{style:{padding:"6px",textAlign:"right",color:"#666"},children:["¥",e.originalPrice.toLocaleString()]}),(0,t.jsx)("td",{style:{padding:"6px",textAlign:"center",background:"#fffaf0"},children:(0,t.jsx)("input",{type:"number",value:e.allocatedQuantity,onChange:t=>c(e.index,"allocatedQuantity",parseInt(t.target.value)||0),disabled:i,style:{width:"50px",padding:"3px",fontSize:"11px",textAlign:"center",border:"1px solid #ddd",borderRadius:"3px",background:i?"#f5f5f5":"white"}})}),(0,t.jsx)("td",{style:{padding:"6px",textAlign:"right",background:"#fffaf0"},children:(0,t.jsx)("input",{type:"number",value:e.allocatedPrice,onChange:t=>c(e.index,"allocatedPrice",parseInt(t.target.value)||0),style:{width:"100px",padding:"3px",fontSize:"11px",textAlign:"right",border:"1px solid #ddd",borderRadius:"3px"}})}),(0,t.jsx)("td",{style:{padding:"6px",textAlign:"center",background:"#f5f9ff"},children:(0,t.jsxs)("select",{value:e.accountingCategory,onChange:t=>c(e.index,"accountingCategory",t.target.value),style:{width:"100%",padding:"4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px"},children:[(0,t.jsx)("option",{value:"",children:"選択..."}),f.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})}),(0,t.jsx)("td",{style:{padding:"6px",textAlign:"center"},children:"D_付属品"===e.itemType?(0,t.jsxs)("select",{value:e.parentIndex??"",onChange:t=>c(e.index,"parentIndex",t.target.value?parseInt(t.target.value):null),style:{width:"100%",padding:"4px",fontSize:"10px",border:"1px solid #ddd",borderRadius:"3px"},children:[(0,t.jsx)("option",{value:"",children:"なし"}),a.map(e=>(0,t.jsxs)("option",{value:e.index,children:[e.itemName.substring(0,15),"..."]},e.index))]}):(0,t.jsx)("span",{style:{color:"#ccc"},children:"-"})})]},e.index)})})]})})}),(0,t.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",background:"#f5f5f5",borderRadius:"6px"},children:[(0,t.jsx)("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#555",marginBottom:"8px"},children:"登録後に実行可能なアクション"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(0,t.jsx)("span",{style:{padding:"4px 8px",background:"#e3f2fd",borderRadius:"3px",fontSize:"11px"},children:"テンプレート発行（発注書・検収書）"}),(0,t.jsx)("span",{style:{padding:"4px 8px",background:"#e8f5e9",borderRadius:"3px",fontSize:"11px"},children:"QRコード発行画面へ遷移"}),(0,t.jsx)("span",{style:{padding:"4px 8px",background:"#fff3e0",borderRadius:"3px",fontSize:"11px"},children:"ドキュメント追加登録"})]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[(0,t.jsx)("button",{onClick:o,style:{padding:"10px 24px",background:"#95a5a6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"戻る"}),(0,t.jsx)("button",{onClick:r,disabled:0!==x,style:{padding:"10px 24px",background:0!==x?"#bdc3c7":"#27ae60",color:"white",border:"none",borderRadius:"4px",cursor:0!==x?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:"登録確定"})]})]})},y={1:"PDF取込",2:"OCR明細確認",3:"登録区分AI判定",4:"個体管理品目AI判定",5:"金額案分・登録"};e.s(["QuotationRegistrationModal",0,({show:e,step:i,rfqGroups:o,assetMasterData:n,applications:a,formData:s,ocrProcessing:p,ocrResult:g,onFormDataChange:h,onPdfUpload:f,onGenerateTestOCR:b,onStepChange:m,onCreateApplication:j,onSubmit:w,onClose:S})=>{let[v,k]=(0,d.useState)({}),[C,z]=(0,d.useState)(null),R=C||g,T=(0,d.useCallback)(e=>{k(e)},[]),A=(0,d.useCallback)(e=>{z(e)},[]),_=(0,d.useCallback)(()=>{R&&w(v,R)},[v,R,w]);return e?(s.rfqGroupId&&o.find(e=>e.id.toString()===s.rfqGroupId),(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:S,children:(0,t.jsxs)("div",{style:{background:"white",borderRadius:"8px",padding:"30px",minWidth:"600px",maxWidth:"95%",width:i>=2?"1400px":void 0,maxHeight:"92vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("h2",{style:{margin:"0 0 12px 0",fontSize:"20px",fontWeight:"bold",color:"#2c3e50"},children:"見積登録（購入）"}),(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[1,2,3,4,5].map(e=>(0,t.jsxs)(d.default.Fragment,{children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"4px",background:i===e?"#3498db":i>e?"#27ae60":"#ecf0f1",color:i>=e?"white":"#95a5a6",fontSize:"11px",fontWeight:i===e?"bold":"normal"},children:[(0,t.jsx)("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"18px",height:"18px",borderRadius:"50%",background:i>=e?"rgba(255,255,255,0.3)":"#bdc3c7",fontSize:"10px",fontWeight:"bold"},children:i>e?"✓":e}),y[e]]}),e<5&&(0,t.jsx)("div",{style:{width:"20px",height:"2px",background:i>e?"#27ae60":"#ddd"}})]},e))})]}),1===i&&(0,t.jsx)(r,{rfqGroups:o,formData:s,ocrProcessing:p,onFormDataChange:h,onPdfUpload:f,onGenerateTestOCR:b,onCancel:S}),2===i&&R&&(0,t.jsx)(l,{ocrResult:R,pdfFile:s.pdfFile,confirmedState:v,onConfirmedStateChange:T,onOcrResultChange:A,onBack:()=>m(1),onNext:()=>m(3)}),3===i&&R&&(0,t.jsx)(x,{ocrResult:R,onOcrResultChange:A,onBack:()=>m(2),onNext:()=>m(4)}),4===i&&R&&(0,t.jsx)(c,{ocrResult:R,confirmedState:v,onConfirmedStateChange:T,onBack:()=>m(3),onNext:()=>m(5)}),5===i&&R&&(0,t.jsx)(u,{ocrResult:R,confirmedState:v,onBack:()=>m(4),onSubmit:_})]})})):null}],23408)}]);