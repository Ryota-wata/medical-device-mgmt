import { create } from 'zustand';
import { FacilityMaster, AssetMaster, DepartmentMaster } from '@/lib/types/master';

interface MasterStore {
  facilities: FacilityMaster[];
  assets: AssetMaster[];
  departments: DepartmentMaster[];

  // Facility actions
  setFacilities: (facilities: FacilityMaster[]) => void;
  addFacility: (facility: FacilityMaster) => void;
  updateFacility: (id: string, facility: Partial<FacilityMaster>) => void;
  deleteFacility: (id: string) => void;
  getFacilityById: (id: string) => FacilityMaster | undefined;

  // Asset actions
  setAssets: (assets: AssetMaster[]) => void;
  addAsset: (asset: AssetMaster) => void;
  updateAsset: (id: string, asset: Partial<AssetMaster>) => void;
  deleteAsset: (id: string) => void;
  getAssetById: (id: string) => AssetMaster | undefined;

  // Department actions
  setDepartments: (departments: DepartmentMaster[]) => void;
  addDepartment: (department: DepartmentMaster) => void;
  updateDepartment: (id: string, department: Partial<DepartmentMaster>) => void;
  deleteDepartment: (id: string) => void;
  getDepartmentById: (id: string) => DepartmentMaster | undefined;

  // Search functions
  searchFacilities: (query: string) => FacilityMaster[];
  searchAssets: (query: string) => AssetMaster[];
  searchDepartments: (query: string) => DepartmentMaster[];
}

// サンプル施設マスタデータ（20件）
const initialFacilities: FacilityMaster[] = [
  {
    id: 'FAC001',
    facilityCode: 'FAC001',
    facilityName: '東京総合病院',
    building: '本館',
    floor: '3F',
    department: '外科',
    section: '手術室',
    prefecture: '東京都',
    foundingBody: '国立',
    city: '新宿区',
    address: '西新宿1-1-1',
    postalCode: '160-0023',
    phoneNumber: '03-1234-5678',
    establishedDate: '2000-04-01',
    facilityType: '総合病院',
    bedCount: 500,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC002',
    facilityCode: 'FAC002',
    facilityName: '横浜医療センター',
    building: '東館',
    floor: '2F',
    department: '内科',
    section: '診察室',
    prefecture: '神奈川県',
    foundingBody: '公立',
    city: '横浜市',
    address: '中区本町1-1',
    postalCode: '231-0005',
    phoneNumber: '045-1234-5678',
    establishedDate: '2005-06-15',
    facilityType: '医療センター',
    bedCount: 300,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC003',
    facilityCode: 'FAC003',
    facilityName: '大阪クリニック',
    building: '別館',
    floor: '1F',
    department: '小児科',
    section: '受付',
    prefecture: '大阪府',
    foundingBody: '医療法人',
    city: '大阪市',
    address: '北区梅田1-1-1',
    postalCode: '530-0001',
    phoneNumber: '06-1234-5678',
    establishedDate: '2010-03-20',
    facilityType: 'クリニック',
    bedCount: 50,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC004',
    facilityCode: 'FAC004',
    facilityName: '名古屋中央病院',
    building: '新館',
    floor: '5F',
    department: '整形外科',
    section: 'リハビリ室',
    prefecture: '愛知県',
    foundingBody: '国立',
    city: '名古屋市',
    address: '中区栄1-1-1',
    postalCode: '460-0008',
    phoneNumber: '052-1234-5678',
    establishedDate: '1998-09-10',
    facilityType: '総合病院',
    bedCount: 400,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC005',
    facilityCode: 'FAC005',
    facilityName: '福岡市民病院',
    building: '本館',
    floor: '4F',
    department: '循環器科',
    section: '検査室',
    prefecture: '福岡県',
    foundingBody: '公立',
    city: '福岡市',
    address: '博多区博多駅前1-1',
    postalCode: '812-0011',
    phoneNumber: '092-1234-5678',
    establishedDate: '2002-11-05',
    facilityType: '市民病院',
    bedCount: 350,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC006',
    facilityCode: 'FAC006',
    facilityName: '札幌記念病院',
    prefecture: '北海道',
    foundingBody: '医療法人',
    city: '札幌市',
    address: '中央区北1条西1-1',
    postalCode: '060-0001',
    phoneNumber: '011-1234-5678',
    establishedDate: '2008-07-12',
    facilityType: '記念病院',
    bedCount: 250,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC007',
    facilityCode: 'FAC007',
    facilityName: '仙台総合医療センター',
    prefecture: '宮城県',
    foundingBody: '公立',
    city: '仙台市',
    address: '青葉区中央1-1-1',
    postalCode: '980-0021',
    phoneNumber: '022-1234-5678',
    establishedDate: '2003-05-18',
    facilityType: '医療センター',
    bedCount: 450,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC008',
    facilityCode: 'FAC008',
    facilityName: '神戸中央クリニック',
    prefecture: '兵庫県',
    foundingBody: '医療法人',
    city: '神戸市',
    address: '中央区三宮町1-1-1',
    postalCode: '650-0021',
    phoneNumber: '078-1234-5678',
    establishedDate: '2012-02-28',
    facilityType: 'クリニック',
    bedCount: 30,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC009',
    facilityCode: 'FAC009',
    facilityName: '京都大学病院',
    prefecture: '京都府',
    foundingBody: '国立',
    city: '京都市',
    address: '左京区聖護院川原町54',
    postalCode: '606-8507',
    phoneNumber: '075-1234-5678',
    establishedDate: '1899-05-01',
    facilityType: '大学病院',
    bedCount: 1000,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC010',
    facilityCode: 'FAC010',
    facilityName: '広島県立病院',
    prefecture: '広島県',
    foundingBody: '公立',
    city: '広島市',
    address: '中区基町1-1',
    postalCode: '730-0011',
    phoneNumber: '082-1234-5678',
    establishedDate: '1995-08-22',
    facilityType: '県立病院',
    bedCount: 600,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC011',
    facilityCode: 'FAC011',
    facilityName: '千葉メディカルセンター',
    prefecture: '千葉県',
    foundingBody: '公立',
    city: '千葉市',
    address: '中央区新町1-1',
    postalCode: '260-0028',
    phoneNumber: '043-1234-5678',
    establishedDate: '2007-04-10',
    facilityType: '医療センター',
    bedCount: 320,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC012',
    facilityCode: 'FAC012',
    facilityName: '埼玉協同病院',
    prefecture: '埼玉県',
    foundingBody: '医療法人',
    city: 'さいたま市',
    address: '浦和区高砂1-1-1',
    postalCode: '330-0063',
    phoneNumber: '048-1234-5678',
    establishedDate: '2001-12-01',
    facilityType: '協同病院',
    bedCount: 280,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC013',
    facilityCode: 'FAC013',
    facilityName: '静岡県総合病院',
    prefecture: '静岡県',
    foundingBody: '公立',
    city: '静岡市',
    address: '葵区呉服町1-1',
    postalCode: '420-0031',
    phoneNumber: '054-1234-5678',
    establishedDate: '1997-06-15',
    facilityType: '総合病院',
    bedCount: 520,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC014',
    facilityCode: 'FAC014',
    facilityName: '岡山中央医療センター',
    prefecture: '岡山県',
    foundingBody: '国立',
    city: '岡山市',
    address: '北区大供1-1-1',
    postalCode: '700-0913',
    phoneNumber: '086-1234-5678',
    establishedDate: '2009-09-30',
    facilityType: '医療センター',
    bedCount: 380,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC015',
    facilityCode: 'FAC015',
    facilityName: '熊本赤十字病院',
    prefecture: '熊本県',
    foundingBody: '日本赤十字社',
    city: '熊本市',
    address: '中央区水前寺1-1-1',
    postalCode: '862-0950',
    phoneNumber: '096-1234-5678',
    establishedDate: '1920-03-01',
    facilityType: '赤十字病院',
    bedCount: 700,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC016',
    facilityCode: 'FAC016',
    facilityName: '鹿児島市立病院',
    prefecture: '鹿児島県',
    foundingBody: '公立',
    city: '鹿児島市',
    address: '中央町1-1',
    postalCode: '890-0053',
    phoneNumber: '099-1234-5678',
    establishedDate: '2004-10-12',
    facilityType: '市立病院',
    bedCount: 360,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC017',
    facilityCode: 'FAC017',
    facilityName: '新潟大学医歯学総合病院',
    prefecture: '新潟県',
    foundingBody: '国立',
    city: '新潟市',
    address: '中央区旭町通1-1',
    postalCode: '951-8520',
    phoneNumber: '025-1234-5678',
    establishedDate: '1910-07-01',
    facilityType: '大学病院',
    bedCount: 800,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC018',
    facilityCode: 'FAC018',
    facilityName: '金沢医療センター',
    prefecture: '石川県',
    foundingBody: '国立',
    city: '金沢市',
    address: '香林坊1-1-1',
    postalCode: '920-0981',
    phoneNumber: '076-1234-5678',
    establishedDate: '2006-11-20',
    facilityType: '医療センター',
    bedCount: 290,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC019',
    facilityCode: 'FAC019',
    facilityName: '長野県立こども病院',
    prefecture: '長野県',
    foundingBody: '公立',
    city: '長野市',
    address: '善光寺1-1-1',
    postalCode: '380-0851',
    phoneNumber: '026-1234-5678',
    establishedDate: '2013-04-05',
    facilityType: 'こども病院',
    bedCount: 200,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'FAC020',
    facilityCode: 'FAC020',
    facilityName: '沖縄総合病院',
    prefecture: '沖縄県',
    foundingBody: '公立',
    city: '那覇市',
    address: '久茂地1-1-1',
    postalCode: '900-0015',
    phoneNumber: '098-1234-5678',
    establishedDate: '2011-08-15',
    facilityType: '総合病院',
    bedCount: 420,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
];

// サンプル資産マスタデータ（20件）
const initialAssets: AssetMaster[] = [
  {
    id: 'ASSET001',
    category: '医療機器',
    largeClass: '手術関連機器',
    mediumClass: '電気メス 双極',
    item: '電気手術器',
    maker: 'オリンパス',
    model: 'ESG-400',
    specification: '出力300W、双極対応',
    unitPrice: 2500000,
    depreciationYears: 8,
    maintenanceCycle: 12,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET002',
    category: '医療機器',
    largeClass: '画像診断機器',
    mediumClass: 'CT関連',
    item: 'CTスキャナー',
    maker: 'シーメンス',
    model: 'SOMATOM Drive',
    specification: '128スライス、3D再構成',
    unitPrice: 150000000,
    depreciationYears: 10,
    maintenanceCycle: 6,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET003',
    category: '医療機器',
    largeClass: '画像診断機器',
    mediumClass: 'MRI関連',
    item: 'MRI装置',
    maker: 'GEヘルスケア',
    model: 'SIGNA Explorer',
    specification: '1.5T、高速撮像対応',
    unitPrice: 200000000,
    depreciationYears: 10,
    maintenanceCycle: 6,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET004',
    category: '医療機器',
    largeClass: '検査機器',
    mediumClass: '超音波診断装置',
    item: 'エコー装置',
    maker: '東芝メディカル',
    model: 'Aplio i800',
    specification: 'カラードプラ、4Dイメージング',
    unitPrice: 15000000,
    depreciationYears: 7,
    maintenanceCycle: 12,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET005',
    category: '医療機器',
    largeClass: '手術関連機器',
    mediumClass: '内視鏡関連',
    item: '内視鏡システム',
    maker: 'オリンパス',
    model: 'EVIS X1',
    specification: 'HD画質、NBI対応',
    unitPrice: 8000000,
    depreciationYears: 8,
    maintenanceCycle: 12,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET006',
    category: '医療機器',
    largeClass: '検査機器',
    mediumClass: '生化学分析装置',
    item: '自動分析装置',
    maker: '日立ハイテク',
    model: 'LABOSPECT 008α',
    specification: '800テスト/時、24時間稼働',
    unitPrice: 35000000,
    depreciationYears: 8,
    maintenanceCycle: 6,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET007',
    category: '医療機器',
    largeClass: '人工呼吸器',
    mediumClass: '集中治療用',
    item: '人工呼吸器',
    maker: 'フィリップス',
    model: 'V680',
    specification: 'インテリジェント換気、NIV対応',
    unitPrice: 4500000,
    depreciationYears: 7,
    maintenanceCycle: 12,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET008',
    category: '医療機器',
    largeClass: '透析関連機器',
    mediumClass: '血液透析装置',
    item: '個人用透析装置',
    maker: '日機装',
    model: 'DCS-200Si',
    specification: 'オンラインHDF対応',
    unitPrice: 6500000,
    depreciationYears: 8,
    maintenanceCycle: 6,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET009',
    category: '什器備品',
    largeClass: '病室用備品',
    mediumClass: '電動ベッド',
    item: '医療用電動ベッド',
    maker: 'パラマウントベッド',
    model: 'KA-7000',
    specification: '3モーター、背上げ・膝上げ・高さ調整',
    unitPrice: 450000,
    depreciationYears: 5,
    maintenanceCycle: 24,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET010',
    category: '什器備品',
    largeClass: '手術室備品',
    mediumClass: '手術台',
    item: '電動手術台',
    maker: 'マッケ',
    model: 'Alphamaxx',
    specification: '電動昇降、傾斜機能',
    unitPrice: 8500000,
    depreciationYears: 10,
    maintenanceCycle: 12,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET011',
    category: '医療機器',
    largeClass: '滅菌機器',
    mediumClass: '高圧蒸気滅菌器',
    item: 'オートクレーブ',
    maker: 'サクラ精機',
    model: 'SG-750',
    specification: '容量750L、真空乾燥機能',
    unitPrice: 12000000,
    depreciationYears: 10,
    maintenanceCycle: 12,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET012',
    category: '事務機器',
    largeClass: 'IT機器',
    mediumClass: 'パソコン',
    item: 'デスクトップPC',
    maker: 'NEC',
    model: 'Mate MK36L/E-J',
    specification: 'Core i5、8GB RAM、256GB SSD',
    unitPrice: 120000,
    depreciationYears: 4,
    maintenanceCycle: 36,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET013',
    category: '事務機器',
    largeClass: 'OA機器',
    mediumClass: '複合機',
    item: 'カラー複合機',
    maker: 'リコー',
    model: 'IM C6000',
    specification: 'コピー・プリント・スキャン、60枚/分',
    unitPrice: 1800000,
    depreciationYears: 5,
    maintenanceCycle: 12,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET014',
    category: '医療機器',
    largeClass: '画像診断機器',
    mediumClass: 'X線撮影装置',
    item: 'デジタルX線撮影装置',
    maker: '富士フイルム',
    model: 'CALNEO Smart C47',
    specification: 'FPD搭載、無線通信',
    unitPrice: 25000000,
    depreciationYears: 8,
    maintenanceCycle: 12,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET015',
    category: '医療機器',
    largeClass: '検査機器',
    mediumClass: '心電計',
    item: '12誘導心電計',
    maker: '日本光電',
    model: 'ECG-2550',
    specification: '自動解析機能、ネットワーク対応',
    unitPrice: 850000,
    depreciationYears: 6,
    maintenanceCycle: 12,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET016',
    category: '医療機器',
    largeClass: '手術関連機器',
    mediumClass: '麻酔器',
    item: '麻酔ワークステーション',
    maker: 'ドレーゲル',
    model: 'Fabius MRI',
    specification: 'MRI対応、電子ガス流量計',
    unitPrice: 18000000,
    depreciationYears: 10,
    maintenanceCycle: 6,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET017',
    category: '什器備品',
    largeClass: '搬送機器',
    mediumClass: 'ストレッチャー',
    item: '電動ストレッチャー',
    maker: 'ストライカー',
    model: 'Prime X',
    specification: '電動昇降、X線透過天板',
    unitPrice: 950000,
    depreciationYears: 5,
    maintenanceCycle: 12,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET018',
    category: '医療機器',
    largeClass: '検査機器',
    mediumClass: '血球計数器',
    item: '自動血球計数器',
    maker: 'シスメックス',
    model: 'XN-1000',
    specification: '100検体/時、5分類',
    unitPrice: 12500000,
    depreciationYears: 7,
    maintenanceCycle: 6,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET019',
    category: '医療機器',
    largeClass: 'リハビリ機器',
    mediumClass: '電気刺激装置',
    item: '低周波治療器',
    maker: 'オージー技研',
    model: 'EU-910',
    specification: '干渉波・TENS・EMS対応',
    unitPrice: 380000,
    depreciationYears: 6,
    maintenanceCycle: 24,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'ASSET020',
    category: '什器備品',
    largeClass: '保管機器',
    mediumClass: '医療用冷蔵庫',
    item: '薬品用冷蔵ショーケース',
    maker: 'パナソニック',
    model: 'MPR-514',
    specification: '容量500L、温度記録機能',
    unitPrice: 650000,
    depreciationYears: 8,
    maintenanceCycle: 12,
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
];

// サンプル部署マスタデータ
const initialDepartments: DepartmentMaster[] = [
  {
    id: 'DEPT001',
    division: '診療部門',
    department: '外科',
    roomCategory1: '手術室',
    roomCategory2: 'オペ室1',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT002',
    division: '診療部門',
    department: '外科',
    roomCategory1: '手術室',
    roomCategory2: 'オペ室2',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT003',
    division: '診療部門',
    department: '内科',
    roomCategory1: '診察室',
    roomCategory2: '診察室A',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT004',
    division: '診療部門',
    department: '内科',
    roomCategory1: '診察室',
    roomCategory2: '診察室B',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT005',
    division: '診療部門',
    department: '小児科',
    roomCategory1: '診察室',
    roomCategory2: '小児診察室',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT006',
    division: '看護部門',
    department: '病棟',
    roomCategory1: '一般病棟',
    roomCategory2: '3階東病棟',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT007',
    division: '看護部門',
    department: '病棟',
    roomCategory1: '一般病棟',
    roomCategory2: '3階西病棟',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT008',
    division: '看護部門',
    department: '病棟',
    roomCategory1: 'ICU',
    roomCategory2: 'ICU-1',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT009',
    division: '検査部門',
    department: '検査科',
    roomCategory1: '検体検査室',
    roomCategory2: '生化学検査室',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT010',
    division: '検査部門',
    department: '検査科',
    roomCategory1: '検体検査室',
    roomCategory2: '血液検査室',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT011',
    division: '検査部門',
    department: '放射線科',
    roomCategory1: 'CT室',
    roomCategory2: 'CT室1',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT012',
    division: '検査部門',
    department: '放射線科',
    roomCategory1: 'MRI室',
    roomCategory2: 'MRI室1',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT013',
    division: 'リハビリ部門',
    department: 'リハビリテーション科',
    roomCategory1: '理学療法室',
    roomCategory2: 'PT室',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT014',
    division: 'リハビリ部門',
    department: 'リハビリテーション科',
    roomCategory1: '作業療法室',
    roomCategory2: 'OT室',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
  {
    id: 'DEPT015',
    division: '管理部門',
    department: '事務局',
    roomCategory1: '事務室',
    roomCategory2: '総務課',
    status: 'active',
    createdAt: '2025-01-01T00:00:00Z',
    updatedAt: '2025-01-01T00:00:00Z',
  },
];

export const useMasterStore = create<MasterStore>((set, get) => ({
  facilities: initialFacilities,
  assets: initialAssets,
  departments: initialDepartments,

  // Facility actions
  setFacilities: (facilities) => set({ facilities }),

  addFacility: (facility) => set((state) => ({
    facilities: [...state.facilities, facility]
  })),

  updateFacility: (id, facility) => set((state) => ({
    facilities: state.facilities.map((f) =>
      f.id === id ? { ...f, ...facility, updatedAt: new Date().toISOString() } : f
    )
  })),

  deleteFacility: (id) => set((state) => ({
    facilities: state.facilities.filter((f) => f.id !== id)
  })),

  getFacilityById: (id) => {
    return get().facilities.find((f) => f.id === id);
  },

  // Asset actions
  setAssets: (assets) => set({ assets }),

  addAsset: (asset) => set((state) => ({
    assets: [...state.assets, asset]
  })),

  updateAsset: (id, asset) => set((state) => ({
    assets: state.assets.map((a) =>
      a.id === id ? { ...a, ...asset, updatedAt: new Date().toISOString() } : a
    )
  })),

  deleteAsset: (id) => set((state) => ({
    assets: state.assets.filter((a) => a.id !== id)
  })),

  getAssetById: (id) => {
    return get().assets.find((a) => a.id === id);
  },

  // Search functions (fuzzy search)
  searchFacilities: (query) => {
    const facilities = get().facilities;
    if (!query) return facilities;

    const lowerQuery = query.toLowerCase();
    return facilities.filter((f) =>
      f.facilityCode.toLowerCase().includes(lowerQuery) ||
      f.facilityName.toLowerCase().includes(lowerQuery) ||
      f.prefecture.toLowerCase().includes(lowerQuery) ||
      f.city.toLowerCase().includes(lowerQuery)
    );
  },

  searchAssets: (query) => {
    const assets = get().assets;
    if (!query) return assets;

    const lowerQuery = query.toLowerCase();
    return assets.filter((a) =>
      a.category.toLowerCase().includes(lowerQuery) ||
      a.largeClass.toLowerCase().includes(lowerQuery) ||
      a.mediumClass.toLowerCase().includes(lowerQuery) ||
      a.item.toLowerCase().includes(lowerQuery) ||
      a.maker.toLowerCase().includes(lowerQuery) ||
      a.model.toLowerCase().includes(lowerQuery)
    );
  },

  // Department actions
  setDepartments: (departments) => set({ departments }),

  addDepartment: (department) => set((state) => ({
    departments: [...state.departments, department]
  })),

  updateDepartment: (id, department) => set((state) => ({
    departments: state.departments.map((d) =>
      d.id === id ? { ...d, ...department, updatedAt: new Date().toISOString() } : d
    )
  })),

  deleteDepartment: (id) => set((state) => ({
    departments: state.departments.filter((d) => d.id !== id)
  })),

  getDepartmentById: (id) => {
    return get().departments.find((d) => d.id === id);
  },

  searchDepartments: (query) => {
    const departments = get().departments;
    if (!query) return departments;

    const lowerQuery = query.toLowerCase();
    return departments.filter((d) =>
      d.division.toLowerCase().includes(lowerQuery) ||
      d.department.toLowerCase().includes(lowerQuery) ||
      d.roomCategory1.toLowerCase().includes(lowerQuery) ||
      d.roomCategory2.toLowerCase().includes(lowerQuery)
    );
  },
}));
