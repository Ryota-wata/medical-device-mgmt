# 第12章：チーム開発での活用

## 12.1 複数人での利用方法

### 基本方針

Claude Codeは個人のローカル環境で動作するため、チーム開発では以下の方針で運用します。

```
┌─────────────┐      ┌─────────────┐
│ メンバーA   │      │ メンバーB   │
│ Claude Code │      │ Claude Code │
└──────┬──────┘      └──────┬──────┘
       │                    │
       ▼                    ▼
┌─────────────────────────────────────┐
│         GitHub リポジトリ           │
│    (CLAUDE.md, Skill.md 共有)       │
└─────────────────────────────────────┘
```

### 役割分担の例

| 役割 | 担当作業 | Claude Code活用場面 |
|------|---------|-------------------|
| リード | 全体設計、CLAUDE.md管理 | 設計ドキュメント生成 |
| メンバーA | 画面モック作成（認証系） | 画面実装 |
| メンバーB | 画面モック作成（機能系） | 画面実装 |
| レビュアー | 品質レビュー | Skillによるレビュー |

---

### ブランチ戦略

```
main（本番相当）
  │
  ├── develop（開発統合）
  │     │
  │     ├── feature/login（ログイン画面）
  │     ├── feature/main（メイン画面）
  │     └── feature/asset-list（資産一覧画面）
  │
  └── hotfix/xxx（緊急修正）
```

**ブランチ運用ルール**：

| ブランチ | 用途 | マージ先 |
|---------|------|---------|
| main | 顧客提示版 | - |
| develop | 開発統合 | main |
| feature/* | 機能開発 | develop |
| hotfix/* | 緊急修正 | main, develop |

---

### 並行作業の進め方

```bash
# メンバーA: ログイン画面担当
git checkout -b feature/login
cd project
claude
# → 「ログイン画面を作成して」

# メンバーB: メイン画面担当
git checkout -b feature/main
cd project
claude
# → 「メイン画面を作成して」
```

**コンフリクト防止のポイント**：
- 担当画面を明確に分ける
- 共通コンポーネントは早期に作成・共有
- 頻繁にdevelopブランチをマージ

---

## 12.2 成果物の共有方法

### GitHub Pages経由の共有

モックはGitHub Pagesで公開し、URLを共有します。

```
https://[org-name].github.io/[repo-name]/
```

**メリット**：
- 環境構築不要で閲覧可能
- 常に最新版を確認できる
- スマホ/タブレットからも確認可能

---

### 共有用URLの通知テンプレート

```
【モック更新のお知らせ】

更新日時: 2025/01/20 15:00
更新者: 田中

■ 更新内容
- ログイン画面を追加
- メイン画面のレイアウトを修正

■ 確認URL
https://xxx.github.io/medical-device-mgmt/

■ 確認してほしい点
- ログイン画面のデザイン
- メイン画面のボタン配置

■ フィードバック方法
- GitHub Issues または Slack で連絡ください
```

---

### 設計ドキュメントの共有

```
docs/
├── design/
│   ├── screen-list.md         # 画面一覧
│   ├── screen-transition.md   # 画面遷移図
│   └── screen-specs/          # 画面設計書
│       ├── scr-001-login.md
│       ├── scr-002-main.md
│       └── ...
└── requirements/
    └── requirements.md        # 要件定義書
```

---

## 12.3 レビュープロセス

### プルリクエストベースのレビュー

```
1. feature ブランチで作業
      ↓
2. PR作成（レビュー依頼）
      ↓
3. レビュー実施
      ↓
4. 修正・再レビュー
      ↓
5. Approve → マージ
```

### PRテンプレート

```markdown
## 概要
<!-- 何を実装/修正したか -->

## 変更内容
- [ ] 画面モック: [画面名]
- [ ] コンポーネント: [コンポーネント名]
- [ ] ドキュメント: [ドキュメント名]

## スクリーンショット
<!-- モックのスクリーンショットを添付 -->

## 確認してほしい点
<!-- 特にレビューしてほしい箇所 -->

## 関連Issue
<!-- 関連するIssue番号 -->
```

---

### レビュー観点チェックリスト

```markdown
## レビューチェックリスト

### 機能
- [ ] 要件通りの動作をするか
- [ ] 画面遷移は正しいか
- [ ] エラー処理は適切か

### UI/UX
- [ ] CLAUDE.mdのルールに準拠しているか
- [ ] レスポンシブ対応できているか
- [ ] 操作性に問題はないか

### コード品質
- [ ] コードは読みやすいか
- [ ] 重複はないか
- [ ] 命名は適切か

### ドキュメント
- [ ] 画面設計書は更新されているか
- [ ] 画面一覧は更新されているか
```

---

### Claude Codeを使ったレビュー支援

```
[ファイルパス]をレビューして。

【レビュー観点】
- CLAUDE.mdのルールへの準拠
- レスポンシブ対応
- アクセシビリティ

問題があれば指摘して。
```

または

```
/ui-skills [ファイルパス]
```

---

## 12.4 ナレッジの蓄積

### ナレッジ蓄積の流れ

```
問題発生 → 解決 → ルール化 → CLAUDE.md/Skill.mdに追加
                      ↓
              チーム全体で共有
```

---

### 蓄積すべきナレッジ

| カテゴリ | 内容 | 蓄積先 |
|---------|------|--------|
| コーディング規約 | 命名規則、実装パターン | CLAUDE.md |
| UI/UXルール | デザイン原則、操作性 | Skill.md |
| トラブル対応 | エラーと解決策 | docs/troubleshooting.md |
| 効果的なプロンプト | 再利用可能なプロンプト | docs/prompts.md |

---

### CLAUDE.mdの共同編集

CLAUDE.mdはチームで共同編集します。

**編集ルール**：
1. 変更前にチームに相談
2. PRでレビューを受ける
3. 変更理由をコミットメッセージに記載

**変更履歴の管理**：
```markdown
<!-- CLAUDE.md の末尾に記載 -->

## 変更履歴

| 日付 | 変更者 | 内容 |
|------|--------|------|
| 2025/01/15 | 田中 | 初版作成 |
| 2025/01/20 | 鈴木 | UIルール追加 |
| 2025/01/25 | 田中 | レイアウトルール修正 |
```

---

### 定期的な振り返り

週次または隔週で以下を振り返ります：

```markdown
## 振り返りアジェンダ

### 1. 今週の成果
- 完成した画面
- 作成したドキュメント

### 2. 発生した問題と解決策
- 問題: [内容]
- 解決: [対応内容]
- ルール化: [要否]

### 3. 改善提案
- CLAUDE.mdへの追加
- Skillの新規作成
- プロセスの改善

### 4. 来週の予定
- 担当画面の割り当て
- レビュー予定
```

---

## 12.5 コスト管理（チーム）

### チームでのコスト把握

各メンバーが `/cost` で自分の使用量を確認し、週次で集計します。

```markdown
## 週次コストレポート

| メンバー | 今週のコスト | 累計 | 備考 |
|---------|-------------|------|------|
| 田中 | $15.20 | $45.60 | 画面モック5画面 |
| 鈴木 | $12.30 | $38.90 | 画面モック4画面 |
| 合計 | $27.50 | $84.50 | - |
```

### コスト最適化のためのルール

1. **CLAUDE.mdの充実**
   - 共通ルールを文書化し、毎回の説明を省略

2. **プロンプトテンプレートの共有**
   - 効果的なプロンプトをチームで共有

3. **スコープの明確化**
   - 1回の作業で扱う範囲を限定

4. **レビュー効率化**
   - Skillを活用した自動レビュー
