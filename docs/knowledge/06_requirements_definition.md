# 第6章：要件定義の進め方

## 6.1 要件定義の全体フロー

### 生成ドキュメントの連鎖

要件定義では、前のステップで生成したドキュメントを基に次のドキュメントを生成します。

```
PJ概要インプット（第5章）
        ↓
┌───────────────────┐
│ ユーザー一覧生成  │ ← 「ユーザーの種別を洗い出して」
└───────────────────┘
        ↓
┌───────────────────┐
│ ユースケース生成  │ ← 「生成したユーザー一覧から、ユースケースを作成して」
└───────────────────┘
        ↓
┌───────────────────┐
│ 機能一覧生成      │ ← 「生成したユースケースから、機能一覧を作成して」
└───────────────────┘
        ↓
┌───────────────────┐
│ 画面一覧生成      │ ← 「生成した機能一覧から、必要な画面一覧を作成して」
└───────────────────┘
        ↓
画面設計へ（第7章）
```

### 成果物一覧

| 成果物 | 説明 | 次ステップでの用途 |
|-------|------|------------------|
| ユーザー一覧 | システム利用者の種別と役割 | ユースケースのアクター定義 |
| ユースケース一覧 | ユーザーがシステムで行う操作 | 機能の洗い出し |
| 機能一覧 | システムが提供する機能 | 画面の洗い出し |
| 画面一覧 | 必要な画面とその概要 | 画面モック作成 |

---

## 6.2 Step 1: ユーザー一覧の生成

### プロンプト

```
このシステムを使うユーザーの種別を洗い出して。

【出力形式】
| ユーザー種別 | 役割 | 主な利用シーン | 利用頻度 |
```

### 出力例

```markdown
| ユーザー種別 | 役割 | 主な利用シーン | 利用頻度 |
|-------------|------|---------------|---------|
| 病院管理者 | 全体の資産状況把握、レポート確認 | 経営判断、監査対応 | 週次 |
| 医療機器担当者 | 機器の登録・変更・修理依頼 | 日常の機器管理業務 | 毎日 |
| 現場スタッフ | 棚卸実施、機器の所在確認 | 定期棚卸、機器探索 | 月次〜随時 |
| 外部修理業者 | 修理依頼の確認、作業報告 | 修理対応時 | 随時 |
```

### 確認・修正プロンプト

```
生成したユーザー一覧を確認した。
[ユーザー種別] を追加して。役割は [役割] 。
```

---

## 6.3 Step 2: ユースケース一覧の生成

### プロンプト

```
生成したユーザー一覧から、ユースケースを作成して。

【出力形式】
| UC-ID | ユースケース名 | アクター | 概要 |
```

### 出力例

```markdown
| UC-ID | ユースケース名 | アクター | 概要 |
|-------|---------------|---------|------|
| UC-001 | ログインする | 全ユーザー | システムにログインする |
| UC-002 | 資産を検索する | 全ユーザー | 条件を指定して資産を検索する |
| UC-003 | 資産を登録する | 医療機器担当者 | 新規資産を登録する |
| UC-004 | 資産情報を編集する | 医療機器担当者 | 既存資産の情報を変更する |
| UC-005 | QRコードを発行する | 医療機器担当者 | 資産用QRラベルを発行する |
| UC-006 | 棚卸を実施する | 現場スタッフ | QRスキャンで棚卸を行う |
| UC-007 | 修理を依頼する | 医療機器担当者 | 故障機器の修理を依頼する |
| UC-008 | 修理状況を更新する | 外部修理業者 | 担当修理案件の状況を報告する |
| UC-009 | レポートを出力する | 病院管理者 | 資産状況レポートを出力する |
```

### 確認・修正プロンプト

```
生成したユースケース一覧に以下を追加して。
- [追加したいユースケース]
```

---

## 6.4 Step 3: 機能一覧の生成

### プロンプト

```
生成したユースケースから、機能一覧を作成して。

【整理方針】
- 大機能→中機能→小機能の階層構造
- 優先度（高/中/低）を付与
- CRUD（作成/参照/更新/削除）を明示
```

### 出力例

```markdown
## 機能一覧

### 1. 認証・認可（優先度：高）
- 1.1 ログイン [R]
- 1.2 ログアウト [-]
- 1.3 パスワード変更 [U]

### 2. 資産管理（優先度：高）
- 2.1 資産検索 [R]
  - 2.1.1 条件検索
  - 2.1.2 一覧表示
  - 2.1.3 詳細表示
- 2.2 資産登録・編集
  - 2.2.1 新規登録 [C]
  - 2.2.2 情報編集 [U]
  - 2.2.3 廃棄登録 [U]

### 3. QRコード管理（優先度：中）
- 3.1 QR発行 [C]
- 3.2 QR再発行 [C]
- 3.3 QR印刷 [R]

### 4. 棚卸（優先度：高）
- 4.1 棚卸準備 [C]
- 4.2 QRスキャン [U]
- 4.3 棚卸結果確認 [R]
- 4.4 差異報告 [R]

### 5. 修理管理（優先度：中）
- 5.1 修理依頼 [C]
- 5.2 修理ステータス更新 [U]
- 5.3 修理履歴参照 [R]

### 6. レポート（優先度：低）
- 6.1 資産一覧出力 [R]
- 6.2 棚卸結果出力 [R]
- 6.3 修理履歴出力 [R]
```

### 確認・修正プロンプト

```
生成した機能一覧の優先度を見直して。
[機能名] は優先度を [高/中/低] に変更して。
```

---

## 6.5 Step 4: 画面一覧の生成

### プロンプト

```
生成した機能一覧から、必要な画面一覧を作成して。

【出力形式】
| 画面ID | 画面名 | 概要 | 対応機能 | 対応デバイス |
```

### 出力例

```markdown
| 画面ID | 画面名 | 概要 | 対応機能 | 対応デバイス |
|--------|--------|------|---------|-------------|
| SCR-001 | ログイン | ログイン画面 | 1.1 | PC/タブレット/スマホ |
| SCR-002 | メイン | ログイン後のトップ画面 | - | PC/タブレット |
| SCR-003 | 資産検索 | 資産の検索・一覧表示 | 2.1 | PC/タブレット |
| SCR-004 | 資産詳細 | 個別資産の詳細情報 | 2.1.3 | PC/タブレット/スマホ |
| SCR-005 | 資産登録・編集 | 資産情報の入力 | 2.2 | PC/タブレット |
| SCR-006 | QR発行 | QRラベル発行 | 3.1, 3.2 | PC |
| SCR-007 | QR印刷 | QRラベル印刷プレビュー | 3.3 | PC |
| SCR-008 | 棚卸準備 | 棚卸対象の選択 | 4.1 | PC/タブレット |
| SCR-009 | 棚卸実施 | QRスキャン・棚卸入力 | 4.2 | タブレット/スマホ |
| SCR-010 | 棚卸結果 | 棚卸結果の確認 | 4.3, 4.4 | PC/タブレット |
| SCR-011 | 修理依頼 | 修理依頼の入力 | 5.1 | PC/タブレット |
| SCR-012 | 修理一覧 | 修理案件の一覧 | 5.2, 5.3 | PC/タブレット |
```

### 画面グループ化プロンプト

```
生成した画面一覧を、ユーザー種別ごとにグループ化して。
どのユーザーがどの画面を使うか整理して。
```

---

## 6.6 非機能要件の整理

### プロンプト

```
このシステムの非機能要件を整理して。

【整理観点】
- 可用性（稼働時間、障害復旧）
- 性能（レスポンス、同時接続数）
- セキュリティ（認証、権限、監査）
```

### 出力例

```markdown
## 非機能要件

### 可用性
| 項目 | 要件 |
|------|------|
| 稼働時間 | 平日 8:00-20:00 |
| 計画停止 | 月1回、深夜帯 |

### 性能
| 項目 | 要件 |
|------|------|
| レスポンス | 3秒以内 |
| 同時接続数 | 50ユーザー |

### セキュリティ
| 項目 | 要件 |
|------|------|
| 認証 | ID/パスワード |
| セッション | 30分でタイムアウト |
```

---

## 6.7 要件定義書の生成

### プロンプト

```
ここまで生成した内容を要件定義書としてまとめて。
docs/requirements.md に出力して。
```

### 確認プロンプト

```
生成した要件定義書を確認して。
不足している項目があれば指摘して。
```

---

## 6.8 次ステップへの移行

### 画面設計への移行プロンプト

要件定義が完了したら、第7章（画面設計）へ進みます。

```
要件定義はOK。
生成した画面一覧の SCR-001 ログイン画面 から
モック作成を始めて。
```

> **ポイント**: 画面一覧の画面IDを指定することで、
> どの画面から作成を始めるか明確に指示できます。

### 優先度順での作成指示

```
生成した画面一覧から、優先度「高」の機能に対応する画面を
優先的に作成して。作成順序を提案して。
```
