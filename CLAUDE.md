# 医療機器管理システム - 画面モック

Next.js App Router + Zustand で構築する業務システムの画面モックプロジェクト。

## モック実装ルール

画面を実装・修正する際は、以下の制約を常に守ること。
詳細なレビューが必要な場合は各Skillを明示的に呼び出す（例: `app/order/page.tsx をUI Skillsでレビューして`）。

---

## 1. UI（`.claude/skills/ui-skills/`）

### コンポーネント・インタラクション
- アイコンのみボタンには `aria-label` 必須
- 破壊的アクションには `AlertDialog` を使用
- `h-screen` 禁止 → `h-dvh` を使用
- エラーはアクション発生箇所の近くに表示
- `input` / `textarea` でペーストをブロックしない

### タイポグラフィ
- データ値には `tabular-nums`
- 見出しに `text-balance`、本文に `text-pretty`

### パフォーマンス
- レンダーロジックで表現できるものに `useEffect` を使わない

### デザイン
- 明示的な要求なしにグラデーション・グロー効果を追加しない
- 空の状態には明確な次アクションを1つ提示
- z-index は固定スケールを使用（任意値禁止）

### UX
- タッチターゲットは最低 44x44px
- フォーム送信後は成功/失敗フィードバックを即座に表示
- ボタンクリック後はローディング状態を表示
- 必須項目には `*` または「必須」ラベル
- 削除操作には確認ダイアログ（対象を明記）
- 1画面の主要CTA は3つ以下
- フォームリセットボタンを送信ボタンの隣に配置しない
- 処理完了後にフィードバックなしで画面遷移しない

### インタラクション要素の使い分け
- **ボタン（button）**: 登録・保存・画面遷移・実行など「アクション」のみに使用
- **ラジオボタン（radio）**: 単一選択の「選択肢」に使用
- **チェックボックス（checkbox）**: 複数選択可能な「選択肢」または ON/OFF 切り替えに使用
- 選択肢をボタンのように見せるスタイル（タブ風ボタンなど）は禁止

---

## 2. レイアウト（`.claude/skills/layout-skills/`）

### 入力幅
- 入力欄の幅は期待データ長に合わせる（郵便番号: 100px / 電話: 150px / メール: 280px / 日付: 150-180px / 数値: 60-80px）
- `width: 100%` や `1fr` は `max-width` なしで使わない
- すべての入力欄を同じ幅にしない

### グリッド・フレックス
- `1fr` には `max-width` を併用
- `auto 1fr auto 1fr` のような自動伸長カラムをフォーム入力に使わない

### スペーシング
- 8px の倍数を使用（4px は微調整のみ許容）
- 余白の階層: セクション間(32-48px) > グループ間(16-24px) > 項目間(8-16px) > ラベルと入力間(4-8px)

### 密度
- 1行の入力項目は3つ以下
- ラベル配置はセクション内で統一（上配置/左配置を混在させない）

### グルーピング
- 関連する入力項目はグループ化（視覚的区切りまたは近接配置）
- 論理的に無関係な項目を同じ行に配置しない

### テーブル
- 金額・数量カラムは右寄せ + `tabular-nums`

---

## 3. デザイン品質（`.claude/skills/design-quality-skills/`）

### 色
- 全色をトークンとして事前定義（場当たり的なHEX値禁止）
- 通常テキストのコントラスト比 4.5:1 以上（WCAG AA）
- 大テキスト・UIコンポーネントは 3:1 以上
- 純粋な黒 `#000000` 禁止 → ニアブラック（`#111827` 等）を使用

### タイポグラフィ
- フォントサイズは定義済みスケールから選択: 12, 14, 16, 18, 20, 24, 30, 36, 48, 60, 72px
- ウェイト 400 未満禁止（重要度を下げるには色を薄くする）
- ウェイトは最大3種（400, 500-600, 700）

### シャドウ・border-radius
- 定義済みスケールから選択（アドホック値禁止）
- border-radius スケール: 0, 2, 4, 8, 12, 16, 9999px
- ネストされた要素: 内側radius = 外側radius - gap

### 視覚的ヒエラルキー
- ボタン階層: Primary（塗りつぶし）/ Secondary（アウトライン）/ Tertiary（テキストのみ）

### 一貫性
- ホバー・フォーカス・無効状態の変化ルールを全コンポーネントで統一
- 2つ以上のハードな区切り（ボーダー+背景色変更等）を隣接させない

---

## 4. UXフロー（`.claude/skills/ux-flow-skills/`）

### アクション配置・タイミング
- Primary CTA は1画面に1つ
- アクションは意味を持つタイミングでのみ表示（未登録データの「出力」ボタン等は不可）
- 登録フローの順序: 入力 → 確認 → 登録 → 完了 → 後続アクション
- 登録前の画面に登録後のアクションを配置しない
- ボタンラベルは具体的な動詞にする（「OK」「はい」禁止）

### プログレッシブ・ディスクロージャー
- 初期画面にはコア機能のみ表示
- 条件付き項目（リース関連等）はトリガー選択時のみ表示

### タスク完了後
- 完了画面は「次に何をすべきか」を必ず示す
- 完了確認は何が起きたかを要約する（単なる「成功！」は不可）
- 完了画面をチェックマークだけで終わらせない

### 確認パターン
- 確認ダイアログは重大かつ不可逆な操作にのみ使用
- 確認ラベルは結果を要約（「レコードを削除」等）。「はい」/「いいえ」禁止
- フォームに「リセット」ボタンを配置しない

### 状態遷移
- すべてのデータビューに3状態を設計: 空 / アクティブ / 完了
- 空の状態には説明 + ガイド + CTA を含める
- データなし時に説明なしの白画面を表示しない

### 認知負荷
- 情報は5-7個にチャンク化（Miller の法則）
- マルチステップにはプログレスインジケーター必須

---

## 5. データソース

### 資産検索
- プルダウン・曖昧検索での資産検索は必ず **マスタデータ（Zustand Store）** から取得する
- コンポーネント内に独自の `MOCK_ASSETS_*` 定数を定義しない
- 検索対象データは `useMasterStore()` の `assets` または `facilities` を使用
- 検索フィルターのオプション生成もマスタデータから動的に取得する

---

## 6. タスク実行ルール

### 指示の解釈
- **「把握しろ」「理解しろ」** → ユーザーが提供した情報を整理して確認するだけ。ファイル調査は不要
- **「改修しろ」「実装しろ」** → このタイミングでファイルを読み、実装に着手する
- ユーザーが既に要件を説明している場合、それを繰り返し調査しない

### 長時間タスクの回避
- 1つの指示で複数ステップが必要な場合、**まずタスクをブレイクダウンして提案**する
- 各ステップは独立して完了可能な単位に分割する
- ユーザーの承認を得てから順番に着手する

### 禁止事項
- 単純な指示に対して過剰な調査を行わない
- ユーザーが提供した情報を無視してファイルを読み始めない
- 存在しないファイルを探し続けない（1回の失敗で止める）
- **指示された範囲を超えて実装しない**（「フィルターを実装しろ」→フィルターのみ。テーブルは含まない）
- 先回りして追加実装しない。追加が必要なら確認を取る
